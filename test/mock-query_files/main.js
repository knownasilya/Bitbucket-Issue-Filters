var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var i;for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}}function eachReverse(e,t){if(e){var i;for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var i;for(i in e)if(hasProp(e,i)&&t(e[i],i))break}function mixin(e,t,i,n){return t&&eachProp(t,function(t,r){(i||!hasProp(e,r))&&(n&&"string"!=typeof t?(e[r]||(e[r]={}),mixin(e[r],t,i,n)):e[r]=t)}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,i,n){var r=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=n,i&&(r.originalError=i),r}function newContext(e){function t(e){var t,i;for(t=0;e[t];t+=1)if(i=e[t],"."===i)e.splice(t,1),t-=1;else if(".."===i){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function i(e,i,n){var r,o,s,a,l,c,u,d,h,p,f,m=i&&i.split("/"),g=m,v=k.map,b=v&&v["*"];if(e&&"."===e.charAt(0)&&(i?(g=getOwn(k.pkgs,i)?m=[i]:m.slice(0,m.length-1),e=g.concat(e.split("/")),t(e),o=getOwn(k.pkgs,r=e[0]),e=e.join("/"),o&&e===r+"/"+o.main&&(e=r)):0===e.indexOf("./")&&(e=e.substring(2))),n&&v&&(m||b)){for(a=e.split("/"),l=a.length;l>0;l-=1){if(u=a.slice(0,l).join("/"),m)for(c=m.length;c>0;c-=1)if(s=getOwn(v,m.slice(0,c).join("/")),s&&(s=getOwn(s,u))){d=s,h=l;break}if(d)break;!p&&b&&getOwn(b,u)&&(p=getOwn(b,u),f=l)}!d&&p&&(d=p,h=f),d&&(a.splice(0,h,d),e=a.join("/"))}return e}function n(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===_.contextName?(t.parentNode.removeChild(t),!0):void 0})}function r(e){var t=getOwn(k.paths,e);return t&&isArray(t)&&t.length>1?(n(e),t.shift(),_.require.undef(e),_.require([e]),!0):void 0}function o(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function s(e,t,n,r){var s,a,l,c,u=null,d=t?t.name:null,h=e,p=!0,f="";return e||(p=!1,e="_@r"+(I+=1)),c=o(e),u=c[0],e=c[1],u&&(u=i(u,d,r),a=getOwn(E,u)),e&&(u?f=a&&a.normalize?a.normalize(e,function(e){return i(e,d,r)}):i(e,d,r):(f=i(e,d,r),c=o(f),u=c[0],f=c[1],n=!0,s=_.nameToUrl(f))),l=!u||a||n?"":"_unnormalized"+(A+=1),{prefix:u,name:f,parentMap:t,unnormalized:!!l,url:s,originalName:h,isDefine:p,id:(u?u+"!"+f:f)+l}}function a(e){var t=e.id,i=getOwn(C,t);return i||(i=C[t]=new _.Module(e)),i}function l(e,t,i){var n=e.id,r=getOwn(C,n);!hasProp(E,n)||r&&!r.defineEmitComplete?(r=a(e),r.error&&"error"===t?i(r.error):r.on(t,i)):"defined"===t&&i(E[n])}function c(e,t){var i=e.requireModules,n=!1;t?t(e):(each(i,function(t){var i=getOwn(C,t);i&&(i.error=e,i.events.error&&(n=!0,i.emit("error",e)))}),n||req.onError(e))}function u(){globalDefQueue.length&&(apsp.apply(T,[T.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function d(e){delete C[e],delete S[e]}function h(e,t,i){var n=e.map.id;e.error?e.emit("error",e.error):(t[n]=!0,each(e.depMaps,function(n,r){var o=n.id,s=getOwn(C,o);!s||e.depMatched[r]||i[o]||(getOwn(t,o)?(e.defineDep(r,E[o]),e.check()):h(s,t,i))}),i[n]=!0)}function p(){var e,t,i,o,s=1e3*k.waitSeconds,a=s&&_.startTime+s<(new Date).getTime(),l=[],u=[],d=!1,f=!0;if(!b){if(b=!0,eachProp(S,function(i){if(e=i.map,t=e.id,i.enabled&&(e.isDefine||u.push(i),!i.error))if(!i.inited&&a)r(t)?(o=!0,d=!0):(l.push(t),n(t));else if(!i.inited&&i.fetched&&e.isDefine&&(d=!0,!e.prefix))return f=!1}),a&&l.length)return i=makeError("timeout","Load timeout for modules: "+l,null,l),i.contextName=_.contextName,c(i);f&&each(u,function(e){h(e,{},{})}),a&&!o||!d||!isBrowser&&!isWebWorker||x||(x=setTimeout(function(){x=0,p()},50)),b=!1}}function f(e){hasProp(E,e[0])||a(s(e[0],null,!0)).init(e[1],e[2])}function m(e,t,i,n){e.detachEvent&&!isOpera?n&&e.detachEvent(n,t):e.removeEventListener(i,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return m(t,_.onScriptLoad,"load","onreadystatechange"),m(t,_.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(u();T.length;){if(e=T.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));f(e)}}var b,y,_,w,x,k={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},C={},S={},$={},T=[],E={},D={},I=1,A=1;return w={require:function(e){return e.require?e.require:e.require=_.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?e.exports:e.exports=E[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t,i=getOwn(k.pkgs,e.map.id);return t=i?getOwn(k.config,e.map.id+"/"+i.main):getOwn(k.config,e.map.id),t||{}},exports:E[e.map.id]}}},y=function(e){this.events=getOwn($,e.id)||{},this.map=e,this.shim=getOwn(k.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,t,i,n){n=n||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=n.ignore,n.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,_.startTime=(new Date).getTime();var e=this.map;return this.shim?(_.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})),void 0):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;D[e]||(D[e]=!0,_.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id,n=this.depExports,r=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{r=_.execCb(i,o,n,r)}catch(s){e=s}else r=_.execCb(i,o,n,r);if(this.map.isDefine&&(t=this.module,t&&void 0!==t.exports&&t.exports!==this.exports?r=t.exports:void 0===r&&this.usingExports&&(r=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else r=o;this.exports=r,this.map.isDefine&&!this.ignore&&(E[i]=r,req.onResourceLoad&&req.onResourceLoad(_,this.map,this.depMaps)),d(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,n=s(e.prefix);this.depMaps.push(n),l(n,"defined",bind(this,function(n){var r,o,u,h=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,f=_.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(n.normalize&&(h=n.normalize(h,function(e){return i(e,p,!0)})||""),o=s(e.prefix+"!"+h,this.map.parentMap),l(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),u=getOwn(C,o.id),u&&(this.depMaps.push(o),this.events.error&&u.on("error",bind(this,function(e){this.emit("error",e)})),u.enable()),void 0):(r=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),r.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(C,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&d(e.map.id)}),c(e)}),r.fromText=bind(this,function(i,n){var o=e.name,l=s(o),u=useInteractive;n&&(i=n),u&&(useInteractive=!1),a(l),hasProp(k.config,t)&&(k.config[o]=k.config[t]);try{req.exec(i)}catch(d){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+d,d,[t]))}u&&(useInteractive=!0),this.depMaps.push(l),_.completeLoad(o),f([o],r)}),n.load(e.name,f,r,k),void 0)})),_.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){S[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var i,n,r;if("string"==typeof e){if(e=s(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,r=getOwn(w,e.id))return this.depExports[t]=r(this),void 0;this.depCount+=1,l(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&l(e,"error",bind(this,this.errback))}i=e.id,n=C[i],hasProp(w,i)||!n||n.enabled||_.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(C,e.id);t&&!t.enabled&&_.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},_={config:k,contextName:e,registry:C,defined:E,urlFetched:D,defQueue:T,Module:y,makeModuleMap:s,nextTick:req.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=k.pkgs,i=k.shim,n={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?"map"===t?(k.map||(k.map={}),mixin(k[t],e,!0,!0)):mixin(k[t],e,!0):k[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=_.makeShimExports(e)),i[t]=e}),k.shim=i),e.packages&&(each(e.packages,function(e){var i;e="string"==typeof e?{name:e}:e,i=e.location,t[e.name]={name:e.name,location:i||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),k.pkgs=t),eachProp(C,function(e,t){e.inited||e.map.unnormalized||(e.map=s(t))}),(e.deps||e.callback)&&_.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function r(i,o,l){var u,d,h;return n.enableBuildCallback&&o&&isFunction(o)&&(o.__requireJsBuild=!0),"string"==typeof i?isFunction(o)?c(makeError("requireargs","Invalid require call"),l):t&&hasProp(w,i)?w[i](C[t.id]):req.get?req.get(_,i,t,r):(d=s(i,t,!1,!0),u=d.id,hasProp(E,u)?E[u]:c(makeError("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),_.nextTick(function(){v(),h=a(s(null,t)),h.skipMap=n.skipMap,h.init(i,o,l,{enabled:!0}),p()}),r)}return n=n||{},mixin(r,{isBrowser:isBrowser,toUrl:function(e){var n,r=e.lastIndexOf("."),o=e.split("/")[0],s="."===o||".."===o;return-1!==r&&(!s||r>1)&&(n=e.substring(r,e.length),e=e.substring(0,r)),_.nameToUrl(i(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(E,s(e,t,!1,!0).id)},specified:function(e){return e=s(e,t,!1,!0).id,hasProp(E,e)||hasProp(C,e)}}),t||(r.undef=function(e){u();var i=s(e,t,!0),n=getOwn(C,e);delete E[e],delete D[i.url],delete $[e],n&&(n.events.defined&&($[e]=n.events),d(e))}),r},enable:function(e){var t=getOwn(C,e.id);t&&a(e).enable()},completeLoad:function(e){var t,i,n,o=getOwn(k.shim,e)||{},s=o.exports;for(u();T.length;){if(i=T.shift(),null===i[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);f(i)}if(n=getOwn(C,e),!t&&!hasProp(E,e)&&n&&!n.inited){if(!(!k.enforceDefine||s&&getGlobal(s)))return r(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));f([e,o.deps||[],o.exportsFn])}p()},nameToUrl:function(e,t,i){var n,r,o,s,a,l,c,u,d;if(req.jsExtRegExp.test(e))u=e+(t||"");else{for(n=k.paths,r=k.pkgs,a=e.split("/"),l=a.length;l>0;l-=1){if(c=a.slice(0,l).join("/"),o=getOwn(r,c),d=getOwn(n,c)){isArray(d)&&(d=d[0]),a.splice(0,l,d);break}if(o){s=e===o.name?o.location+"/"+o.main:o.location,a.splice(0,l,s);break}}u=a.join("/"),u+=t||(/\?/.test(u)||i?"":".js"),u=("/"===u.charAt(0)||u.match(/^[\w\+\.\-]+:/)?"":k.baseUrl)+u}return k.urlArgs?u+((-1===u.indexOf("?")?"?":"&")+k.urlArgs):u},load:function(e,t){req.load(_,e,t)},execCb:function(e,t,i,n){return t.apply(n,i)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);_.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);return r(t.id)?void 0:c(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},_.require=_.makeRequire(),_}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.6",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||!navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,i,n){var r,o,s=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=i,i=n):e=[]),o&&o.context&&(s=o.context),r=getOwn(contexts,s),r||(r=contexts[s]=req.s.newContext(s)),o&&r.configure(o),r.require(e,t,i)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.load=function(e,t,i){var n,r=e&&e.config||{};if(isBrowser)return n=r.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),n.type=r.scriptType||"text/javascript",n.charset="utf-8",n.async=!0,n.setAttribute("data-requirecontext",e.contextName),n.setAttribute("data-requiremodule",t),!n.attachEvent||n.attachEvent.toString&&n.attachEvent.toString().indexOf("[native code")<0||isOpera?(n.addEventListener("load",e.onScriptLoad,!1),n.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,n.attachEvent("onreadystatechange",e.onScriptLoad)),n.src=i,currentlyAddingScript=n,baseElement?head.insertBefore(n,baseElement):head.appendChild(n),currentlyAddingScript=null,n;if(isWebWorker)try{importScripts(i),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+i,o,[t]))}},isBrowser&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,i){var n,r;"string"!=typeof e&&(i=t,t=e,e=null),isArray(t)||(i=t,t=null),!t&&isFunction(i)&&(t=[],i.length&&(i.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,i){t.push(i)}),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(n=currentlyAddingScript||getInteractiveScript(),n&&(e||(e=n.getAttribute("data-requiremodule")),r=contexts[n.getAttribute("data-requirecontext")])),(r?r.defQueue:globalDefQueue).push([e,t,i])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("require-lib",function(){}),function(e,t){function i(e){var t,i,n=L[e]={};for(e=e.split(/\s+/),t=0,i=e.length;i>t;t++)n[e[t]]=!0;return n}function n(e,i,n){if(n===t&&1===e.nodeType){var r="data-"+i.replace(z,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:q.isNumeric(n)?+n:R.test(n)?q.parseJSON(n):n}catch(o){}q.data(e,i,n)}else n=t}return n}function r(e){for(var t in e)if(("data"!==t||!q.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function o(e,t,i){var n=t+"defer",r=t+"queue",o=t+"mark",s=q._data(e,n);!s||"queue"!==i&&q._data(e,r)||"mark"!==i&&q._data(e,o)||setTimeout(function(){q._data(e,r)||q._data(e,o)||(q.removeData(e,n,!0),s.fire())},0)}function s(){return!1}function a(){return!0}function l(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function c(e,t,i){if(t=t||0,q.isFunction(t))return q.grep(e,function(e,n){var r=!!t.call(e,n,e);return r===i});if(t.nodeType)return q.grep(e,function(e){return e===t===i});if("string"==typeof t){var n=q.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return q.filter(t,n,!i);t=q.filter(t,n)}return q.grep(e,function(e){return q.inArray(e,t)>=0===i})}function u(e){var t=ft.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function d(e){return q.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e,t){if(1===t.nodeType&&q.hasData(e)){var i,n,r,o=q._data(e),s=q._data(t,o),a=o.events;if(a){delete s.handle,s.events={};for(i in a)for(n=0,r=a[i].length;r>n;n++)q.event.add(t,i,a[i][n])}s.data&&(s.data=q.extend({},s.data))}}function p(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),i=t.nodeName.toLowerCase(),"object"===i?t.outerHTML=e.outerHTML:"input"!==i||"checkbox"!==e.type&&"radio"!==e.type?"option"===i?t.selected=e.defaultSelected:"input"===i||"textarea"===i?t.defaultValue=e.defaultValue:"script"===i&&t.text!==e.text&&(t.text=e.text):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(q.expando),t.removeAttribute("_submit_attached"),t.removeAttribute("_change_attached"))}function f(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function m(e){("checkbox"===e.type||"radio"===e.type)&&(e.defaultChecked=e.checked)}function g(e){var t=(e.nodeName||"").toLowerCase();"input"===t?m(e):"script"!==t&&"undefined"!=typeof e.getElementsByTagName&&q.grep(e.getElementsByTagName("input"),m)}function v(e){var t=j.createElement("div");return Et.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function b(e,t,i){var n="width"===t?e.offsetWidth:e.offsetHeight,r="width"===t?1:0,o=4;if(n>0){if("border"!==i)for(;o>r;r+=2)i||(n-=parseFloat(q.css(e,"padding"+Nt[r]))||0),"margin"===i?n+=parseFloat(q.css(e,i+Nt[r]))||0:n-=parseFloat(q.css(e,"border"+Nt[r]+"Width"))||0;return n+"px"}if(n=Dt(e,t),(0>n||null==n)&&(n=e.style[t]),Lt.test(n))return n;if(n=parseFloat(n)||0,i)for(;o>r;r+=2)n+=parseFloat(q.css(e,"padding"+Nt[r]))||0,"padding"!==i&&(n+=parseFloat(q.css(e,"border"+Nt[r]+"Width"))||0),"margin"===i&&(n+=parseFloat(q.css(e,i+Nt[r]))||0);return n+"px"}function y(e){return function(t,i){if("string"!=typeof t&&(i=t,t="*"),q.isFunction(i))for(var n,r,o,s=t.toLowerCase().split(ti),a=0,l=s.length;l>a;a++)n=s[a],o=/^\+/.test(n),o&&(n=n.substr(1)||"*"),r=e[n]=e[n]||[],r[o?"unshift":"push"](i)}}function _(e,i,n,r,o,s){o=o||i.dataTypes[0],s=s||{},s[o]=!0;for(var a,l=e[o],c=0,u=l?l.length:0,d=e===oi;u>c&&(d||!a);c++)a=l[c](i,n,r),"string"==typeof a&&(!d||s[a]?a=t:(i.dataTypes.unshift(a),a=_(e,i,n,r,a,s)));return!d&&a||s["*"]||(a=_(e,i,n,r,"*",s)),a}function w(e,i){var n,r,o=q.ajaxSettings.flatOptions||{};for(n in i)i[n]!==t&&((o[n]?e:r||(r={}))[n]=i[n]);r&&q.extend(!0,e,r)}function x(e,t,i,n){if(q.isArray(t))q.each(t,function(t,r){i||Ut.test(e)?n(e,r):x(e+"["+("object"==typeof r?t:"")+"]",r,i,n)});else if(i||"object"!==q.type(t))n(e,t);else for(var r in t)x(e+"["+r+"]",t[r],i,n)}function k(e,i,n){var r,o,s,a,l=e.contents,c=e.dataTypes,u=e.responseFields;for(o in u)o in n&&(i[u[o]]=n[o]);for(;"*"===c[0];)c.shift(),r===t&&(r=e.mimeType||i.getResponseHeader("content-type"));if(r)for(o in l)if(l[o]&&l[o].test(r)){c.unshift(o);break}if(c[0]in n)s=c[0];else{for(o in n){if(!c[0]||e.converters[o+" "+c[0]]){s=o;break}a||(a=o)}s=s||a}return s?(s!==c[0]&&c.unshift(s),n[s]):void 0}function C(e,i){e.dataFilter&&(i=e.dataFilter(i,e.dataType));var n,r,o,s,a,l,c,u,d=e.dataTypes,h={},p=d.length,f=d[0];for(n=1;p>n;n++){if(1===n)for(r in e.converters)"string"==typeof r&&(h[r.toLowerCase()]=e.converters[r]);if(s=f,f=d[n],"*"===f)f=s;else if("*"!==s&&s!==f){if(a=s+" "+f,l=h[a]||h["* "+f],!l){u=t;for(c in h)if(o=c.split(" "),(o[0]===s||"*"===o[0])&&(u=h[o[1]+" "+f])){c=h[c],c===!0?l=u:u===!0&&(l=c);break}}l||u||q.error("No conversion from "+a.replace(" "," to ")),l!==!0&&(i=l?l(i):u(c(i)))}}return i}function S(){try{return new e.XMLHttpRequest}catch(t){}}function $(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function T(){return setTimeout(E,0),vi=q.now()}function E(){vi=t}function D(e,t){var i={};return q.each(wi.concat.apply([],wi.slice(0,t)),function(){i[this]=e}),i}function I(e){if(!bi[e]){var t=j.body,i=q("<"+e+">").appendTo(t),n=i.css("display");i.remove(),("none"===n||""===n)&&(fi||(fi=j.createElement("iframe"),fi.frameBorder=fi.width=fi.height=0),t.appendChild(fi),mi&&fi.createElement||(mi=(fi.contentWindow||fi.contentDocument).document,mi.write((q.support.boxModel?"<!doctype html>":"")+"<html><body>"),mi.close()),i=mi.createElement(e),mi.body.appendChild(i),n=q.css(i,"display"),t.removeChild(fi)),bi[e]=n}return bi[e]}function A(e){return q.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var j=e.document,M=e.navigator,P=e.location,q=function(){function i(){if(!a.isReady){try{j.documentElement.doScroll("left")}catch(e){return setTimeout(i,1),void 0}a.ready()}}var n,r,o,s,a=function(e,t){return new a.fn.init(e,t,n)},l=e.jQuery,c=e.$,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,d=/\S/,h=/^\s+/,p=/\s+$/,f=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,m=/^[\],:{}\s]*$/,g=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,b=/(?:^|:|,)(?:\s*\[)+/g,y=/(webkit)[ \/]([\w.]+)/,_=/(opera)(?:.*version)?[ \/]([\w.]+)/,w=/(msie) ([\w.]+)/,x=/(mozilla)(?:.*? rv:([\w.]+))?/,k=/-([a-z]|[0-9])/gi,C=/^-ms-/,S=function(e,t){return(t+"").toUpperCase()},$=M.userAgent,T=Object.prototype.toString,E=Object.prototype.hasOwnProperty,D=Array.prototype.push,I=Array.prototype.slice,A=String.prototype.trim,P=Array.prototype.indexOf,q={};return a.fn=a.prototype={constructor:a,init:function(e,i,n){var r,o,s,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!i&&j.body)return this.context=j,this[0]=j.body,this.selector=e,this.length=1,this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:u.exec(e),!r||!r[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(r[1])return i=i instanceof a?i[0]:i,l=i?i.ownerDocument||i:j,s=f.exec(e),s?a.isPlainObject(i)?(e=[j.createElement(s[1])],a.fn.attr.call(e,i,!0)):e=[l.createElement(s[1])]:(s=a.buildFragment([r[1]],[l]),e=(s.cacheable?a.clone(s.fragment):s.fragment).childNodes),a.merge(this,e);if(o=j.getElementById(r[2]),o&&o.parentNode){if(o.id!==r[2])return n.find(e);this.length=1,this[0]=o}return this.context=j,this.selector=e,this}return a.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),a.makeArray(e,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return I.call(this,0)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,i){var n=this.constructor();return a.isArray(e)?D.apply(n,e):a.merge(n,e),n.prevObject=this,n.context=this.context,"find"===t?n.selector=this.selector+(this.selector?" ":"")+i:t&&(n.selector=this.selector+"."+t+"("+i+")"),n},each:function(e,t){return a.each(this,e,t)},ready:function(e){return a.bindReady(),o.add(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(I.apply(this,arguments),"slice",I.call(arguments).join(","))},map:function(e){return this.pushStack(a.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:D,sort:[].sort,splice:[].splice},a.fn.init.prototype=a.fn,a.extend=a.fn.extend=function(){var e,i,n,r,o,s,l=arguments[0]||{},c=1,u=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[1]||{},c=2),"object"==typeof l||a.isFunction(l)||(l={}),u===c&&(l=this,--c);u>c;c++)if(null!=(e=arguments[c]))for(i in e)n=l[i],r=e[i],l!==r&&(d&&r&&(a.isPlainObject(r)||(o=a.isArray(r)))?(o?(o=!1,s=n&&a.isArray(n)?n:[]):s=n&&a.isPlainObject(n)?n:{},l[i]=a.extend(d,s,r)):r!==t&&(l[i]=r));return l},a.extend({noConflict:function(t){return e.$===a&&(e.$=c),t&&e.jQuery===a&&(e.jQuery=l),a},isReady:!1,readyWait:1,holdReady:function(e){e?a.readyWait++:a.ready(!0)},ready:function(e){if(e===!0&&!--a.readyWait||e!==!0&&!a.isReady){if(!j.body)return setTimeout(a.ready,1);if(a.isReady=!0,e!==!0&&--a.readyWait>0)return;o.fireWith(j,[a]),a.fn.trigger&&a(j).trigger("ready").off("ready")}},bindReady:function(){if(!o){if(o=a.Callbacks("once memory"),"complete"===j.readyState)return setTimeout(a.ready,1);if(j.addEventListener)j.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",a.ready,!1);else if(j.attachEvent){j.attachEvent("onreadystatechange",s),e.attachEvent("onload",a.ready);var t=!1;try{t=null==e.frameElement}catch(n){}j.documentElement.doScroll&&t&&i()}}},isFunction:function(e){return"function"===a.type(e)},isArray:Array.isArray||function(e){return"array"===a.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):q[T.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==a.type(e)||e.nodeType||a.isWindow(e))return!1;try{if(e.constructor&&!E.call(e,"constructor")&&!E.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n;for(n in e);return n===t||E.call(e,n)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){return"string"==typeof t&&t?(t=a.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):m.test(t.replace(g,"@").replace(v,"]").replace(b,""))?new Function("return "+t)():(a.error("Invalid JSON: "+t),void 0)):null},parseXML:function(i){if("string"!=typeof i||!i)return null;var n,r;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(o){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||a.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&d.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,S)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,i,n){var r,o=0,s=e.length,l=s===t||a.isFunction(e);if(n)if(l){for(r in e)if(i.apply(e[r],n)===!1)break}else for(;s>o&&i.apply(e[o++],n)!==!1;);else if(l){for(r in e)if(i.call(e[r],r,e[r])===!1)break}else for(;s>o&&i.call(e[o],o,e[o++])!==!1;);return e},trim:A?function(e){return null==e?"":A.call(e)}:function(e){return null==e?"":e.toString().replace(h,"").replace(p,"")},makeArray:function(e,t){var i=t||[];if(null!=e){var n=a.type(e);null==e.length||"string"===n||"function"===n||"regexp"===n||a.isWindow(e)?D.call(i,e):a.merge(i,e)}return i},inArray:function(e,t,i){var n;if(t){if(P)return P.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=e.length,r=0;if("number"==typeof i.length)for(var o=i.length;o>r;r++)e[n++]=i[r];else for(;i[r]!==t;)e[n++]=i[r++];return e.length=n,e},grep:function(e,t,i){var n,r=[];i=!!i;for(var o=0,s=e.length;s>o;o++)n=!!t(e[o],o),i!==n&&r.push(e[o]);return r},map:function(e,i,n){var r,o,s=[],l=0,c=e.length,u=e instanceof a||c!==t&&"number"==typeof c&&(c>0&&e[0]&&e[c-1]||0===c||a.isArray(e));if(u)for(;c>l;l++)r=i(e[l],l,n),null!=r&&(s[s.length]=r);else for(o in e)r=i(e[o],o,n),null!=r&&(s[s.length]=r);return s.concat.apply([],s)},guid:1,proxy:function(e,i){if("string"==typeof i){var n=e[i];i=e,e=n}if(!a.isFunction(e))return t;var r=I.call(arguments,2),o=function(){return e.apply(i,r.concat(I.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||a.guid++,o},access:function(e,i,n,r,o,s,l){var c,u=null==n,d=0,h=e.length;if(n&&"object"==typeof n){for(d in n)a.access(e,i,d,n[d],1,s,r);o=1}else if(r!==t){if(c=l===t&&a.isFunction(r),u&&(c?(c=i,i=function(e,t,i){return c.call(a(e),i)}):(i.call(e,r),i=null)),i)for(;h>d;d++)i(e[d],n,c?r.call(e[d],d,i(e[d],n)):r,l);o=1}return o?e:u?i.call(e):h?i(e[0],n):s},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=y.exec(e)||_.exec(e)||w.exec(e)||e.indexOf("compatible")<0&&x.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,i){return new e.fn.init(t,i)}a.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,n){return n&&n instanceof a&&!(n instanceof e)&&(n=e(n)),a.fn.init.call(this,i,n,t)},e.fn.init.prototype=e.fn;var t=e(j);return e},browser:{}}),a.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){q["[object "+t+"]"]=t.toLowerCase()}),r=a.uaMatch($),r.browser&&(a.browser[r.browser]=!0,a.browser.version=r.version),a.browser.webkit&&(a.browser.safari=!0),d.test(" ")&&(h=/^[\s\xA0]+/,p=/[\s\xA0]+$/),n=a(j),j.addEventListener?s=function(){j.removeEventListener("DOMContentLoaded",s,!1),a.ready()}:j.attachEvent&&(s=function(){"complete"===j.readyState&&(j.detachEvent("onreadystatechange",s),a.ready())}),a}(),L={};q.Callbacks=function(e){e=e?L[e]||i(e):{};var n,r,o,s,a,l,c=[],u=[],d=function(t){var i,n,r,o;for(i=0,n=t.length;n>i;i++)r=t[i],o=q.type(r),"array"===o?d(r):"function"===o&&(e.unique&&p.has(r)||c.push(r))},h=function(t,i){for(i=i||[],n=!e.memory||[t,i],r=!0,o=!0,l=s||0,s=0,a=c.length;c&&a>l;l++)if(c[l].apply(t,i)===!1&&e.stopOnFalse){n=!0;break}o=!1,c&&(e.once?n===!0?p.disable():c=[]:u&&u.length&&(n=u.shift(),p.fireWith(n[0],n[1])))},p={add:function(){if(c){var e=c.length;d(arguments),o?a=c.length:n&&n!==!0&&(s=e,h(n[0],n[1]))}return this},remove:function(){if(c)for(var t=arguments,i=0,n=t.length;n>i;i++)for(var r=0;r<c.length&&(t[i]!==c[r]||(o&&a>=r&&(a--,l>=r&&l--),c.splice(r--,1),!e.unique));r++);return this},has:function(e){if(c)for(var t=0,i=c.length;i>t;t++)if(e===c[t])return!0;return!1},empty:function(){return c=[],this},disable:function(){return c=u=n=t,this},disabled:function(){return!c},lock:function(){return u=t,n&&n!==!0||p.disable(),this},locked:function(){return!u},fireWith:function(t,i){return u&&(o?e.once||u.push([t,i]):e.once&&n||h(t,i)),this},fire:function(){return p.fireWith(this,arguments),this
},fired:function(){return!!r}};return p};var O=[].slice;q.extend({Deferred:function(e){var t,i=q.Callbacks("once memory"),n=q.Callbacks("once memory"),r=q.Callbacks("memory"),o="pending",s={resolve:i,reject:n,notify:r},a={done:i.add,fail:n.add,progress:r.add,state:function(){return o},isResolved:i.fired,isRejected:n.fired,then:function(e,t,i){return l.done(e).fail(t).progress(i),this},always:function(){return l.done.apply(l,arguments).fail.apply(l,arguments),this},pipe:function(e,t,i){return q.Deferred(function(n){q.each({done:[e,"resolve"],fail:[t,"reject"],progress:[i,"notify"]},function(e,t){var i,r=t[0],o=t[1];q.isFunction(r)?l[e](function(){i=r.apply(this,arguments),i&&q.isFunction(i.promise)?i.promise().then(n.resolve,n.reject,n.notify):n[o+"With"](this===l?n:this,[i])}):l[e](n[o])})}).promise()},promise:function(e){if(null==e)e=a;else for(var t in a)e[t]=a[t];return e}},l=a.promise({});for(t in s)l[t]=s[t].fire,l[t+"With"]=s[t].fireWith;return l.done(function(){o="resolved"},n.disable,r.lock).fail(function(){o="rejected"},i.disable,r.lock),e&&e.call(l,l),l},when:function(e){function t(e){return function(t){n[e]=arguments.length>1?O.call(arguments,0):t,--a||l.resolveWith(l,n)}}function i(e){return function(t){s[e]=arguments.length>1?O.call(arguments,0):t,l.notifyWith(c,s)}}var n=O.call(arguments,0),r=0,o=n.length,s=new Array(o),a=o,l=1>=o&&e&&q.isFunction(e.promise)?e:q.Deferred(),c=l.promise();if(o>1){for(;o>r;r++)n[r]&&n[r].promise&&q.isFunction(n[r].promise)?n[r].promise().then(t(r),l.reject,i(r)):--a;a||l.resolveWith(l,n)}else l!==e&&l.resolveWith(l,o?[e]:[]);return c}}),q.support=function(){var t,i,n,r,o,s,a,l,c,u,d,h=j.createElement("div");if(j.documentElement,h.setAttribute("className","t"),h.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",i=h.getElementsByTagName("*"),n=h.getElementsByTagName("a")[0],!i||!i.length||!n)return{};r=j.createElement("select"),o=r.appendChild(j.createElement("option")),s=h.getElementsByTagName("input")[0],t={leadingWhitespace:3===h.firstChild.nodeType,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.55/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===s.value,optSelected:o.selected,getSetAttribute:"t"!==h.className,enctype:!!j.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==j.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},q.boxModel=t.boxModel="CSS1Compat"===j.compatMode,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!o.disabled;try{delete h.test}catch(p){t.deleteExpando=!1}if(!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",function(){t.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick")),s=j.createElement("input"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","checked"),s.setAttribute("name","t"),h.appendChild(s),a=j.createDocumentFragment(),a.appendChild(h.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=s.checked,a.removeChild(s),a.appendChild(h),h.attachEvent)for(u in{submit:1,change:1,focusin:1})c="on"+u,d=c in h,d||(h.setAttribute(c,"return;"),d="function"==typeof h[c]),t[u+"Bubbles"]=d;return a.removeChild(h),a=r=o=h=s=null,q(function(){var i,n,r,o,s,a,c,u,p,f,m,g,v=j.getElementsByTagName("body")[0];v&&(c=1,g="padding:0;margin:0;border:",f="position:absolute;top:0;left:0;width:1px;height:1px;",m=g+"0;visibility:hidden;",u="style='"+f+g+"5px solid #000;",p="<div "+u+"display:block;'><div style='"+g+"0;display:block;overflow:hidden;'></div></div>"+"<table "+u+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",i=j.createElement("div"),i.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+c+"px",v.insertBefore(i,v.firstChild),h=j.createElement("div"),i.appendChild(h),h.innerHTML="<table><tr><td style='"+g+"0;display:none'></td><td>t</td></tr></table>",l=h.getElementsByTagName("td"),d=0===l[0].offsetHeight,l[0].style.display="",l[1].style.display="none",t.reliableHiddenOffsets=d&&0===l[0].offsetHeight,e.getComputedStyle&&(h.innerHTML="",a=j.createElement("div"),a.style.width="0",a.style.marginRight="0",h.style.width="2px",h.appendChild(a),t.reliableMarginRight=0===(parseInt((e.getComputedStyle(a,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!=typeof h.style.zoom&&(h.innerHTML="",h.style.width=h.style.padding="1px",h.style.border=0,h.style.overflow="hidden",h.style.display="inline",h.style.zoom=1,t.inlineBlockNeedsLayout=3===h.offsetWidth,h.style.display="block",h.style.overflow="visible",h.innerHTML="<div style='width:5px;'></div>",t.shrinkWrapBlocks=3!==h.offsetWidth),h.style.cssText=f+m,h.innerHTML=p,n=h.firstChild,r=n.firstChild,o=n.nextSibling.firstChild.firstChild,s={doesNotAddBorder:5!==r.offsetTop,doesAddBorderForTableAndCells:5===o.offsetTop},r.style.position="fixed",r.style.top="20px",s.fixedPosition=20===r.offsetTop||15===r.offsetTop,r.style.position=r.style.top="",n.style.overflow="hidden",n.style.position="relative",s.subtractsBorderForOverflowNotVisible=-5===r.offsetTop,s.doesNotIncludeMarginInBodyOffset=v.offsetTop!==c,e.getComputedStyle&&(h.style.marginTop="1%",t.pixelMargin="1%"!==(e.getComputedStyle(h,null)||{marginTop:0}).marginTop),"undefined"!=typeof i.style.zoom&&(i.style.zoom=1),v.removeChild(i),a=h=i=null,q.extend(t,s))}),t}();var R=/^(?:\{.*\}|\[.*\])$/,z=/([A-Z])/g;q.extend({cache:{},uuid:0,expando:"jQuery"+(q.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?q.cache[e[q.expando]]:e[q.expando],!!e&&!r(e)},data:function(e,i,n,r){if(q.acceptData(e)){var o,s,a,l=q.expando,c="string"==typeof i,u=e.nodeType,d=u?q.cache:e,h=u?e[l]:e[l]&&l,p="events"===i;if(h&&d[h]&&(p||r||d[h].data)||!c||n!==t)return h||(u?e[l]=h=++q.uuid:h=l),d[h]||(d[h]={},u||(d[h].toJSON=q.noop)),("object"==typeof i||"function"==typeof i)&&(r?d[h]=q.extend(d[h],i):d[h].data=q.extend(d[h].data,i)),o=s=d[h],r||(s.data||(s.data={}),s=s.data),n!==t&&(s[q.camelCase(i)]=n),p&&!s[i]?o.events:(c?(a=s[i],null==a&&(a=s[q.camelCase(i)])):a=s,a)}},removeData:function(e,t,i){if(q.acceptData(e)){var n,o,s,a=q.expando,l=e.nodeType,c=l?q.cache:e,u=l?e[a]:a;if(c[u]){if(t&&(n=i?c[u]:c[u].data)){q.isArray(t)||(t in n?t=[t]:(t=q.camelCase(t),t=t in n?[t]:t.split(" ")));for(o=0,s=t.length;s>o;o++)delete n[t[o]];if(!(i?r:q.isEmptyObject)(n))return}(i||(delete c[u].data,r(c[u])))&&(q.support.deleteExpando||!c.setInterval?delete c[u]:c[u]=null,l&&(q.support.deleteExpando?delete e[a]:e.removeAttribute?e.removeAttribute(a):e[a]=null))}}},_data:function(e,t,i){return q.data(e,t,i,!0)},acceptData:function(e){if(e.nodeName){var t=q.noData[e.nodeName.toLowerCase()];if(t)return!(t===!0||e.getAttribute("classid")!==t)}return!0}}),q.fn.extend({data:function(e,i){var r,o,s,a,l,c=this[0],u=0,d=null;if(e===t){if(this.length&&(d=q.data(c),1===c.nodeType&&!q._data(c,"parsedAttrs"))){for(s=c.attributes,l=s.length;l>u;u++)a=s[u].name,0===a.indexOf("data-")&&(a=q.camelCase(a.substring(5)),n(c,a,d[a]));q._data(c,"parsedAttrs",!0)}return d}return"object"==typeof e?this.each(function(){q.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",o=r[1]+"!",q.access(this,function(i){return i===t?(d=this.triggerHandler("getData"+o,[r[0]]),d===t&&c&&(d=q.data(c,e),d=n(c,e,d)),d===t&&r[1]?this.data(r[0]):d):(r[1]=i,this.each(function(){var t=q(this);t.triggerHandler("setData"+o,r),q.data(this,e,i),t.triggerHandler("changeData"+o,r)}),void 0)},null,i,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){q.removeData(this,e)})}}),q.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",q._data(e,t,(q._data(e,t)||0)+1))},_unmark:function(e,t,i){if(e!==!0&&(i=t,t=e,e=!1),t){i=i||"fx";var n=i+"mark",r=e?0:(q._data(t,n)||1)-1;r?q._data(t,n,r):(q.removeData(t,n,!0),o(t,i,"mark"))}},queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=q._data(e,t),i&&(!n||q.isArray(i)?n=q._data(e,t,q.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=q.queue(e,t),n=i.shift(),r={};"inprogress"===n&&(n=i.shift()),n&&("fx"===t&&i.unshift("inprogress"),q._data(e,t+".run",r),n.call(e,function(){q.dequeue(e,t)},r)),i.length||(q.removeData(e,t+"queue "+t+".run",!0),o(e,t,"queue"))}}),q.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),arguments.length<n?q.queue(this[0],e):i===t?this:this.each(function(){var t=q.queue(this,e,i);"fx"===e&&"inprogress"!==t[0]&&q.dequeue(this,e)})},dequeue:function(e){return this.each(function(){q.dequeue(this,e)})},delay:function(e,t){return e=q.fx?q.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){function n(){--l||o.resolveWith(s,[s])}"string"!=typeof e&&(i=e,e=t),e=e||"fx";for(var r,o=q.Deferred(),s=this,a=s.length,l=1,c=e+"defer",u=e+"queue",d=e+"mark";a--;)(r=q.data(s[a],c,t,!0)||(q.data(s[a],u,t,!0)||q.data(s[a],d,t,!0))&&q.data(s[a],c,q.Callbacks("once memory"),!0))&&(l++,r.add(n));return n(),o.promise(i)}});var N,F,W,H=/[\n\t\r]/g,U=/\s+/,B=/\r/g,V=/^(?:button|input)$/i,J=/^(?:button|input|object|select|textarea)$/i,G=/^a(?:rea)?$/i,K=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Q=q.support.getSetAttribute;q.fn.extend({attr:function(e,t){return q.access(this,q.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){q.removeAttr(this,e)})},prop:function(e,t){return q.access(this,q.prop,e,t,arguments.length>1)},removeProp:function(e){return e=q.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,n,r,o,s,a;if(q.isFunction(e))return this.each(function(t){q(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(U),i=0,n=this.length;n>i;i++)if(r=this[i],1===r.nodeType)if(r.className||1!==t.length){for(o=" "+r.className+" ",s=0,a=t.length;a>s;s++)~o.indexOf(" "+t[s]+" ")||(o+=t[s]+" ");r.className=q.trim(o)}else r.className=e;return this},removeClass:function(e){var i,n,r,o,s,a,l;if(q.isFunction(e))return this.each(function(t){q(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(U),n=0,r=this.length;r>n;n++)if(o=this[n],1===o.nodeType&&o.className)if(e){for(s=(" "+o.className+" ").replace(H," "),a=0,l=i.length;l>a;a++)s=s.replace(" "+i[a]+" "," ");o.className=q.trim(s)}else o.className="";return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return q.isFunction(e)?this.each(function(i){q(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var r,o=0,s=q(this),a=t,l=e.split(U);r=l[o++];)a=n?a:!s.hasClass(r),s[a?"addClass":"removeClass"](r);else("undefined"===i||"boolean"===i)&&(this.className&&q._data(this,"__className__",this.className),this.className=this.className||e===!1?"":q._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(H," ").indexOf(t)>-1)return!0;return!1},val:function(e){var i,n,r,o=this[0];{if(arguments.length)return r=q.isFunction(e),this.each(function(n){var o,s=q(this);1===this.nodeType&&(o=r?e.call(this,n,s.val()):e,null==o?o="":"number"==typeof o?o+="":q.isArray(o)&&(o=q.map(o,function(e){return null==e?"":e+""})),i=q.valHooks[this.type]||q.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,o,"value")!==t||(this.value=o))});if(o)return i=q.valHooks[o.type]||q.valHooks[o.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(B,""):null==n?"":n)}}}),q.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,i,n,r,o=e.selectedIndex,s=[],a=e.options,l="select-one"===e.type;if(0>o)return null;for(i=l?o:0,n=l?o+1:a.length;n>i;i++)if(r=a[i],!(!r.selected||(q.support.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&q.nodeName(r.parentNode,"optgroup"))){if(t=q(r).val(),l)return t;s.push(t)}return l&&!s.length&&a.length?q(a[o]).val():s},set:function(e,t){var i=q.makeArray(t);return q(e).find("option").each(function(){this.selected=q.inArray(q(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,i,n,r){var o,s,a,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return r&&i in q.attrFn?q(e)[i](n):"undefined"==typeof e.getAttribute?q.prop(e,i,n):(a=1!==l||!q.isXMLDoc(e),a&&(i=i.toLowerCase(),s=q.attrHooks[i]||(K.test(i)?F:N)),n!==t?null===n?(q.removeAttr(e,i),void 0):s&&"set"in s&&a&&(o=s.set(e,n,i))!==t?o:(e.setAttribute(i,""+n),n):s&&"get"in s&&a&&null!==(o=s.get(e,i))?o:(o=e.getAttribute(i),null===o?t:o))},removeAttr:function(e,t){var i,n,r,o,s,a=0;if(t&&1===e.nodeType)for(n=t.toLowerCase().split(U),o=n.length;o>a;a++)r=n[a],r&&(i=q.propFix[r]||r,s=K.test(r),s||q.attr(e,r,""),e.removeAttribute(Q?r:i),s&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(V.test(e.nodeName)&&e.parentNode)q.error("type property can't be changed");else if(!q.support.radioValue&&"radio"===t&&q.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return N&&q.nodeName(e,"button")?N.get(e,t):t in e?e.value:null},set:function(e,t,i){return N&&q.nodeName(e,"button")?N.set(e,t,i):(e.value=t,void 0)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,n){var r,o,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return s=1!==a||!q.isXMLDoc(e),s&&(i=q.propFix[i]||i,o=q.propHooks[i]),n!==t?o&&"set"in o&&(r=o.set(e,n,i))!==t?r:e[i]=n:o&&"get"in o&&null!==(r=o.get(e,i))?r:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):J.test(e.nodeName)||G.test(e.nodeName)&&e.href?0:t}}}}),q.attrHooks.tabindex=q.propHooks.tabIndex,F={get:function(e,i){var n,r=q.prop(e,i);return r===!0||"boolean"!=typeof r&&(n=e.getAttributeNode(i))&&n.nodeValue!==!1?i.toLowerCase():t},set:function(e,t,i){var n;return t===!1?q.removeAttr(e,i):(n=q.propFix[i]||i,n in e&&(e[n]=!0),e.setAttribute(i,i.toLowerCase())),i}},Q||(W={name:!0,id:!0,coords:!0},N=q.valHooks.button={get:function(e,i){var n;return n=e.getAttributeNode(i),n&&(W[i]?""!==n.nodeValue:n.specified)?n.nodeValue:t},set:function(e,t,i){var n=e.getAttributeNode(i);return n||(n=j.createAttribute(i),e.setAttributeNode(n)),n.nodeValue=t+""}},q.attrHooks.tabindex.set=N.set,q.each(["width","height"],function(e,t){q.attrHooks[t]=q.extend(q.attrHooks[t],{set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}})}),q.attrHooks.contenteditable={get:N.get,set:function(e,t,i){""===t&&(t="false"),N.set(e,t,i)}}),q.support.hrefNormalized||q.each(["href","src","width","height"],function(e,i){q.attrHooks[i]=q.extend(q.attrHooks[i],{get:function(e){var n=e.getAttribute(i,2);return null===n?t:n}})}),q.support.style||(q.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),q.support.optSelected||(q.propHooks.selected=q.extend(q.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),q.support.enctype||(q.propFix.enctype="encoding"),q.support.checkOn||q.each(["radio","checkbox"],function(){q.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),q.each(["radio","checkbox"],function(){q.valHooks[this]=q.extend(q.valHooks[this],{set:function(e,t){return q.isArray(t)?e.checked=q.inArray(q(e).val(),t)>=0:void 0}})});var X=/^(?:textarea|input|select)$/i,Y=/^([^\.]*)?(?:\.(.+))?$/,Z=/(?:^|\s)hover(\.\S+)?\b/,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,it=/^(?:focusinfocus|focusoutblur)$/,nt=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,rt=function(e){var t=nt.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},ot=function(e,t){var i=e.attributes||{};return!(t[1]&&e.nodeName.toLowerCase()!==t[1]||t[2]&&(i.id||{}).value!==t[2]||t[3]&&!t[3].test((i["class"]||{}).value))},st=function(e){return q.event.special.hover?e:e.replace(Z,"mouseenter$1 mouseleave$1")};q.event={add:function(e,i,n,r,o){var s,a,l,c,u,d,h,p,f,m,g;if(3!==e.nodeType&&8!==e.nodeType&&i&&n&&(s=q._data(e))){for(n.handler&&(f=n,n=f.handler,o=f.selector),n.guid||(n.guid=q.guid++),l=s.events,l||(s.events=l={}),a=s.handle,a||(s.handle=a=function(e){return"undefined"==typeof q||e&&q.event.triggered===e.type?t:q.event.dispatch.apply(a.elem,arguments)},a.elem=e),i=q.trim(st(i)).split(" "),c=0;c<i.length;c++)u=Y.exec(i[c])||[],d=u[1],h=(u[2]||"").split(".").sort(),g=q.event.special[d]||{},d=(o?g.delegateType:g.bindType)||d,g=q.event.special[d]||{},p=q.extend({type:d,origType:u[1],data:r,handler:n,guid:n.guid,selector:o,quick:o&&rt(o),namespace:h.join(".")},f),m=l[d],m||(m=l[d]=[],m.delegateCount=0,g.setup&&g.setup.call(e,r,h,a)!==!1||(e.addEventListener?e.addEventListener(d,a,!1):e.attachEvent&&e.attachEvent("on"+d,a))),g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),o?m.splice(m.delegateCount++,0,p):m.push(p),q.event.global[d]=!0;e=null}},global:{},remove:function(e,t,i,n,r){var o,s,a,l,c,u,d,h,p,f,m,g,v=q.hasData(e)&&q._data(e);if(v&&(h=v.events)){for(t=q.trim(st(t||"")).split(" "),o=0;o<t.length;o++)if(s=Y.exec(t[o])||[],a=l=s[1],c=s[2],a){for(p=q.event.special[a]||{},a=(n?p.delegateType:p.bindType)||a,m=h[a]||[],u=m.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=0;d<m.length;d++)g=m[d],!r&&l!==g.origType||i&&i.guid!==g.guid||c&&!c.test(g.namespace)||n&&n!==g.selector&&("**"!==n||!g.selector)||(m.splice(d--,1),g.selector&&m.delegateCount--,p.remove&&p.remove.call(e,g));0===m.length&&u!==m.length&&(p.teardown&&p.teardown.call(e,c)!==!1||q.removeEvent(e,a,v.handle),delete h[a])}else for(a in h)q.event.remove(e,a+t[o],i,n,!0);q.isEmptyObject(h)&&(f=v.handle,f&&(f.elem=null),q.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,r,o){if(!r||3!==r.nodeType&&8!==r.nodeType){var s,a,l,c,u,d,h,p,f,m,g=i.type||i,v=[];if(!it.test(g+q.event.triggered)&&(g.indexOf("!")>=0&&(g=g.slice(0,-1),a=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),r&&!q.event.customEvent[g]||q.event.global[g]))if(i="object"==typeof i?i[q.expando]?i:new q.Event(g,i):new q.Event(g),i.type=g,i.isTrigger=!0,i.exclusive=a,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=g.indexOf(":")<0?"on"+g:"",r){if(i.result=t,i.target||(i.target=r),n=null!=n?q.makeArray(n):[],n.unshift(i),h=q.event.special[g]||{},!h.trigger||h.trigger.apply(r,n)!==!1){if(f=[[r,h.bindType||g]],!o&&!h.noBubble&&!q.isWindow(r)){for(m=h.delegateType||g,c=it.test(m+g)?r:r.parentNode,u=null;c;c=c.parentNode)f.push([c,m]),u=c;u&&u===r.ownerDocument&&f.push([u.defaultView||u.parentWindow||e,m])}for(l=0;l<f.length&&!i.isPropagationStopped();l++)c=f[l][0],i.type=f[l][1],p=(q._data(c,"events")||{})[i.type]&&q._data(c,"handle"),p&&p.apply(c,n),p=d&&c[d],p&&q.acceptData(c)&&p.apply(c,n)===!1&&i.preventDefault();return i.type=g,o||i.isDefaultPrevented()||h._default&&h._default.apply(r.ownerDocument,n)!==!1||"click"===g&&q.nodeName(r,"a")||!q.acceptData(r)||d&&r[g]&&("focus"!==g&&"blur"!==g||0!==i.target.offsetWidth)&&!q.isWindow(r)&&(u=r[d],u&&(r[d]=null),q.event.triggered=g,r[g](),q.event.triggered=t,u&&(r[d]=u)),i.result}}else{s=q.cache;for(l in s)s[l].events&&s[l].events[g]&&q.event.trigger(i,n,s[l].handle.elem,!0)}}},dispatch:function(i){i=q.event.fix(i||e.event);var n,r,o,s,a,l,c,u,d,h,p=(q._data(this,"events")||{})[i.type]||[],f=p.delegateCount,m=[].slice.call(arguments,0),g=!i.exclusive&&!i.namespace,v=q.event.special[i.type]||{},b=[];if(m[0]=i,i.delegateTarget=this,!v.preDispatch||v.preDispatch.call(this,i)!==!1){if(f&&(!i.button||"click"!==i.type))for(s=q(this),s.context=this.ownerDocument||this,o=i.target;o!=this;o=o.parentNode||this)if(o.disabled!==!0){for(l={},u=[],s[0]=o,n=0;f>n;n++)d=p[n],h=d.selector,l[h]===t&&(l[h]=d.quick?ot(o,d.quick):s.is(h)),l[h]&&u.push(d);u.length&&b.push({elem:o,matches:u})}for(p.length>f&&b.push({elem:this,matches:p.slice(f)}),n=0;n<b.length&&!i.isPropagationStopped();n++)for(c=b[n],i.currentTarget=c.elem,r=0;r<c.matches.length&&!i.isImmediatePropagationStopped();r++)d=c.matches[r],(g||!i.namespace&&!d.namespace||i.namespace_re&&i.namespace_re.test(d.namespace))&&(i.data=d.data,i.handleObj=d,a=((q.event.special[d.origType]||{}).handle||d.handler).apply(c.elem,m),a!==t&&(i.result=a,a===!1&&(i.preventDefault(),i.stopPropagation())));return v.postDispatch&&v.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,r,o,s=i.button,a=i.fromElement;return null==e.pageX&&null!=i.clientX&&(n=e.target.ownerDocument||j,r=n.documentElement,o=n.body,e.pageX=i.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=i.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?i.toElement:a),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[q.expando])return e;var i,n,r=e,o=q.event.fixHooks[e.type]||{},s=o.props?this.props.concat(o.props):this.props;for(e=q.Event(r),i=s.length;i;)n=s[--i],e[n]=r[n];return e.target||(e.target=r.srcElement||j),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),o.filter?o.filter(e,r):e},special:{ready:{setup:q.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){q.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,n){var r=q.extend(new q.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?q.event.trigger(r,null,t):q.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},q.event.handle=q.event.dispatch,q.removeEvent=j.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){e.detachEvent&&e.detachEvent("on"+t,i)},q.Event=function(e,t){return this instanceof q.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?a:s):this.type=e,t&&q.extend(this,t),this.timeStamp=e&&e.timeStamp||q.now(),this[q.expando]=!0,void 0):new q.Event(e,t)},q.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},q.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){q.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,o=e.handleObj;return o.selector,(!r||r!==n&&!q.contains(n,r))&&(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),q.support.submitBubbles||(q.event.special.submit={setup:function(){return q.nodeName(this,"form")?!1:(q.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=q.nodeName(i,"input")||q.nodeName(i,"button")?i.form:t;n&&!n._submit_attached&&(q.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),n._submit_attached=!0)}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&q.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return q.nodeName(this,"form")?!1:(q.event.remove(this,"._submit"),void 0)}}),q.support.changeBubbles||(q.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(q.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),q.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,q.event.simulate("change",this,e,!0))})),!1):(q.event.add(this,"beforeactivate._change",function(e){var t=e.target;X.test(t.nodeName)&&!t._change_attached&&(q.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||q.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return q.event.remove(this,"._change"),X.test(this.nodeName)}}),q.support.focusinBubbles||q.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){q.event.simulate(t,e.target,q.event.fix(e),!0)};q.event.special[t]={setup:function(){0===i++&&j.addEventListener(e,n,!0)},teardown:function(){0===--i&&j.removeEventListener(e,n,!0)}}}),q.fn.extend({on:function(e,i,n,r,o){var a,l;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(l in e)this.on(l,i,n,e[l],o);return this}if(null==n&&null==r?(r=i,n=i=t):null==r&&("string"==typeof i?(r=n,n=t):(r=n,n=i,i=t)),r===!1)r=s;else if(!r)return this;return 1===o&&(a=r,r=function(e){return q().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=q.guid++)),this.each(function(){q.event.add(this,e,r,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){if(e&&e.preventDefault&&e.handleObj){var r=e.handleObj;return q(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this}if("object"==typeof e){for(var o in e)this.off(o,i,e[o]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=s),this.each(function(){q.event.remove(this,e,n,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return q(this.context).on(e,this.selector,t,i),this},die:function(e,t){return q(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1==arguments.length?this.off(e,"**"):this.off(t,e,i)},trigger:function(e,t){return this.each(function(){q.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?q.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,i=e.guid||q.guid++,n=0,r=function(i){var r=(q._data(this,"lastToggle"+e.guid)||0)%n;return q._data(this,"lastToggle"+e.guid,r+1),i.preventDefault(),t[r].apply(this,arguments)||!1};for(r.guid=i;n<t.length;)t[n++].guid=i;return this.click(r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){q.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)},q.attrFn&&(q.attrFn[t]=!0),et.test(t)&&(q.event.fixHooks[t]=q.event.keyHooks),tt.test(t)&&(q.event.fixHooks[t]=q.event.mouseHooks)}),function(){function e(e,t,i,n,o,s){for(var a=0,l=n.length;l>a;a++){var c=n[a];if(c){var u=!1;for(c=c[e];c;){if(c[r]===i){u=n[c.sizset];break}if(1!==c.nodeType||s||(c[r]=i,c.sizset=a),c.nodeName.toLowerCase()===t){u=c;break}c=c[e]}n[a]=u}}}function i(e,t,i,n,o,s){for(var a=0,l=n.length;l>a;a++){var c=n[a];if(c){var u=!1;for(c=c[e];c;){if(c[r]===i){u=n[c.sizset];break}if(1===c.nodeType)if(s||(c[r]=i,c.sizset=a),"string"!=typeof t){if(c===t){u=!0;break}}else if(h.filter(t,[c]).length>0){u=c;break}c=c[e]}n[a]=u}}}var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),o=0,s=Object.prototype.toString,a=!1,l=!0,c=/\\/g,u=/\r\n/g,d=/\W/;[0,0].sort(function(){return l=!1,0});var h=function(e,t,i,r){i=i||[],t=t||j;var o=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return i;var a,l,c,u,d,p,g,v,y=!0,_=h.isXML(t),w=[],k=e;do if(n.exec(""),a=n.exec(k),a&&(k=a[3],w.push(a[1]),a[2])){u=a[3];break}while(a);if(w.length>1&&m.exec(e))if(2===w.length&&f.relative[w[0]])l=x(w[0]+w[1],t,r);else for(l=f.relative[w[0]]?[t]:h(w.shift(),t);w.length;)e=w.shift(),f.relative[e]&&(e+=w.shift()),l=x(e,l,r);else if(!r&&w.length>1&&9===t.nodeType&&!_&&f.match.ID.test(w[0])&&!f.match.ID.test(w[w.length-1])&&(d=h.find(w.shift(),t,_),t=d.expr?h.filter(d.expr,d.set)[0]:d.set[0]),t)for(d=r?{expr:w.pop(),set:b(r)}:h.find(w.pop(),1!==w.length||"~"!==w[0]&&"+"!==w[0]||!t.parentNode?t:t.parentNode,_),l=d.expr?h.filter(d.expr,d.set):d.set,w.length>0?c=b(l):y=!1;w.length;)p=w.pop(),g=p,f.relative[p]?g=w.pop():p="",null==g&&(g=t),f.relative[p](c,g,_);else c=w=[];if(c||(c=l),c||h.error(p||e),"[object Array]"===s.call(c))if(y)if(t&&1===t.nodeType)for(v=0;null!=c[v];v++)c[v]&&(c[v]===!0||1===c[v].nodeType&&h.contains(t,c[v]))&&i.push(l[v]);else for(v=0;null!=c[v];v++)c[v]&&1===c[v].nodeType&&i.push(l[v]);else i.push.apply(i,c);else b(c,i);return u&&(h(u,o,i,r),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(_&&(a=l,e.sort(_),a))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,i){var n,r,o,s,a,l;if(!e)return[];for(r=0,o=f.order.length;o>r;r++)if(a=f.order[r],(s=f.leftMatch[a].exec(e))&&(l=s[1],s.splice(1,1),"\\"!==l.substr(l.length-1)&&(s[1]=(s[1]||"").replace(c,""),n=f.find[a](s,t,i),null!=n))){e=e.replace(f.match[a],"");break}return n||(n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:n,expr:e}},h.filter=function(e,i,n,r){for(var o,s,a,l,c,u,d,p,m,g=e,v=[],b=i,y=i&&i[0]&&h.isXML(i[0]);e&&i.length;){for(a in f.filter)if(null!=(o=f.leftMatch[a].exec(e))&&o[2]){if(u=f.filter[a],d=o[1],s=!1,o.splice(1,1),"\\"===d.substr(d.length-1))continue;if(b===v&&(v=[]),f.preFilter[a])if(o=f.preFilter[a](o,b,n,v,r,y)){if(o===!0)continue}else s=l=!0;if(o)for(p=0;null!=(c=b[p]);p++)c&&(l=u(c,o,p,b),m=r^l,n&&null!=l?m?s=!0:b[p]=!1:m&&(v.push(c),s=!0));if(l!==t){if(n||(b=v),e=e.replace(f.match[a],""),!s)return[];break}}if(e===g){if(null!=s)break;h.error(e)}g=e}return b},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,i,n=e.nodeType,r="";if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;
if("string"==typeof e.innerText)return e.innerText.replace(u,"");for(e=e.firstChild;e;e=e.nextSibling)r+=p(e)}else if(3===n||4===n)return e.nodeValue}else for(t=0;i=e[t];t++)8!==i.nodeType&&(r+=p(i));return r},f=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var i="string"==typeof t,n=i&&!d.test(t),r=i&&!n;n&&(t=t.toLowerCase());for(var o,s=0,a=e.length;a>s;s++)if(o=e[s]){for(;(o=o.previousSibling)&&1!==o.nodeType;);e[s]=r||o&&o.nodeName.toLowerCase()===t?o||!1:o===t}r&&h.filter(t,e,!0)},">":function(e,t){var i,n="string"==typeof t,r=0,o=e.length;if(n&&!d.test(t)){for(t=t.toLowerCase();o>r;r++)if(i=e[r]){var s=i.parentNode;e[r]=s.nodeName.toLowerCase()===t?s:!1}}else{for(;o>r;r++)i=e[r],i&&(e[r]=n?i.parentNode:i.parentNode===t);n&&h.filter(t,e,!0)}},"":function(t,n,r){var s,a=o++,l=i;"string"!=typeof n||d.test(n)||(n=n.toLowerCase(),s=n,l=e),l("parentNode",n,a,t,s,r)},"~":function(t,n,r){var s,a=o++,l=i;"string"!=typeof n||d.test(n)||(n=n.toLowerCase(),s=n,l=e),l("previousSibling",n,a,t,s,r)}},find:{ID:function(e,t,i){if("undefined"!=typeof t.getElementById&&!i){var n=t.getElementById(e[1]);return n&&n.parentNode?[n]:[]}},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var i=[],n=t.getElementsByName(e[1]),r=0,o=n.length;o>r;r++)n[r].getAttribute("name")===e[1]&&i.push(n[r]);return 0===i.length?null:i}},TAG:function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e[1]):void 0}},preFilter:{CLASS:function(e,t,i,n,r,o){if(e=" "+e[1].replace(c,"")+" ",o)return e;for(var s,a=0;null!=(s=t[a]);a++)s&&(r^(s.className&&(" "+s.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?i||n.push(s):i&&(t[a]=!1));return!1},ID:function(e){return e[1].replace(c,"")},TAG:function(e){return e[1].replace(c,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=o++,e},ATTR:function(e,t,i,n,r,o){var s=e[1]=e[1].replace(c,"");return!o&&f.attrMap[s]&&(e[1]=f.attrMap[s]),e[4]=(e[4]||e[5]||"").replace(c,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,i,r,o){if("not"===e[1]){if(!((n.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var s=h.filter(e[3],t,i,!0^o);return i||r.push.apply(r,s),!1}e[3]=h(e[3],null,null,t)}else if(f.match.POS.test(e[0])||f.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,i){return!!h(i[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),i=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===i&&(t===i||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,i,n){return t===n.length-1},even:function(e,t){return 0===t%2},odd:function(e,t){return 1===t%2},lt:function(e,t,i){return t<i[3]-0},gt:function(e,t,i){return t>i[3]-0},nth:function(e,t,i){return i[3]-0===t},eq:function(e,t,i){return i[3]-0===t}},filter:{PSEUDO:function(e,t,i,n){var r=t[1],o=f.filters[r];if(o)return o(e,i,t,n);if("contains"===r)return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if("not"===r){for(var s=t[3],a=0,l=s.length;l>a;a++)if(s[a]===e)return!1;return!0}h.error(r)},CHILD:function(e,t){var i,n,o,s,a,l,c=t[1],u=e;switch(c){case"only":case"first":for(;u=u.previousSibling;)if(1===u.nodeType)return!1;if("first"===c)return!0;u=e;case"last":for(;u=u.nextSibling;)if(1===u.nodeType)return!1;return!0;case"nth":if(i=t[2],n=t[3],1===i&&0===n)return!0;if(o=t[0],s=e.parentNode,s&&(s[r]!==o||!e.nodeIndex)){for(a=0,u=s.firstChild;u;u=u.nextSibling)1===u.nodeType&&(u.nodeIndex=++a);s[r]=o}return l=e.nodeIndex-n,0===i?0===l:0===l%i&&l/i>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var i=t[1],n=h.attr?h.attr(e,i):f.attrHandle[i]?f.attrHandle[i](e):null!=e[i]?e[i]:e.getAttribute(i),r=n+"",o=t[2],s=t[4];return null==n?"!="===o:!o&&h.attr?null!=n:"="===o?r===s:"*="===o?r.indexOf(s)>=0:"~="===o?(" "+r+" ").indexOf(s)>=0:s?"!="===o?r!==s:"^="===o?0===r.indexOf(s):"$="===o?r.substr(r.length-s.length)===s:"|="===o?r===s||r.substr(0,s.length+1)===s+"-":!1:r&&n!==!1},POS:function(e,t,i,n){var r=t[2],o=f.setFilters[r];return o?o(e,i,t,n):void 0}}},m=f.match.POS,g=function(e,t){return"\\"+(t-0+1)};for(var v in f.match)f.match[v]=new RegExp(f.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source),f.leftMatch[v]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[v].source.replace(/\\(\d+)/g,g));f.match.globalPOS=m;var b=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(j.documentElement.childNodes,0)[0].nodeType}catch(y){b=function(e,t){var i=0,n=t||[];if("[object Array]"===s.call(e))Array.prototype.push.apply(n,e);else if("number"==typeof e.length)for(var r=e.length;r>i;i++)n.push(e[i]);else for(;e[i];i++)n.push(e[i]);return n}}var _,w;j.documentElement.compareDocumentPosition?_=function(e,t){return e===t?(a=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(_=function(e,t){if(e===t)return a=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,n,r=[],o=[],s=e.parentNode,l=t.parentNode,c=s;if(s===l)return w(e,t);if(!s)return-1;if(!l)return 1;for(;c;)r.unshift(c),c=c.parentNode;for(c=l;c;)o.unshift(c),c=c.parentNode;i=r.length,n=o.length;for(var u=0;i>u&&n>u;u++)if(r[u]!==o[u])return w(r[u],o[u]);return u===i?w(e,o[u],-1):w(r[u],t,1)},w=function(e,t,i){if(e===t)return i;for(var n=e.nextSibling;n;){if(n===t)return-1;n=n.nextSibling}return 1}),function(){var e=j.createElement("div"),i="script"+(new Date).getTime(),n=j.documentElement;e.innerHTML="<a name='"+i+"'/>",n.insertBefore(e,n.firstChild),j.getElementById(i)&&(f.find.ID=function(e,i,n){if("undefined"!=typeof i.getElementById&&!n){var r=i.getElementById(e[1]);return r?r.id===e[1]||"undefined"!=typeof r.getAttributeNode&&r.getAttributeNode("id").nodeValue===e[1]?[r]:t:[]}},f.filter.ID=function(e,t){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&i&&i.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=j.createElement("div");e.appendChild(j.createComment("")),e.getElementsByTagName("*").length>0&&(f.find.TAG=function(e,t){var i=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var n=[],r=0;i[r];r++)1===i[r].nodeType&&n.push(i[r]);i=n}return i}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(f.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),j.querySelectorAll&&function(){var e=h,t=j.createElement("div"),i="__sizzle__";if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){h=function(t,n,r,o){if(n=n||j,!o&&!h.isXML(n)){var s=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(s&&(1===n.nodeType||9===n.nodeType)){if(s[1])return b(n.getElementsByTagName(t),r);if(s[2]&&f.find.CLASS&&n.getElementsByClassName)return b(n.getElementsByClassName(s[2]),r)}if(9===n.nodeType){if("body"===t&&n.body)return b([n.body],r);if(s&&s[3]){var a=n.getElementById(s[3]);if(!a||!a.parentNode)return b([],r);if(a.id===s[3])return b([a],r)}try{return b(n.querySelectorAll(t),r)}catch(l){}}else if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){var c=n,u=n.getAttribute("id"),d=u||i,p=n.parentNode,m=/^\s*[+~]/.test(t);u?d=d.replace(/'/g,"\\$&"):n.setAttribute("id",d),m&&p&&(n=n.parentNode);try{if(!m||p)return b(n.querySelectorAll("[id='"+d+"'] "+t),r)}catch(g){}finally{u||c.removeAttribute("id")}}}return e(t,n,r,o)};for(var n in e)h[n]=e[n];t=null}}(),function(){var e=j.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var i=!t.call(j.createElement("div"),"div"),n=!1;try{t.call(j.documentElement,"[test!='']:sizzle")}catch(r){n=!0}h.matchesSelector=function(e,r){if(r=r.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!h.isXML(e))try{if(n||!f.match.PSEUDO.test(r)&&!/!=/.test(r)){var o=t.call(e,r);if(o||!i||e.document&&11!==e.document.nodeType)return o}}catch(s){}return h(r,null,null,[e]).length>0}}}(),function(){var e=j.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(f.order.splice(1,0,"CLASS"),f.find.CLASS=function(e,t,i){return"undefined"==typeof t.getElementsByClassName||i?void 0:t.getElementsByClassName(e[1])},e=null))}(),h.contains=j.documentElement.contains?function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:j.documentElement.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1};var x=function(e,t,i){for(var n,r=[],o="",s=t.nodeType?[t]:t;n=f.match.PSEUDO.exec(e);)o+=n[0],e=e.replace(f.match.PSEUDO,"");e=f.relative[e]?e+"*":e;for(var a=0,l=s.length;l>a;a++)h(e,s[a],r,i);return h.filter(o,r)};h.attr=q.attr,h.selectors.attrMap={},q.find=h,q.expr=h.selectors,q.expr[":"]=q.expr.filters,q.unique=h.uniqueSort,q.text=h.getText,q.isXMLDoc=h.isXML,q.contains=h.contains}();var at=/Until$/,lt=/^(?:parents|prevUntil|prevAll)/,ct=/,/,ut=/^.[^:#\[\.,]*$/,dt=Array.prototype.slice,ht=q.expr.match.globalPOS,pt={children:!0,contents:!0,next:!0,prev:!0};q.fn.extend({find:function(e){var t,i,n=this;if("string"!=typeof e)return q(e).filter(function(){for(t=0,i=n.length;i>t;t++)if(q.contains(n[t],this))return!0});var r,o,s,a=this.pushStack("","find",e);for(t=0,i=this.length;i>t;t++)if(r=a.length,q.find(e,this[t],a),t>0)for(o=r;o<a.length;o++)for(s=0;r>s;s++)if(a[s]===a[o]){a.splice(o--,1);break}return a},has:function(e){var t=q(e);return this.filter(function(){for(var e=0,i=t.length;i>e;e++)if(q.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(c(this,e,!1),"not",e)},filter:function(e){return this.pushStack(c(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?ht.test(e)?q(e,this.context).index(this[0])>=0:q.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var i,n,r=[],o=this[0];if(q.isArray(e)){for(var s=1;o&&o.ownerDocument&&o!==t;){for(i=0;i<e.length;i++)q(o).is(e[i])&&r.push({selector:e[i],elem:o,level:s});o=o.parentNode,s++}return r}var a=ht.test(e)||"string"!=typeof e?q(e,t||this.context):0;for(i=0,n=this.length;n>i;i++)for(o=this[i];o;){if(a?a.index(o)>-1:q.find.matchesSelector(o,e)){r.push(o);break}if(o=o.parentNode,!o||!o.ownerDocument||o===t||11===o.nodeType)break}return r=r.length>1?q.unique(r):r,this.pushStack(r,"closest",e)},index:function(e){return e?"string"==typeof e?q.inArray(this[0],q(e)):q.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?q(e,t):q.makeArray(e&&e.nodeType?[e]:e),n=q.merge(this.get(),i);return this.pushStack(l(i[0])||l(n[0])?n:q.unique(n))},andSelf:function(){return this.add(this.prevObject)}}),q.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return q.dir(e,"parentNode")},parentsUntil:function(e,t,i){return q.dir(e,"parentNode",i)},next:function(e){return q.nth(e,2,"nextSibling")},prev:function(e){return q.nth(e,2,"previousSibling")},nextAll:function(e){return q.dir(e,"nextSibling")},prevAll:function(e){return q.dir(e,"previousSibling")},nextUntil:function(e,t,i){return q.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return q.dir(e,"previousSibling",i)},siblings:function(e){return q.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return q.sibling(e.firstChild)},contents:function(e){return q.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:q.makeArray(e.childNodes)}},function(e,t){q.fn[e]=function(i,n){var r=q.map(this,t,i);return at.test(e)||(n=i),n&&"string"==typeof n&&(r=q.filter(n,r)),r=this.length>1&&!pt[e]?q.unique(r):r,(this.length>1||ct.test(n))&&lt.test(e)&&(r=r.reverse()),this.pushStack(r,e,dt.call(arguments).join(","))}}),q.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?q.find.matchesSelector(t[0],e)?[t[0]]:[]:q.find.matches(e,t)},dir:function(e,i,n){for(var r=[],o=e[i];o&&9!==o.nodeType&&(n===t||1!==o.nodeType||!q(o).is(n));)1===o.nodeType&&r.push(o),o=o[i];return r},nth:function(e,t,i){t=t||1;for(var n=0;e&&(1!==e.nodeType||++n!==t);e=e[i]);return e},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var ft="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",mt=/ jQuery\d+="(?:\d+|null)"/g,gt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,yt=/<tbody/i,_t=/<|&#?\w+;/,wt=/<(?:script|style)/i,xt=/<(?:script|object|embed|option|style)/i,kt=new RegExp("<(?:"+ft+")[\\s/>]","i"),Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,St=/\/(java|ecma)script/i,$t=/^\s*<!(?:\[CDATA\[|\-\-)/,Tt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Et=u(j);Tt.optgroup=Tt.option,Tt.tbody=Tt.tfoot=Tt.colgroup=Tt.caption=Tt.thead,Tt.th=Tt.td,q.support.htmlSerialize||(Tt._default=[1,"div<div>","</div>"]),q.fn.extend({text:function(e){return q.access(this,function(e){return e===t?q.text(this):this.empty().append((this[0]&&this[0].ownerDocument||j).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(q.isFunction(e))return this.each(function(t){q(this).wrapAll(e.call(this,t))});if(this[0]){var t=q(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return q.isFunction(e)?this.each(function(t){q(this).wrapInner(e.call(this,t))}):this.each(function(){var t=q(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=q.isFunction(e);return this.each(function(i){q(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){q.nodeName(this,"body")||q(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=q.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,q.clean(arguments)),e}},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)(!e||q.filter(e,[i]).length)&&(t||1!==i.nodeType||(q.cleanData(i.getElementsByTagName("*")),q.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&q.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return q.clone(this,e,t)})},html:function(e){return q.access(this,function(e){var i=this[0]||{},n=0,r=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(mt,""):null;if(!("string"!=typeof e||wt.test(e)||!q.support.leadingWhitespace&&gt.test(e)||Tt[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;r>n;n++)i=this[n]||{},1===i.nodeType&&(q.cleanData(i.getElementsByTagName("*")),i.innerHTML=e);i=0}catch(o){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return this[0]&&this[0].parentNode?q.isFunction(e)?this.each(function(t){var i=q(this),n=i.html();i.replaceWith(e.call(this,t,n))}):("string"!=typeof e&&(e=q(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;q(this).remove(),t?q(t).before(e):q(i).append(e)})):this.length?this.pushStack(q(q.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,n){var r,o,s,a,l=e[0],c=[];if(!q.support.checkClone&&3===arguments.length&&"string"==typeof l&&Ct.test(l))return this.each(function(){q(this).domManip(e,i,n,!0)});if(q.isFunction(l))return this.each(function(r){var o=q(this);e[0]=l.call(this,r,i?o.html():t),o.domManip(e,i,n)});if(this[0]){if(a=l&&l.parentNode,r=q.support.parentNode&&a&&11===a.nodeType&&a.childNodes.length===this.length?{fragment:a}:q.buildFragment(e,this,c),s=r.fragment,o=1===s.childNodes.length?s=s.firstChild:s.firstChild){i=i&&q.nodeName(o,"tr");for(var u=0,h=this.length,p=h-1;h>u;u++)n.call(i?d(this[u],o):this[u],r.cacheable||h>1&&p>u?q.clone(s,!0,!0):s)}c.length&&q.each(c,function(e,t){t.src?q.ajax({type:"GET",global:!1,url:t.src,async:!1,dataType:"script"}):q.globalEval((t.text||t.textContent||t.innerHTML||"").replace($t,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),q.buildFragment=function(e,t,i){var n,r,o,s,a=e[0];return t&&t[0]&&(s=t[0].ownerDocument||t[0]),s.createDocumentFragment||(s=j),!(1===e.length&&"string"==typeof a&&a.length<512&&s===j&&"<"===a.charAt(0))||xt.test(a)||!q.support.checkClone&&Ct.test(a)||!q.support.html5Clone&&kt.test(a)||(r=!0,o=q.fragments[a],o&&1!==o&&(n=o)),n||(n=s.createDocumentFragment(),q.clean(e,s,n,i)),r&&(q.fragments[a]=o?n:1),{fragment:n,cacheable:r}},q.fragments={},q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){q.fn[e]=function(i){var n=[],r=q(i),o=1===this.length&&this[0].parentNode;if(o&&11===o.nodeType&&1===o.childNodes.length&&1===r.length)return r[t](this[0]),this;for(var s=0,a=r.length;a>s;s++){var l=(s>0?this.clone(!0):this).get();q(r[s])[t](l),n=n.concat(l)}return this.pushStack(n,e,r.selector)}}),q.extend({clone:function(e,t,i){var n,r,o,s=q.support.html5Clone||q.isXMLDoc(e)||!kt.test("<"+e.nodeName+">")?e.cloneNode(!0):v(e);if(!(q.support.noCloneEvent&&q.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||q.isXMLDoc(e)))for(p(e,s),n=f(e),r=f(s),o=0;n[o];++o)r[o]&&p(n[o],r[o]);if(t&&(h(e,s),i))for(n=f(e),r=f(s),o=0;n[o];++o)h(n[o],r[o]);return n=r=null,s},clean:function(e,t,i,n){var r,o,s,a=[];t=t||j,"undefined"==typeof t.createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||j);for(var l,c=0;null!=(l=e[c]);c++)if("number"==typeof l&&(l+=""),l){if("string"==typeof l)if(_t.test(l)){l=l.replace(vt,"<$1></$2>");var d,h=(bt.exec(l)||["",""])[1].toLowerCase(),p=Tt[h]||Tt._default,f=p[0],m=t.createElement("div"),v=Et.childNodes;for(t===j?Et.appendChild(m):u(t).appendChild(m),m.innerHTML=p[1]+l+p[2];f--;)m=m.lastChild;if(!q.support.tbody){var b=yt.test(l),y="table"!==h||b?"<table>"!==p[1]||b?[]:m.childNodes:m.firstChild&&m.firstChild.childNodes;for(s=y.length-1;s>=0;--s)q.nodeName(y[s],"tbody")&&!y[s].childNodes.length&&y[s].parentNode.removeChild(y[s])}!q.support.leadingWhitespace&&gt.test(l)&&m.insertBefore(t.createTextNode(gt.exec(l)[0]),m.firstChild),l=m.childNodes,m&&(m.parentNode.removeChild(m),v.length>0&&(d=v[v.length-1],d&&d.parentNode&&d.parentNode.removeChild(d)))}else l=t.createTextNode(l);var _;if(!q.support.appendChecked)if(l[0]&&"number"==typeof(_=l.length))for(s=0;_>s;s++)g(l[s]);else g(l);l.nodeType?a.push(l):a=q.merge(a,l)}if(i)for(r=function(e){return!e.type||St.test(e.type)},c=0;a[c];c++)if(o=a[c],n&&q.nodeName(o,"script")&&(!o.type||St.test(o.type)))n.push(o.parentNode?o.parentNode.removeChild(o):o);else{if(1===o.nodeType){var w=q.grep(o.getElementsByTagName("script"),r);a.splice.apply(a,[c+1,0].concat(w))}i.appendChild(o)}return a},cleanData:function(e){for(var t,i,n,r=q.cache,o=q.event.special,s=q.support.deleteExpando,a=0;null!=(n=e[a]);a++)if((!n.nodeName||!q.noData[n.nodeName.toLowerCase()])&&(i=n[q.expando])){if(t=r[i],t&&t.events){for(var l in t.events)o[l]?q.event.remove(n,l):q.removeEvent(n,l,t.handle);t.handle&&(t.handle.elem=null)}s?delete n[q.expando]:n.removeAttribute&&n.removeAttribute(q.expando),delete r[i]}}});var Dt,It,At,jt=/alpha\([^)]*\)/i,Mt=/opacity=([^)]*)/,Pt=/([A-Z]|^ms)/g,qt=/^[\-+]?(?:\d*\.)?\d+$/i,Lt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,Ot=/^([\-+])=([\-+.\de]+)/,Rt=/^margin/,zt={position:"absolute",visibility:"hidden",display:"block"},Nt=["Top","Right","Bottom","Left"];q.fn.css=function(e,i){return q.access(this,function(e,i,n){return n!==t?q.style(e,i,n):q.css(e,i)},e,i,arguments.length>1)},q.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Dt(e,"opacity");return""===i?"1":i}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":q.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,a=q.camelCase(i),l=e.style,c=q.cssHooks[a];if(i=q.cssProps[a]||a,n===t)return c&&"get"in c&&(o=c.get(e,!1,r))!==t?o:l[i];if(s=typeof n,"string"===s&&(o=Ot.exec(n))&&(n=+(o[1]+1)*+o[2]+parseFloat(q.css(e,i)),s="number"),!(null==n||"number"===s&&isNaN(n)||("number"!==s||q.cssNumber[a]||(n+="px"),c&&"set"in c&&(n=c.set(e,n))===t)))try{l[i]=n}catch(u){}}},css:function(e,i,n){var r,o;return i=q.camelCase(i),o=q.cssHooks[i],i=q.cssProps[i]||i,"cssFloat"===i&&(i="float"),o&&"get"in o&&(r=o.get(e,!0,n))!==t?r:Dt?Dt(e,i):void 0},swap:function(e,t,i){var n,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];n=i.call(e);for(r in t)e.style[r]=o[r];return n}}),q.curCSS=q.css,j.defaultView&&j.defaultView.getComputedStyle&&(It=function(e,t){var i,n,r,o,s=e.style;return t=t.replace(Pt,"-$1").toLowerCase(),(n=e.ownerDocument.defaultView)&&(r=n.getComputedStyle(e,null))&&(i=r.getPropertyValue(t),""!==i||q.contains(e.ownerDocument.documentElement,e)||(i=q.style(e,t))),!q.support.pixelMargin&&r&&Rt.test(t)&&Lt.test(i)&&(o=s.width,s.width=i,i=r.width,s.width=o),i}),j.documentElement.currentStyle&&(At=function(e,t){var i,n,r,o=e.currentStyle&&e.currentStyle[t],s=e.style;return null==o&&s&&(r=s[t])&&(o=r),Lt.test(o)&&(i=s.left,n=e.runtimeStyle&&e.runtimeStyle.left,n&&(e.runtimeStyle.left=e.currentStyle.left),s.left="fontSize"===t?"1em":o,o=s.pixelLeft+"px",s.left=i,n&&(e.runtimeStyle.left=n)),""===o?"auto":o}),Dt=It||At,q.each(["height","width"],function(e,t){q.cssHooks[t]={get:function(e,i,n){return i?0!==e.offsetWidth?b(e,t,n):q.swap(e,zt,function(){return b(e,t,n)}):void 0},set:function(e,t){return qt.test(t)?t+"px":t}}}),q.support.opacity||(q.cssHooks.opacity={get:function(e,t){return Mt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,r=q.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,t>=1&&""===q.trim(o.replace(jt,""))&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=jt.test(o)?o.replace(jt,r):o+" "+r)}}),q(function(){q.support.reliableMarginRight||(q.cssHooks.marginRight={get:function(e,t){return q.swap(e,{display:"inline-block"},function(){return t?Dt(e,"margin-right"):e.style.marginRight})}})}),q.expr&&q.expr.filters&&(q.expr.filters.hidden=function(e){var t=e.offsetWidth,i=e.offsetHeight;return 0===t&&0===i||!q.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||q.css(e,"display"))},q.expr.filters.visible=function(e){return!q.expr.filters.hidden(e)}),q.each({margin:"",padding:"",border:"Width"},function(e,t){q.cssHooks[e+t]={expand:function(i){var n,r="string"==typeof i?i.split(" "):[i],o={};for(n=0;4>n;n++)o[e+Nt[n]+t]=r[n]||r[n-2]||r[0];return o}}});var Ft,Wt,Ht=/%20/g,Ut=/\[\]$/,Bt=/\r?\n/g,Vt=/#.*$/,Jt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Gt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Kt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Qt=/^(?:GET|HEAD)$/,Xt=/^\/\//,Yt=/\?/,Zt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ei=/^(?:select|textarea)/i,ti=/\s+/,ii=/([?&])_=[^&]*/,ni=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,ri=q.fn.load,oi={},si={},ai=["*/"]+["*"];try{Ft=P.href}catch(li){Ft=j.createElement("a"),Ft.href="",Ft=Ft.href}Wt=ni.exec(Ft.toLowerCase())||[],q.fn.extend({load:function(e,i,n){if("string"!=typeof e&&ri)return ri.apply(this,arguments);if(!this.length)return this;var r=e.indexOf(" ");if(r>=0){var o=e.slice(r,e.length);e=e.slice(0,r)}var s="GET";i&&(q.isFunction(i)?(n=i,i=t):"object"==typeof i&&(i=q.param(i,q.ajaxSettings.traditional),s="POST"));var a=this;return q.ajax({url:e,type:s,dataType:"html",data:i,complete:function(e,t,i){i=e.responseText,e.isResolved()&&(e.done(function(e){i=e}),a.html(o?q("<div>").append(i.replace(Zt,"")).find(o):i)),n&&a.each(n,[i,t,e])}}),this},serialize:function(){return q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?q.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ei.test(this.nodeName)||Gt.test(this.type))}).map(function(e,t){var i=q(this).val();return null==i?null:q.isArray(i)?q.map(i,function(e){return{name:t.name,value:e.replace(Bt,"\r\n")}}):{name:t.name,value:i.replace(Bt,"\r\n")}}).get()}}),q.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){q.fn[t]=function(e){return this.on(t,e)}}),q.each(["get","post"],function(e,i){q[i]=function(e,n,r,o){return q.isFunction(n)&&(o=o||r,r=n,n=t),q.ajax({type:i,url:e,data:n,success:r,dataType:o})}}),q.extend({getScript:function(e,i){return q.get(e,t,i,"script")},getJSON:function(e,t,i){return q.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?w(e,q.ajaxSettings):(t=e,e=q.ajaxSettings),w(e,t),e},ajaxSettings:{url:Ft,isLocal:Kt.test(Wt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ai},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":q.parseJSON,"text xml":q.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:y(oi),ajaxTransport:y(si),ajax:function(e,i){function n(e,i,n,s){if(2!==w){w=2,l&&clearTimeout(l),a=t,o=s||"",x.readyState=e>0?4:0;var c,d,b,y,_,S=i,$=n?k(h,x,n):t;if(e>=200&&300>e||304===e)if(h.ifModified&&((y=x.getResponseHeader("Last-Modified"))&&(q.lastModified[r]=y),(_=x.getResponseHeader("Etag"))&&(q.etag[r]=_)),304===e)S="notmodified",c=!0;else try{d=C(h,$),S="success",c=!0}catch(T){S="parsererror",b=T}else b=S,(!S||e)&&(S="error",0>e&&(e=0));x.status=e,x.statusText=""+(i||S),c?m.resolveWith(p,[d,S,x]):m.rejectWith(p,[x,S,b]),x.statusCode(v),v=t,u&&f.trigger("ajax"+(c?"Success":"Error"),[x,h,c?d:b]),g.fireWith(p,[x,S]),u&&(f.trigger("ajaxComplete",[x,h]),--q.active||q.event.trigger("ajaxStop"))}}"object"==typeof e&&(i=e,e=t),i=i||{};var r,o,s,a,l,c,u,d,h=q.ajaxSetup({},i),p=h.context||h,f=p!==h&&(p.nodeType||p instanceof q)?q(p):q.event,m=q.Deferred(),g=q.Callbacks("once memory"),v=h.statusCode||{},b={},y={},w=0,x={readyState:0,setRequestHeader:function(e,t){if(!w){var i=e.toLowerCase();e=y[i]=y[i]||e,b[e]=t}return this},getAllResponseHeaders:function(){return 2===w?o:null},getResponseHeader:function(e){var i;if(2===w){if(!s)for(s={};i=Jt.exec(o);)s[i[1].toLowerCase()]=i[2];i=s[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return w||(h.mimeType=e),this},abort:function(e){return e=e||"abort",a&&a.abort(e),n(0,e),this}};if(m.promise(x),x.success=x.done,x.error=x.fail,x.complete=g.add,x.statusCode=function(e){if(e){var t;if(2>w)for(t in e)v[t]=[v[t],e[t]];else t=e[x.status],x.then(t,t)}return this},h.url=((e||h.url)+"").replace(Vt,"").replace(Xt,Wt[1]+"//"),h.dataTypes=q.trim(h.dataType||"*").toLowerCase().split(ti),null==h.crossDomain&&(c=ni.exec(h.url.toLowerCase()),h.crossDomain=!(!c||c[1]==Wt[1]&&c[2]==Wt[2]&&(c[3]||("http:"===c[1]?80:443))==(Wt[3]||("http:"===Wt[1]?80:443)))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=q.param(h.data,h.traditional)),_(oi,h,i,x),2===w)return!1;if(u=h.global,h.type=h.type.toUpperCase(),h.hasContent=!Qt.test(h.type),u&&0===q.active++&&q.event.trigger("ajaxStart"),!h.hasContent&&(h.data&&(h.url+=(Yt.test(h.url)?"&":"?")+h.data,delete h.data),r=h.url,h.cache===!1)){var S=q.now(),$=h.url.replace(ii,"$1_="+S);h.url=$+($===h.url?(Yt.test(h.url)?"&":"?")+"_="+S:"")}(h.data&&h.hasContent&&h.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(r=r||h.url,q.lastModified[r]&&x.setRequestHeader("If-Modified-Since",q.lastModified[r]),q.etag[r]&&x.setRequestHeader("If-None-Match",q.etag[r])),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+ai+"; q=0.01":""):h.accepts["*"]);for(d in h.headers)x.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(h.beforeSend.call(p,x,h)===!1||2===w))return x.abort(),!1;for(d in{success:1,error:1,complete:1})x[d](h[d]);if(a=_(si,h,i,x)){x.readyState=1,u&&f.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){x.abort("timeout")
},h.timeout));try{w=1,a.send(b,n)}catch(T){if(!(2>w))throw T;n(-1,T)}}else n(-1,"No Transport");return x},param:function(e,i){var n=[],r=function(e,t){t=q.isFunction(t)?t():t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=q.ajaxSettings.traditional),q.isArray(e)||e.jquery&&!q.isPlainObject(e))q.each(e,function(){r(this.name,this.value)});else for(var o in e)x(o,e[o],i,r);return n.join("&").replace(Ht,"+")}}),q.extend({active:0,lastModified:{},etag:{}});var ci=q.now(),ui=/(\=)\?(&|$)|\?\?/i;q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return q.expando+"_"+ci++}}),q.ajaxPrefilter("json jsonp",function(t,i,n){var r="string"==typeof t.data&&/^application\/x\-www\-form\-urlencoded/.test(t.contentType);if("jsonp"===t.dataTypes[0]||t.jsonp!==!1&&(ui.test(t.url)||r&&ui.test(t.data))){var o,s=t.jsonpCallback=q.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[s],l=t.url,c=t.data,u="$1"+s+"$2";return t.jsonp!==!1&&(l=l.replace(ui,u),t.url===l&&(r&&(c=c.replace(ui,u)),t.data===c&&(l+=(/\?/.test(l)?"&":"?")+t.jsonp+"="+s))),t.url=l,t.data=c,e[s]=function(e){o=[e]},n.always(function(){e[s]=a,o&&q.isFunction(a)&&e[s](o[0])}),t.converters["script json"]=function(){return o||q.error(s+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return q.globalEval(e),e}}}),q.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),q.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=j.head||j.getElementsByTagName("head")[0]||j.documentElement;return{send:function(r,o){i=j.createElement("script"),i.async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,r){(r||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=t,r||o(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var di,hi=e.ActiveXObject?function(){for(var e in di)di[e](0,1)}:!1,pi=0;q.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&S()||$()}:S,function(e){q.extend(q.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(q.ajaxSettings.xhr()),q.support.ajax&&q.ajaxTransport(function(i){if(!i.crossDomain||q.support.cors){var n;return{send:function(r,o){var s,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(a in r)l.setRequestHeader(a,r[a])}catch(c){}l.send(i.hasContent&&i.data||null),n=function(e,r){var a,c,u,d,h;try{if(n&&(r||4===l.readyState))if(n=t,s&&(l.onreadystatechange=q.noop,hi&&delete di[s]),r)4!==l.readyState&&l.abort();else{a=l.status,u=l.getAllResponseHeaders(),d={},h=l.responseXML,h&&h.documentElement&&(d.xml=h);try{d.text=l.responseText}catch(e){}try{c=l.statusText}catch(p){c=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=d.text?200:404}}catch(f){r||o(-1,f)}d&&o(a,c,d,u)},i.async&&4!==l.readyState?(s=++pi,hi&&(di||(di={},q(e).unload(hi)),di[s]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}});var fi,mi,gi,vi,bi={},yi=/^(?:toggle|show|hide)$/,_i=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,wi=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];q.fn.extend({show:function(e,t,i){var n,r;if(e||0===e)return this.animate(D("show",3),e,t,i);for(var o=0,s=this.length;s>o;o++)n=this[o],n.style&&(r=n.style.display,q._data(n,"olddisplay")||"none"!==r||(r=n.style.display=""),(""===r&&"none"===q.css(n,"display")||!q.contains(n.ownerDocument.documentElement,n))&&q._data(n,"olddisplay",I(n.nodeName)));for(o=0;s>o;o++)n=this[o],n.style&&(r=n.style.display,(""===r||"none"===r)&&(n.style.display=q._data(n,"olddisplay")||""));return this},hide:function(e,t,i){if(e||0===e)return this.animate(D("hide",3),e,t,i);for(var n,r,o=0,s=this.length;s>o;o++)n=this[o],n.style&&(r=q.css(n,"display"),"none"===r||q._data(n,"olddisplay")||q._data(n,"olddisplay",r));for(o=0;s>o;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:q.fn.toggle,toggle:function(e,t,i){var n="boolean"==typeof e;return q.isFunction(e)&&q.isFunction(t)?this._toggle.apply(this,arguments):null==e||n?this.each(function(){var t=n?e:q(this).is(":hidden");q(this)[t?"show":"hide"]()}):this.animate(D("toggle",3),e,t,i),this},fadeTo:function(e,t,i,n){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){function r(){o.queue===!1&&q._mark(this);var t,i,n,r,s,a,l,c,u,d,h,p=q.extend({},o),f=1===this.nodeType,m=f&&q(this).is(":hidden");p.animatedProperties={};for(n in e)if(t=q.camelCase(n),n!==t&&(e[t]=e[n],delete e[n]),(s=q.cssHooks[t])&&"expand"in s){a=s.expand(e[t]),delete e[t];for(n in a)n in e||(e[n]=a[n])}for(t in e){if(i=e[t],q.isArray(i)?(p.animatedProperties[t]=i[1],i=e[t]=i[0]):p.animatedProperties[t]=p.specialEasing&&p.specialEasing[t]||p.easing||"swing","hide"===i&&m||"show"===i&&!m)return p.complete.call(this);!f||"height"!==t&&"width"!==t||(p.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===q.css(this,"display")&&"none"===q.css(this,"float")&&(q.support.inlineBlockNeedsLayout&&"inline"!==I(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=p.overflow&&(this.style.overflow="hidden");for(n in e)r=new q.fx(this,p,n),i=e[n],yi.test(i)?(h=q._data(this,"toggle"+n)||("toggle"===i?m?"show":"hide":0),h?(q._data(this,"toggle"+n,"show"===h?"hide":"show"),r[h]()):r[i]()):(l=_i.exec(i),c=r.cur(),l?(u=parseFloat(l[2]),d=l[3]||(q.cssNumber[n]?"":"px"),"px"!==d&&(q.style(this,n,(u||1)+d),c=(u||1)/r.cur()*c,q.style(this,n,c+d)),l[1]&&(u=("-="===l[1]?-1:1)*u+c),r.custom(c,u,d)):r.custom(c,i,""));return!0}var o=q.speed(t,i,n);return q.isEmptyObject(e)?this.each(o.complete,[!1]):(e=q.extend({},e),o.queue===!1?this.each(r):this.queue(o.queue,r))},stop:function(e,i,n){return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,i){var r=t[i];q.removeData(e,i,!0),r.stop(n)}var i,r=!1,o=q.timers,s=q._data(this);if(n||q._unmark(!0,this),null==e)for(i in s)s[i]&&s[i].stop&&i.indexOf(".run")===i.length-4&&t(this,s,i);else s[i=e+".run"]&&s[i].stop&&t(this,s,i);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(n?o[i](!0):o[i].saveState(),r=!0,o.splice(i,1));n&&r||q.dequeue(this,e)})}}),q.each({slideDown:D("show",1),slideUp:D("hide",1),slideToggle:D("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){q.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),q.extend({speed:function(e,t,i){var n=e&&"object"==typeof e?q.extend({},e):{complete:i||!i&&t||q.isFunction(e)&&e,duration:e,easing:i&&t||t&&!q.isFunction(t)&&t};return n.duration=q.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in q.fx.speeds?q.fx.speeds[n.duration]:q.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(e){q.isFunction(n.old)&&n.old.call(this),n.queue?q.dequeue(this,n.queue):e!==!1&&q._unmark(this)},n},easing:{linear:function(e){return e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5}},timers:[],fx:function(e,t,i){this.options=t,this.elem=e,this.prop=i,t.orig=t.orig||{}}}),q.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(q.fx.step[this.prop]||q.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=q.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,i,n){function r(e){return o.step(e)}var o=this,s=q.fx;this.startTime=vi||T(),this.end=i,this.now=this.start=e,this.pos=this.state=0,this.unit=n||this.unit||(q.cssNumber[this.prop]?"":"px"),r.queue=this.options.queue,r.elem=this.elem,r.saveState=function(){q._data(o.elem,"fxshow"+o.prop)===t&&(o.options.hide?q._data(o.elem,"fxshow"+o.prop,o.start):o.options.show&&q._data(o.elem,"fxshow"+o.prop,o.end))},r()&&q.timers.push(r)&&!gi&&(gi=setInterval(s.tick,s.interval))},show:function(){var e=q._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||q.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),q(this.elem).show()},hide:function(){this.options.orig[this.prop]=q._data(this.elem,"fxshow"+this.prop)||q.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,i,n,r=vi||T(),o=!0,s=this.elem,a=this.options;if(e||r>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(o=!1);if(o){if(null==a.overflow||q.support.shrinkWrapBlocks||q.each(["","X","Y"],function(e,t){s.style["overflow"+t]=a.overflow[e]}),a.hide&&q(s).hide(),a.hide||a.show)for(t in a.animatedProperties)q.style(s,t,a.orig[t]),q.removeData(s,"fxshow"+t,!0),q.removeData(s,"toggle"+t,!0);n=a.complete,n&&(a.complete=!1,n.call(s))}return!1}return 1/0==a.duration?this.now=r:(i=r-this.startTime,this.state=i/a.duration,this.pos=q.easing[a.animatedProperties[this.prop]](this.state,i,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},q.extend(q.fx,{tick:function(){for(var e,t=q.timers,i=0;i<t.length;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||q.fx.stop()},interval:13,stop:function(){clearInterval(gi),gi=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){q.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),q.each(wi.concat.apply([],wi),function(e,t){t.indexOf("margin")&&(q.fx.step[t]=function(e){q.style(e.elem,t,Math.max(0,e.now)+e.unit)})}),q.expr&&q.expr.filters&&(q.expr.filters.animated=function(e){return q.grep(q.timers,function(t){return e===t.elem}).length});var xi,ki=/^t(?:able|d|h)$/i,Ci=/^(?:body|html)$/i;xi="getBoundingClientRect"in j.documentElement?function(e,t,i,n){try{n=e.getBoundingClientRect()}catch(r){}if(!n||!q.contains(i,e))return n?{top:n.top,left:n.left}:{top:0,left:0};var o=t.body,s=A(t),a=i.clientTop||o.clientTop||0,l=i.clientLeft||o.clientLeft||0,c=s.pageYOffset||q.support.boxModel&&i.scrollTop||o.scrollTop,u=s.pageXOffset||q.support.boxModel&&i.scrollLeft||o.scrollLeft,d=n.top+c-a,h=n.left+u-l;return{top:d,left:h}}:function(e,t,i){for(var n,r=e.offsetParent,o=e,s=t.body,a=t.defaultView,l=a?a.getComputedStyle(e,null):e.currentStyle,c=e.offsetTop,u=e.offsetLeft;(e=e.parentNode)&&e!==s&&e!==i&&(!q.support.fixedPosition||"fixed"!==l.position);)n=a?a.getComputedStyle(e,null):e.currentStyle,c-=e.scrollTop,u-=e.scrollLeft,e===r&&(c+=e.offsetTop,u+=e.offsetLeft,!q.support.doesNotAddBorder||q.support.doesAddBorderForTableAndCells&&ki.test(e.nodeName)||(c+=parseFloat(n.borderTopWidth)||0,u+=parseFloat(n.borderLeftWidth)||0),o=r,r=e.offsetParent),q.support.subtractsBorderForOverflowNotVisible&&"visible"!==n.overflow&&(c+=parseFloat(n.borderTopWidth)||0,u+=parseFloat(n.borderLeftWidth)||0),l=n;return("relative"===l.position||"static"===l.position)&&(c+=s.offsetTop,u+=s.offsetLeft),q.support.fixedPosition&&"fixed"===l.position&&(c+=Math.max(i.scrollTop,s.scrollTop),u+=Math.max(i.scrollLeft,s.scrollLeft)),{top:c,left:u}},q.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){q.offset.setOffset(this,e,t)});var i=this[0],n=i&&i.ownerDocument;return n?i===n.body?q.offset.bodyOffset(i):xi(i,n,n.documentElement):null},q.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return q.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(q.css(e,"marginTop"))||0,i+=parseFloat(q.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var n=q.css(e,"position");"static"===n&&(e.style.position="relative");var r,o,s=q(e),a=s.offset(),l=q.css(e,"top"),c=q.css(e,"left"),u=("absolute"===n||"fixed"===n)&&q.inArray("auto",[l,c])>-1,d={},h={};u?(h=s.position(),r=h.top,o=h.left):(r=parseFloat(l)||0,o=parseFloat(c)||0),q.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(d.top=t.top-a.top+r),null!=t.left&&(d.left=t.left-a.left+o),"using"in t?t.using.call(e,d):s.css(d)}},q.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),i=this.offset(),n=Ci.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(q.css(e,"marginTop"))||0,i.left-=parseFloat(q.css(e,"marginLeft"))||0,n.top+=parseFloat(q.css(t[0],"borderTopWidth"))||0,n.left+=parseFloat(q.css(t[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||j.body;e&&!Ci.test(e.nodeName)&&"static"===q.css(e,"position");)e=e.offsetParent;return e})}}),q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);q.fn[e]=function(r){return q.access(this,function(e,r,o){var s=A(e);return o===t?s?i in s?s[i]:q.support.boxModel&&s.document.documentElement[r]||s.document.body[r]:e[r]:(s?s.scrollTo(n?q(s).scrollLeft():o,n?o:q(s).scrollTop()):e[r]=o,void 0)},e,r,arguments.length,null)}}),q.each({Height:"height",Width:"width"},function(e,i){var n="client"+e,r="scroll"+e,o="offset"+e;q.fn["inner"+e]=function(){var e=this[0];return e?e.style?parseFloat(q.css(e,i,"padding")):this[i]():null},q.fn["outer"+e]=function(e){var t=this[0];return t?t.style?parseFloat(q.css(t,i,e?"margin":"border")):this[i]():null},q.fn[i]=function(e){return q.access(this,function(e,i,s){var a,l,c,u;return q.isWindow(e)?(a=e.document,l=a.documentElement[n],q.support.boxModel&&l||a.body&&a.body[n]||l):9===e.nodeType?(a=e.documentElement,a[n]>=a[r]?a[n]:Math.max(e.body[r],a[r],e.body[o],a[o])):s===t?(c=q.css(e,i),u=parseFloat(c),q.isNumeric(u)?u:c):(q(e).css(i,s),void 0)},i,e,arguments.length,null)}}),e.jQuery=e.$=q,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return q})}(window),function(){var e=this,t=e._,i={},n=Array.prototype,r=Object.prototype,o=Function.prototype,s=n.push,a=n.slice,l=n.concat,c=r.toString,u=r.hasOwnProperty,d=n.forEach,h=n.map,p=n.reduce,f=n.reduceRight,m=n.filter,g=n.every,v=n.some,b=n.indexOf,y=n.lastIndexOf,_=Array.isArray,w=Object.keys,x=o.bind,k=function(e){return e instanceof k?e:this instanceof k?(this._wrapped=e,void 0):new k(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):e._=k,k.VERSION="1.5.2";var C=k.each=k.forEach=function(e,t,n){if(null!=e)if(d&&e.forEach===d)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,o=e.length;o>r;r++)if(t.call(n,e[r],r,e)===i)return}else for(var s=k.keys(e),r=0,o=s.length;o>r;r++)if(t.call(n,e[s[r]],s[r],e)===i)return};k.map=k.collect=function(e,t,i){var n=[];return null==e?n:h&&e.map===h?e.map(t,i):(C(e,function(e,r,o){n.push(t.call(i,e,r,o))}),n)};var S="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,i,n){var r=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return n&&(t=k.bind(t,n)),r?e.reduce(t,i):e.reduce(t);if(C(e,function(e,o,s){r?i=t.call(n,i,e,o,s):(i=e,r=!0)}),!r)throw new TypeError(S);return i},k.reduceRight=k.foldr=function(e,t,i,n){var r=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return n&&(t=k.bind(t,n)),r?e.reduceRight(t,i):e.reduceRight(t);var o=e.length;if(o!==+o){var s=k.keys(e);o=s.length}if(C(e,function(a,l,c){l=s?s[--o]:--o,r?i=t.call(n,i,e[l],l,c):(i=e[l],r=!0)}),!r)throw new TypeError(S);return i},k.find=k.detect=function(e,t,i){var n;return $(e,function(e,r,o){return t.call(i,e,r,o)?(n=e,!0):void 0}),n},k.filter=k.select=function(e,t,i){var n=[];return null==e?n:m&&e.filter===m?e.filter(t,i):(C(e,function(e,r,o){t.call(i,e,r,o)&&n.push(e)}),n)},k.reject=function(e,t,i){return k.filter(e,function(e,n,r){return!t.call(i,e,n,r)},i)},k.every=k.all=function(e,t,n){t||(t=k.identity);var r=!0;return null==e?r:g&&e.every===g?e.every(t,n):(C(e,function(e,o,s){return(r=r&&t.call(n,e,o,s))?void 0:i}),!!r)};var $=k.some=k.any=function(e,t,n){t||(t=k.identity);var r=!1;return null==e?r:v&&e.some===v?e.some(t,n):(C(e,function(e,o,s){return r||(r=t.call(n,e,o,s))?i:void 0}),!!r)};k.contains=k.include=function(e,t){return null==e?!1:b&&e.indexOf===b?-1!=e.indexOf(t):$(e,function(e){return e===t})},k.invoke=function(e,t){var i=a.call(arguments,2),n=k.isFunction(t);return k.map(e,function(e){return(n?t:e[t]).apply(e,i)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.where=function(e,t,i){return k.isEmpty(t)?i?void 0:[]:k[i?"find":"filter"](e,function(e){for(var i in t)if(t[i]!==e[i])return!1;return!0})},k.findWhere=function(e,t){return k.where(e,t,!0)},k.max=function(e,t,i){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&k.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return C(e,function(e,r,o){var s=t?t.call(i,e,r,o):e;s>n.computed&&(n={value:e,computed:s})}),n.value},k.min=function(e,t,i){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&k.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return C(e,function(e,r,o){var s=t?t.call(i,e,r,o):e;s<n.computed&&(n={value:e,computed:s})}),n.value},k.shuffle=function(e){var t,i=0,n=[];return C(e,function(e){t=k.random(i++),n[i-1]=n[t],n[t]=e}),n},k.sample=function(e,t,i){return arguments.length<2||i?e[k.random(e.length-1)]:k.shuffle(e).slice(0,Math.max(0,t))};var T=function(e){return k.isFunction(e)?e:function(t){return t[e]}};k.sortBy=function(e,t,i){var n=T(t);return k.pluck(k.map(e,function(e,t,r){return{value:e,index:t,criteria:n.call(i,e,t,r)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var E=function(e){return function(t,i,n){var r={},o=null==i?k.identity:T(i);return C(t,function(i,s){var a=o.call(n,i,s,t);e(r,a,i)}),r}};k.groupBy=E(function(e,t,i){(k.has(e,t)?e[t]:e[t]=[]).push(i)}),k.indexBy=E(function(e,t,i){e[t]=i}),k.countBy=E(function(e,t){k.has(e,t)?e[t]++:e[t]=1}),k.sortedIndex=function(e,t,i,n){i=null==i?k.identity:T(i);for(var r=i.call(n,t),o=0,s=e.length;s>o;){var a=o+s>>>1;i.call(n,e[a])<r?o=a+1:s=a}return o},k.toArray=function(e){return e?k.isArray(e)?a.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:a.call(e,0,t)},k.initial=function(e,t,i){return a.call(e,0,e.length-(null==t||i?1:t))},k.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,i){return a.call(e,null==t||i?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var D=function(e,t,i){return t&&k.every(e,k.isArray)?l.apply(i,e):(C(e,function(e){k.isArray(e)||k.isArguments(e)?t?s.apply(i,e):D(e,t,i):i.push(e)}),i)};k.flatten=function(e,t){return D(e,t,[])},k.without=function(e){return k.difference(e,a.call(arguments,1))},k.uniq=k.unique=function(e,t,i,n){k.isFunction(t)&&(n=i,i=t,t=!1);var r=i?k.map(e,i,n):e,o=[],s=[];return C(r,function(i,n){(t?n&&s[s.length-1]===i:k.contains(s,i))||(s.push(i),o.push(e[n]))}),o},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(e){var t=a.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.indexOf(t,e)>=0})})},k.difference=function(e){var t=l.apply(n,a.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=k.max(k.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=k.pluck(arguments,""+i);return t},k.object=function(e,t){if(null==e)return{};for(var i={},n=0,r=e.length;r>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},k.indexOf=function(e,t,i){if(null==e)return-1;var n=0,r=e.length;if(i){if("number"!=typeof i)return n=k.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,r+i):i}if(b&&e.indexOf===b)return e.indexOf(t,i);for(;r>n;n++)if(e[n]===t)return n;return-1},k.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(y&&e.lastIndexOf===y)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var r=n?i:e.length;r--;)if(e[r]===t)return r;return-1},k.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),r=0,o=new Array(n);n>r;)o[r++]=e,e+=i;return o};var I=function(){};k.bind=function(e,t){var i,n;if(x&&e.bind===x)return x.apply(e,a.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(a.call(arguments)));I.prototype=e.prototype;var r=new I;I.prototype=null;var o=e.apply(r,i.concat(a.call(arguments)));return Object(o)===o?o:r}},k.partial=function(e){var t=a.call(arguments,1);return function(){return e.apply(this,t.concat(a.call(arguments)))}},k.bindAll=function(e){var t=a.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return C(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var i={};return t||(t=k.identity),function(){var n=t.apply(this,arguments);return k.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},k.delay=function(e,t){var i=a.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(a.call(arguments,1)))},k.throttle=function(e,t,i){var n,r,o,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:new Date,s=null,o=e.apply(n,r)};return function(){var c=new Date;a||i.leading!==!1||(a=c);var u=t-(c-a);return n=this,r=arguments,0>=u?(clearTimeout(s),s=null,a=c,o=e.apply(n,r)):s||i.trailing===!1||(s=setTimeout(l,u)),o}},k.debounce=function(e,t,i){var n,r,o,s,a;return function(){o=this,r=arguments,s=new Date;var l=function(){var c=new Date-s;t>c?n=setTimeout(l,t-c):(n=null,i||(a=e.apply(o,r)))},c=i&&!n;return n||(n=setTimeout(l,t)),c&&(a=e.apply(o,r)),a}},k.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return function(){var i=[e];return s.apply(i,arguments),t.apply(this,i)}},k.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},k.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},k.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)k.has(e,i)&&t.push(i);return t},k.values=function(e){for(var t=k.keys(e),i=t.length,n=new Array(i),r=0;i>r;r++)n[r]=e[t[r]];return n},k.pairs=function(e){for(var t=k.keys(e),i=t.length,n=new Array(i),r=0;i>r;r++)n[r]=[t[r],e[t[r]]];return n},k.invert=function(e){for(var t={},i=k.keys(e),n=0,r=i.length;r>n;n++)t[e[i[n]]]=i[n];return t},k.functions=k.methods=function(e){var t=[];for(var i in e)k.isFunction(e[i])&&t.push(i);return t.sort()},k.extend=function(e){return C(a.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},k.pick=function(e){var t={},i=l.apply(n,a.call(arguments,1));return C(i,function(i){i in e&&(t[i]=e[i])}),t},k.omit=function(e){var t={},i=l.apply(n,a.call(arguments,1));for(var r in e)k.contains(i,r)||(t[r]=e[r]);return t},k.defaults=function(e){return C(a.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var A=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var r=c.call(e);if(r!=c.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=i.length;o--;)if(i[o]==e)return n[o]==t;var s=e.constructor,a=t.constructor;if(s!==a&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(a)&&a instanceof a))return!1;i.push(e),n.push(t);var l=0,u=!0;if("[object Array]"==r){if(l=e.length,u=l==t.length)for(;l--&&(u=A(e[l],t[l],i,n)););}else{for(var d in e)if(k.has(e,d)&&(l++,!(u=k.has(t,d)&&A(e[d],t[d],i,n))))break;if(u){for(d in t)if(k.has(t,d)&&!l--)break;u=!l}}return i.pop(),n.pop(),u};k.isEqual=function(e,t){return A(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=_||function(e){return"[object Array]"==c.call(e)},k.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return u.call(e,t)},k.noConflict=function(){return e._=t,this},k.identity=function(e){return e},k.times=function(e,t,i){for(var n=Array(Math.max(0,e)),r=0;e>r;r++)n[r]=t.call(i,r);return n},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var j={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};j.unescape=k.invert(j.escape);var M={escape:new RegExp("["+k.keys(j.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(j.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(M[e],function(t){return j[e][t]})}}),k.result=function(e,t){if(null==e)return void 0;var i=e[t];return k.isFunction(i)?i.call(e):i},k.mixin=function(e){C(k.functions(e),function(t){var i=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),R.call(this,i.apply(k,e))}})};var P=0;k.uniqueId=function(e){var t=++P+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,i){var n;i=k.defaults({},i,k.templateSettings);var r=new RegExp([(i.escape||q).source,(i.interpolate||q).source,(i.evaluate||q).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(r,function(t,i,n,r,a){return s+=e.slice(o,a).replace(O,function(e){return"\\"+L[e]}),i&&(s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+t.length,t}),s+="';\n",i.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(i.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(t)return n(t,k);var l=function(e){return n.call(this,e,k)};return l.source="function("+(i.variable||"obj")+"){\n"+s+"}",l},k.chain=function(e){return k(e).chain()};var R=function(e){return this._chain?k(e).chain():e};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];k.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],R.call(this,i)}}),C(["concat","join","slice"],function(e){var t=n[e];k.prototype[e]=function(){return R.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t;return t||e._}}(this)),function(e,t){function i(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.8.11",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,r,o=e(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(i,n){function r(t,i,n,r){return e.each(o,function(){i-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,n&&(i-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),r&&(i-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(s,r(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(s,r(this,t,!0,i)+"px")})}}),e.extend(e.expr[":"],{data:function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){var n=t.nodeName.toLowerCase(),r=e.attr(t,"tabindex");if("area"===n){var o,s=t.parentNode,a=s.name;return t.href&&a&&"map"===s.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&i(o)):!1}return(/input|select|textarea|button|object/.test(n)?!t.disabled:"a"==n?t.href||!isNaN(r):!isNaN(r))&&i(t)},tabbable:function(t){var i=e.attr(t,"tabindex");return(isNaN(i)||i>=0)&&e(t).is(":focusable")}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"
}),e.extend(e.ui,{plugin:{add:function(t,i,n){var r=e.ui[t].prototype;for(var o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(e,t,i){var n=e.plugins[t];if(n&&e.element[0].parentNode)for(var r=0;r<n.length;r++)e.options[n[r][0]]&&n[r][1].apply(e.element,i)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",r=!1;return t[n]>0?!0:(t[n]=1,r=t[n]>0,t[n]=0,r)},isOverAxis:function(e,t,i){return e>t&&t+i>e},isOver:function(t,i,n,r,o,s){return e.ui.isOverAxis(t,n,o)&&e.ui.isOverAxis(i,r,s)}}))}(jQuery),function(e,t){if(e.cleanData){var i=e.cleanData;e.cleanData=function(t){for(var n,r=0;null!=(n=t[r]);r++)e(n).triggerHandler("remove");i(t)}}else{var n=e.fn.remove;e.fn.remove=function(t,i){return this.each(function(){return i||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){e(this).triggerHandler("remove")}),n.call(e(this),t,i)})}}e.widget=function(t,i,n){var r,o=t.split(".")[0];t=t.split(".")[1],r=o+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][r]=function(i){return!!e.data(i,t)},e[o]=e[o]||{},e[o][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var s=new i;s.options=e.extend(!0,{},s.options),e[o][t].prototype=e.extend(!0,s,{namespace:o,widgetName:t,widgetEventPrefix:e[o][t].prototype.widgetEventPrefix||t,widgetBaseClass:r},n),e.widget.bridge(t,e[o][t])},e.widget.bridge=function(i,n){e.fn[i]=function(r){var o="string"==typeof r,s=Array.prototype.slice.call(arguments,1),a=this;return r=!o&&s.length?e.extend.apply(null,[!0,r].concat(s)):r,o&&"_"===r.charAt(0)?a:(o?this.each(function(){var n=e.data(this,i),o=n&&e.isFunction(n[r])?n[r].apply(n,s):n;return o!==n&&o!==t?(a=o,!1):void 0}):this.each(function(){var t=e.data(this,i);t?t.option(r||{})._init():e.data(this,i,new n(r,this))}),a)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,i){e.data(i,this.widgetName,this),this.element=e(i),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(i,n){var r=i;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof i){if(n===t)return this.options[i];r={},r[i]=n}return this._setOptions(r),this},_setOptions:function(t){var i=this;return e.each(t,function(e,t){i._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,i,n){var r=this.options[t];if(i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n=n||{},i.originalEvent)for(var o,s=e.event.props.length;s;)o=e.event.props[--s],i[o]=i.originalEvent[o];return this.element.trigger(i,n),!(e.isFunction(r)&&r.call(this.element[0],i,n)===!1||i.isDefaultPrevented())}}}(jQuery),function(e){e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){if(t.originalEvent=t.originalEvent||{},!t.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,n=1==t.which,r="string"==typeof this.options.cancel?e(t.target).parents().add(t.target).filter(this.options.cancel).length:!1;return n&&!r&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),t.originalEvent.mouseHandled=!0,!0)):!0}},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?!0:!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;if(e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var n=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone():this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]==this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[("document"==t.containment?0:e(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,("document"==t.containment?0:e(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var i=e(t.containment)[0];if(!i)return;var n=e(t.containment).offset(),r="hidden"!=e(i).css("overflow");this.containment=[n.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0),n.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0),n.left+(r?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,n.top+(r?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom]}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*n),left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*n)}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName),o=t.pageX,s=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),i.grid)){var a=this.originalPageY+Math.round((s-this.originalPageY)/i.grid[1])*i.grid[1];s=this.containment?a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3]?a-this.offset.click.top<this.containment[1]?a+i.grid[1]:a-i.grid[1]:a:a;var l=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0];o=this.containment?l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2]?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l:l}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.11"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("draggable"),r=n.options,o=e.extend({},i,{item:n.element});n.sortables=[],e(r.connectToSortable).each(function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i){var n=e(this).data("draggable"),r=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))})},drag:function(t,i){var n=e(this).data("draggable"),r=this;e.each(n.sortables,function(){this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","iframeFix",{start:function(){var t=e(this).data("draggable").options;e(t.iframeFix===!0?"iframe":t.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")})},stop:function(){e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),r=e(this).data("draggable").options;n.css("opacity")&&(r._opacity=n.css("opacity")),n.css("opacity",r.opacity)},stop:function(t,i){var n=e(this).data("draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("draggable");t.scrollParent[0]!=document&&"HTML"!=t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("draggable"),n=i.options,r=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(n.axis&&"x"==n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"==n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"==n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"==n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){for(var n=e(this).data("draggable"),r=n.options,o=r.snapTolerance,s=i.offset.left,a=s+n.helperProportions.width,l=i.offset.top,c=l+n.helperProportions.height,u=n.snapElements.length-1;u>=0;u--){var d=n.snapElements[u].left,h=d+n.snapElements[u].width,p=n.snapElements[u].top,f=p+n.snapElements[u].height;if(s>d-o&&h+o>s&&l>p-o&&f+o>l||s>d-o&&h+o>s&&c>p-o&&f+o>c||a>d-o&&h+o>a&&l>p-o&&f+o>l||a>d-o&&h+o>a&&c>p-o&&f+o>c){if("inner"!=r.snapMode){var m=Math.abs(p-c)<=o,g=Math.abs(f-l)<=o,v=Math.abs(d-a)<=o,b=Math.abs(h-s)<=o;m&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d-n.helperProportions.width}).left-n.margins.left),b&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left)}var y=m||g||v||b;if("outer"!=r.snapMode){var m=Math.abs(p-l)<=o,g=Math.abs(f-c)<=o,v=Math.abs(d-s)<=o,b=Math.abs(h-a)<=o;m&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d}).left-n.margins.left),b&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left)}!n.snapElements[u].snapping&&(m||g||v||b||y)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=m||g||v||b||y}else n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t=e(this).data("draggable").options,i=e.makeArray(e(t.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(i.length){var n=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=n+e}),this[0].style.zIndex=n+i.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),r=e(this).data("draggable").options;n.css("zIndex")&&(r._zIndex=n.css("zIndex")),n.css("zIndex",r.zIndex)},stop:function(t,i){var n=e(this).data("draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){this.options,this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData("sortable-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var n=null,r=this;if(e(t.target).parents().each(function(){return e.data(this,"sortable-item")==r?(n=e(this),!1):void 0}),e.data(t.target,"sortable-item")==r&&(n=e(t.target)),!n)return!1;if(this.options.handle&&!i){var o=!1;if(e(this.options.handle,n).find("*").andSelf().each(function(){this==t.target&&(o=!0)}),!o)return!1}return this.currentItem=n,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,i,n){var r=this.options,o=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",r.cursor)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,o._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-e(document).scrollTop()<i.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),t.pageX-e(document).scrollLeft()<i.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),n!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var r=this.items.length-1;r>=0;r--){var o=this.items[r],s=o.item[0],a=this._intersectsWithPointer(o);if(a&&s!=this.currentItem[0]&&this.placeholder[1==a?"next":"prev"]()[0]!=s&&!e.ui.contains(this.placeholder[0],s)&&("semi-dynamic"==this.options.type?!e.ui.contains(this.element[0],s):!0)){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(o))break;this._rearrange(t,o),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,r=n.placeholder.offset();n.reverting=!0,e(this.helper).animate({left:r.left-this.offset.parent.left-n.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-n.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,t._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,t._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")
},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,o=e.left,s=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d=n+c>a&&l>n+c&&t+u>o&&s>t+u;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:o<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=i&&n,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&"right"==s||"down"==o?2:1:o&&("down"==o?2:1):!1},_intersectsWithSides:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"==o&&n||"left"==o&&!n:r&&("down"==r&&i||"up"==r&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i=[],n=[],r=this._connectWith();if(r&&t)for(var o=r.length-1;o>=0;o--)for(var s=e(r[o]),a=s.length-1;a>=0;a--){var l=e.data(s[a],"sortable");l&&l!=this&&!l.options.disabled&&n.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}n.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=n.length-1;o>=0;o--)n[o][0].each(function(){i.push(this)});return e(i)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data(sortable-item)"),t=0;t<this.items.length;t++)for(var i=0;i<e.length;i++)e[i]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var i=this.items,n=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],r=this._connectWith();if(r)for(var o=r.length-1;o>=0;o--)for(var s=e(r[o]),a=s.length-1;a>=0;a--){var l=e.data(s[a],"sortable");l&&l!=this&&!l.options.disabled&&(n.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var o=n.length-1;o>=0;o--)for(var c=n[o][1],u=n[o][0],a=0,d=u.length;d>a;a++){var h=e(u[a]);h.data("sortable-item",c),i.push({item:h,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var n=this.items[i],r=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;t||(n.width=r.outerWidth(),n.height=r.outerHeight());var o=r.offset();n.left=o.left,n.top=o.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var o=this.containers[i].element.offset();this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(t){var i=t||this,n=i.options;if(!n.placeholder||n.placeholder.constructor==String){var r=n.placeholder;n.placeholder={element:function(){var t=e(document.createElement(i.currentItem[0].nodeName)).addClass(r||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(t.style.visibility="hidden"),t},update:function(e,t){(!r||n.forcePlaceholderSize)&&(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}}i.placeholder=e(n.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),n.placeholder.update(i,i.placeholder)},_contactContainers:function(t){for(var i=null,n=null,r=this.containers.length-1;r>=0;r--)if(!e.ui.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(i&&e.ui.contains(this.containers[r].element[0],i.element[0]))continue;i=this.containers[r],n=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1;else if(this.currentContainer!=this.containers[n]){for(var o=1e4,s=null,a=this.positionAbs[this.containers[n].floating?"left":"top"],l=this.items.length-1;l>=0;l--)if(e.ui.contains(this.containers[n].element[0],this.items[l].item[0])){var c=this.items[l][this.containers[n].floating?"left":"top"];Math.abs(c-a)<o&&(o=Math.abs(c-a),s=this.items[l])}if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[n],s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[n].element,!0),this._trigger("change",t,this._uiHash()),this.containers[n]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(""==n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var i=e(t.containment)[0],n=e(t.containment).offset(),r="hidden"!=e(i).css("overflow");this.containment=[n.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*n),left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*n)}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var o=t.pageX,s=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),i.grid)){var a=this.originalPageY+Math.round((s-this.originalPageY)/i.grid[1])*i.grid[1];s=this.containment?a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3]?a-this.offset.click.top<this.containment[1]?a+i.grid[1]:a-i.grid[1]:a:a;var l=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0];o=this.containment?l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2]?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l:l}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this,o=this.counter;window.setTimeout(function(){o==r.counter&&r.refreshPositions(!n)},0)},_clear:function(t,i){this.reverting=!1;var n=[];if(!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var r in this._storedCSS)("auto"==this._storedCSS[r]||"static"==this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!i&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||n.push(function(e){this._trigger("update",e,this._uiHash())}),!e.ui.contains(this.element[0],this.currentItem[0])){i||n.push(function(e){this._trigger("remove",e,this._uiHash())});for(var r=this.containers.length-1;r>=0;r--)e.ui.contains(this.containers[r].element[0],this.currentItem[0])&&!i&&(n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[r])),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[r])))}for(var r=this.containers.length-1;r>=0;r--)i||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",t,this._uiHash());for(var r=0;r<n.length;r++)n[r].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var r=0;r<n.length;r++)n[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.11"})}(jQuery),define("jquery-ui",function(){}),window.Raphael&&(Raphael.shadow=function(e,t,i,n,r){r=r||{};var o,s,a,l=jQuery(r.target),c=jQuery("<div/>",{"class":"aui-shadow"}),u=r.shadow||r.color||"#000",d=10*r.size||0,h=r.offsetSize||3,p=r.zindex||0,f=r.radius||0,m="0.4",g=r.blur||3;return i+=d+2*g,n+=d+2*g,Raphael.shadow.BOX_SHADOW_SUPPORT?(l.addClass("aui-box-shadow"),c.addClass("hidden")):(0===e&&0===t&&l.length>0&&(a=l.offset(),e=h-g+a.left,t=h-g+a.top),jQuery.browser.msie&&jQuery.browser.version<"9"&&(u="#f0f0f0",m="0.2"),c.css({position:"absolute",left:e,top:t,width:i,height:n,zIndex:p}),l.length>0?(c.appendTo(document.body),o=Raphael(c[0],i,n,f)):o=Raphael(e,t,i,n,f),o.canvas.style.position="absolute",s=o.rect(g,g,i-2*g,n-2*g).attr({fill:u,stroke:u,blur:""+g,opacity:m}),c)},Raphael.shadow.BOX_SHADOW_SUPPORT=function(){for(var e=document.documentElement.style,t=["boxShadow","MozBoxShadow","WebkitBoxShadow","msBoxShadow"],i=0;i<t.length;i++)if(t[i]in e)return!0;return!1}()),jQuery.os={};var jQueryOSplatform=navigator.platform.toLowerCase();jQuery.os.windows=-1!=jQueryOSplatform.indexOf("win"),jQuery.os.mac=-1!=jQueryOSplatform.indexOf("mac"),jQuery.os.linux=-1!=jQueryOSplatform.indexOf("linux"),function(e){function t(e){this.num=0,this.timer=e>0?e:!1}function i(i){if(e.isPlainObject(i.data)||e.isArray(i.data)||"string"==typeof i.data){var r=i.handler,o={timer:700};!function(t){"string"==typeof t?o.combo=[t]:e.isArray(t)?o.combo=t:e.extend(o,t),o.combo=e.map(o.combo,function(e){return e.toLowerCase()})}(i.data),i.index=new t(o.timer),i.handler=function(t){if(this===t.target||!/textarea|select|input/i.test(t.target.nodeName)){var s="keypress"!==t.type?e.hotkeys.specialKeys[t.which]:null,a=String.fromCharCode(t.which).toLowerCase(),l="",c={};t.altKey&&"alt"!==s&&(l+="alt+"),t.ctrlKey&&"ctrl"!==s&&(l+="ctrl+"),t.metaKey&&!t.ctrlKey&&"meta"!==s&&(l+="meta+"),t.shiftKey&&"shift"!==s&&(l+="shift+"),s&&(c[l+s]=!0),a&&(c[l+a]=!0),/shift+/.test(l)&&(c[l.replace("shift+","")+e.hotkeys.shiftNums[s||a]]=!0);var u=i.index,d=o.combo;if(n(d[u.val()],c)){if(u.val()===d.length-1)return u.reset(),r.apply(this,arguments);u.inc()}else u.reset(),n(d[0],c)&&u.inc()}}}}function n(e,t){for(var i=e.split(" "),n=0,r=i.length;r>n;n++)if(t[i[n]])return!0;return!1}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"meta",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta",219:"[",221:"]"},keypressKeys:["<",">","?"],shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(e.hotkeys.keypressKeys,function(t,i){e.hotkeys.shiftNums[i]=i}),t.prototype.val=function(){return this.num},t.prototype.inc=function(){this.timer&&(clearTimeout(this.timeout),this.timeout=setTimeout(e.proxy(t.prototype.reset,this),this.timer)),this.num++},t.prototype.reset=function(){this.timer&&clearTimeout(this.timeout),this.num=0},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:i}})}(jQuery),jQuery.fn.moveTo=function(e){var t,i={transition:!1,scrollOffset:35},n=jQuery.extend(i,e),r=this,o=r.offset().top;if((jQuery(window).scrollTop()+jQuery(window).height()-this.outerHeight()<o||jQuery(window).scrollTop()+n.scrollOffset>o)&&jQuery(window).height()>n.scrollOffset){if(t=jQuery(window).scrollTop()+n.scrollOffset>o?o-(jQuery(window).height()-this.outerHeight())+n.scrollOffset:o-n.scrollOffset,!jQuery.fn.moveTo.animating&&n.transition)return jQuery(document).trigger("moveToStarted",this),jQuery.fn.moveTo.animating=!0,jQuery("html,body").animate({scrollTop:t},1e3,function(){jQuery(document).trigger("moveToFinished",r),delete jQuery.fn.moveTo.animating}),this;var s=jQuery("html, body");return s.is(":animated")&&(s.stop(),delete jQuery.fn.moveTo.animating),jQuery(document).trigger("moveToStarted"),jQuery(window).scrollTop(t),setTimeout(function(){jQuery(document).trigger("moveToFinished",r)},100),this}return jQuery(document).trigger("moveToFinished",this),this},function(){if("undefined"==typeof jQuery)throw new Error("jQuery is required for AJS to function.");"undefined"==typeof window.console?window.console={messages:[],log:function(e){this.messages.push(e)},show:function(){alert(this.messages.join("\n")),this.messages=[]}}:console.show=function(){},window.AJS=function(){function e(e){var t={"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;","`":"&#96;"};return"string"==typeof t[e]?t[e]:"&quot;"}var t,i,n=[],r=0,o=/[&"'<>`]/g,s={version:"${project.version}",params:{},$:jQuery,log:function(){"undefined"!=typeof console&&console.log&&Function.prototype.apply.apply(console.log,[console,arguments])},warn:function(){"undefined"!=typeof console&&console.warn&&Function.prototype.apply.apply(console.warn,[console,arguments])},error:function(){"undefined"!=typeof console&&console.error&&Function.prototype.apply.apply(console.error,[console,arguments])},preventDefault:function(e){e.preventDefault()},stopEvent:function(e){return e.stopPropagation(),!1},include:function(e){if(!this.contains(n,e)){n.push(e);var t=document.createElement("script");t.src=e,this.$("body").append(t)}},toggleClassName:function(e,t){(e=this.$(e))&&e.toggleClass(t)},setVisible:function(e,t){if(e=this.$(e)){var i=this.$;i(e).each(function(){var e=i(this).hasClass("hidden");e&&t?i(this).removeClass("hidden"):e||t||i(this).addClass("hidden")})}},setCurrent:function(e,t){(e=this.$(e))&&(t?e.addClass("current"):e.removeClass("current"))},isVisible:function(e){return!this.$(e).hasClass("hidden")},isClipped:function(e){return e=AJS.$(e),e.prop("scrollWidth")>e.prop("clientWidth")},populateParameters:function(e){e||(e=this.params);var t=this;this.$(".parameters input").each(function(){var i=this.value,n=this.title||this.id;t.$(this).hasClass("list")?e[n]?e[n].push(i):e[n]=[i]:e[n]=i.match(/^(tru|fals)e$/i)?"true"===i.toLowerCase():i})},toInit:function(e){var t=this;return this.$(function(){try{e.apply(this,arguments)}catch(i){t.log("Failed to run init function: "+i+"\n"+e.toString())}}),this},indexOf:function(e,t,i){var n=e.length;null===i?i=0:0>i&&(i=Math.max(0,n+i));for(var r=i;n>r;r++)if(e[r]===t)return r;return-1},contains:function(e,t){return this.indexOf(e,t)>-1},firebug:function(){AJS.log("DEPRECATED: AJS.firebug should no longer be used.");var e=this.$(document.createElement("script"));e.attr("src","https://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js"),this.$("head").append(e),function(){window.firebug?firebug.init():setTimeout(AJS.firebug,0)}()},clone:function(e){return AJS.$(e).clone().removeAttr("id")},alphanum:function(e,t){e=(e+"").toLowerCase(),t=(t+"").toLowerCase();for(var i=/(\d+|\D+)/g,n=e.match(i),r=t.match(i),o=Math.max(n.length,r.length),s=0;o>s;s++){if(s===n.length)return-1;if(s===r.length)return 1;var a=parseInt(n[s],10)+"",l=parseInt(r[s],10)+"";if(a===n[s]&&l===r[s]&&a!==l)return(a-l)/Math.abs(a-l);if((a!==n[s]||l!==r[s])&&n[s]!==r[s])return n[s]<r[s]?-1:1}return 0},onTextResize:function(e){if("function"==typeof e)if(AJS.onTextResize["on-text-resize"])AJS.onTextResize["on-text-resize"].push(function(t){e(t)});else{var t=AJS("div");t.css({width:"1em",height:"1em",position:"absolute",top:"-9999em",left:"-9999em"}),this.$("body").append(t),t.size=t.width(),setInterval(function(){if(t.size!==t.width()){t.size=t.width();for(var e=0,i=AJS.onTextResize["on-text-resize"].length;i>e;e++)AJS.onTextResize["on-text-resize"][e](t.size)}},0),AJS.onTextResize.em=t,AJS.onTextResize["on-text-resize"]=[function(t){e(t)}]}},unbindTextResize:function(e){for(var t=0,i=AJS.onTextResize["on-text-resize"].length;i>t;t++)if(AJS.onTextResize["on-text-resize"][t]===e)return AJS.onTextResize["on-text-resize"].splice(t,1)},escape:function(e){return escape(e).replace(/%u\w{4}/gi,function(e){return unescape(e)})},escapeHtml:function(t){return t.replace(o,e)},filterBySearch:function(e,t,i){if(!t)return[];var n=this.$,r=i&&i.keywordsField||"keywords",o=i&&i.ignoreForCamelCase?"i":"",s=i&&i.matchBoundary?"\\b":"",a=i&&i.splitRegex||/\s+/,l=t.split(a),c=[];n.each(l,function(){var e=[new RegExp(s+this,"i")];if(/^([A-Z][a-z]*) {2,}$/.test(this)){var t=this.replace(/([A-Z][a-z]*)/g,"\\b$1[^,]*");e.push(new RegExp(t,o))}c.push(e)});var u=[];return n.each(e,function(){for(var e=0;e<c.length;e++){for(var t=!1,i=0;i<c[e].length;i++)if(c[e][i].test(this[r])){t=!0;break}if(!t)return}u.push(this)}),u},drawLogo:function(e){AJS.log("DEPRECATED: AJS.drawLogo should no longer be used.");var t=e.scaleFactor||1,i=e.fill||"#fff",n=e.stroke||"#000",r=400*t,o=40*t,s=e.strokeWidth||1,a=e.containerID||".aui-logo";AJS.$(".aui-logo").length||AJS.$("body").append('<div id="aui-logo" class="aui-logo"><div>');var l=Raphael(a,r+50*t,o+100*t),c=l.path("M 0,0 c 3.5433333,-4.7243333 7.0866667,-9.4486667 10.63,-14.173 -14.173,0 -28.346,0 -42.519,0 C -35.432667,-9.4486667 -38.976333,-4.7243333 -42.52,0 -28.346667,0 -14.173333,0 0,0 z m 277.031,28.346 c -14.17367,0 -28.34733,0 -42.521,0 C 245.14,14.173 255.77,0 266.4,-14.173 c -14.17267,0 -28.34533,0 -42.518,0 C 213.25167,0 202.62133,14.173 191.991,28.346 c -14.17333,0 -28.34667,0 -42.52,0 14.17333,-18.8976667 28.34667,-37.7953333 42.52,-56.693 -7.08667,-9.448667 -14.17333,-18.897333 -21.26,-28.346 -14.173,0 -28.346,0 -42.519,0 7.08667,9.448667 14.17333,18.897333 21.26,28.346 -14.17333,18.8976667 -28.34667,37.7953333 -42.52,56.693 -14.173333,0 -28.346667,0 -42.52,0 10.63,-14.173 21.26,-28.346 31.89,-42.519 -14.390333,0 -28.780667,0 -43.171,0 C 42.520733,1.330715e-4 31.889933,14.174867 21.26,28.347 c -42.520624,6.24e-4 -85.039187,-8.13e-4 -127.559,-0.001 11.220667,-14.961 22.441333,-29.922 33.662,-44.883 -6.496,-8.661 -12.992,-17.322 -19.488,-25.983 5.905333,0 11.810667,0 17.716,0 -10.63,-14.173333 -21.26,-28.346667 -31.89,-42.52 14.173333,0 28.346667,0 42.52,0 10.63,14.173333 21.26,28.346667 31.89,42.52 14.173333,0 28.3466667,0 42.52,0 -10.63,-14.173333 -21.26,-28.346667 -31.89,-42.52 14.1733333,0 28.3466667,0 42.52,0 10.63,14.173333 21.26,28.346667 31.89,42.52 14.390333,0 28.780667,0 43.171,0 -10.63,-14.173333 -21.26,-28.346667 -31.89,-42.52 42.51967,0 85.03933,0 127.559,0 10.63033,14.173333 21.26067,28.346667 31.891,42.52 14.17267,0 28.34533,0 42.518,0 -10.63,-14.173333 -21.26,-28.346667 -31.89,-42.52 14.17367,0 28.34733,0 42.521,0 14.17333,18.897667 28.34667,37.795333 42.52,56.693 -14.17333,18.8976667 -28.34667,37.7953333 -42.52,56.693 z");c.scale(t,-t,0,0),c.translate(120*t,o),c.attr("fill",i),c.attr("stroke",n),c.attr("stroke-width",s)},debounce:function(e,t){var i,n;return function(){var r=arguments,o=this,s=function(){n=e.apply(o,r)};return clearTimeout(i),i=setTimeout(s,t),n}},id:function(e){if(t=r++ +"",i=e?e+t:"aui-uid-"+t,document.getElementById(i)){if(i=i+"-"+(new Date).getTime(),document.getElementById(i))throw new Error("ERROR: timestamped fallback ID "+i+" exists. AJS.id stopped.");return i}return i},_addID:function(e,t){var i=AJS.$(e),n=t||!1;i.each(function(){var e=AJS.$(this);e.attr("id")||e.attr("id",AJS.id(n))})},enable:function(e,t){var i=AJS.$(e);return"undefined"==typeof t&&(t=!0),i.each(function(){this.disabled=!t})}};if("undefined"!=typeof AJS)for(var a in AJS)s[a]=AJS[a];var l=function(){var e=null;return arguments.length&&"string"==typeof arguments[0]&&(e=AJS.$(document.createElement(arguments[0])),2===arguments.length&&e.html(arguments[1])),e};for(var c in s)l[c]=s[c];return l}(),AJS.$(function(){var e=AJS.$("body");e.data("auiVersion")||e.attr("data-aui-version",AJS.version),AJS.populateParameters()}),AJS.$.ajaxSettings.traditional=!0}(),AJS.format=function(){var e=/'(?!')/g,t=/^\d+$/,i=/^(\d+),number$/,n=/^(\d+)\,choice\,(.+)/,r=/^(\d+)([#<])(.+)/,o=function(e,o){var s,a="";if(s=e.match(t))a=o.length>++e?o[e]:"";else if(s=e.match(i))a=o.length>++s[1]?o[s[1]]:"";else if(s=e.match(n)){var l=o.length>++s[1]?o[s[1]]:null;if(null!==l){for(var c=s[2].split("|"),u=null,d=0;d<c.length;d++){var h=c[d].match(r),p=parseInt(h[1],10);if(p>l){if(u){a=u;break}a=h[3];break}if(l==p&&"#"==h[2]){a=h[3];break}d==c.length-1&&(a=h[3]),u=h[3]}var f=[a].concat(Array.prototype.slice.call(o,1));a=AJS.format.apply(AJS,f)}}return a},s=function(e){for(var t=!1,i=-1,n=0,r=0;r<e.length;r++){var o=e.charAt(r);if("'"==o&&(t=!t),!t)if("{"===o)0===n&&(i=r),n++;else if("}"===o&&n>0&&(n--,0===n)){var s=[];return s.push(e.substring(0,r+1)),s.push(e.substring(0,i)),s.push(e.substring(i+1,r)),s}}return null},a=function(t){for(var i=arguments,n="",r=s(t);r;)t=t.substring(r[0].length),n+=r[1].replace(e,""),n+=o(r[2],i),r=s(t);return n+=t.replace(e,"")};return a.apply(AJS,arguments)},AJS.I18n={getText:function(e){var t=Array.prototype.slice.call(arguments,1);return AJS.I18n.keys&&Object.prototype.hasOwnProperty.call(AJS.I18n.keys,e)?AJS.format.apply(null,[AJS.I18n.keys[e]].concat(t)):e}},AJS._internal||(AJS._internal={}),function(e){AJS._internal.browser={};var t=null;AJS._internal.browser.supportsCalc=function(){if(null===t){var i=e('<div style="height: 10px; height: -webkit-calc(20px + 0); height: calc(20px);"></div>');t=20===i.appendTo(document.documentElement).height(),i.remove()}return t}}(AJS.$),function(e){AJS._internal=AJS._internal||{},AJS._internal.widget=function(t,i){var n="_aui-widget-"+t;return function(t,r){var o,s;e.isPlainObject(t)?s=t:(o=t,s=r);var a,l=o&&e(o);return l&&l.data(n)?a=l.data(n):(a=new i(l,s||{}),l=a.$el,l.data(n,a)),a}}}(AJS.$),AJS.FocusManager=function(e){function t(){}return t.defaultFocusSelector=":input:visible:enabled",t.prototype.enter=function(e){var i=e.attr("data-aui-focus-selector"),n=i||t.defaultFocusSelector,r=e.is(n)?e:e.find(n);r.first().focus()},t.prototype.exit=function(t){var i=document.activeElement;(t[0]===i||t.has(i).length)&&e(i).blur()},t.global=new t,t}(AJS.$),function(){function e(e,t){t=t||"";var i=new RegExp(o(e)+"=([^|]+)"),n=t.match(i);return n&&n[1]}function t(e,t,i){var n=new RegExp("(\\s|\\|)*\\b"+o(e)+"=[^|]*[|]*");if(i=i||"",i=i.replace(n,"|"),""!==t){var r=e+"="+t;i.length+r.length<4020&&(i+="|"+r)}return i.replace(l,"|")}function i(e){return e.replace(a,"")}function n(e){var t=new RegExp("\\b"+o(e)+"=((?:[^\\\\;]+|\\\\.)*)(?:;|$)"),n=document.cookie.match(t);return n&&i(n[1])}function r(e,t,i){var n,r="",o='"'+t.replace(c,'\\"')+'"';i&&(n=new Date,n.setTime(+n+1e3*60*60*24*i),r="; expires="+n.toGMTString()),document.cookie=e+"="+o+r+";path=/"}function o(e){return e.replace(u,"\\$&")}var s="AJS.conglomerate.cookie",a=/(\\|^"|"$)/g,l=/\|\|+/g,c=/"/g,u=/[.*+?|^$()[\]{\\]/g;AJS.Cookie={save:function(e,i,o){var a=n(s);a=t(e,i,a),r(s,a,o||365)},read:function(t,i){var r=n(s),o=e(t,r);return null!=o?o:i},erase:function(e){this.save(e,"")}}}(),function(e){var t;AJS.dim=function(i,n){return t||(t=e.browser.msie&&parseInt(e.browser.version,10)<8?e("html"):e(document.body)),AJS.dim.$dim||(AJS.dim.$dim=AJS("div").addClass("aui-blanket"),n&&AJS.dim.$dim.css({zIndex:n}),e.browser.msie&&AJS.dim.$dim.css({width:"200%",height:Math.max(e(document).height(),e(window).height())+"px"}),e("body").append(AJS.dim.$dim),e.browser.msie&&i!==!1&&(AJS.dim.$shim=e('<iframe frameBorder="0" class="aui-blanket-shim" src="about:blank"/>'),AJS.dim.$shim.css({height:Math.max(e(document).height(),e(window).height())+"px"}),n&&AJS.dim.$shim.css({zIndex:n-1}),e("body").append(AJS.dim.$shim),AJS.dim.shim=AJS.dim.$shim),AJS.dim.cachedOverflow=t.css("overflow"),t.css("overflow","hidden")),AJS.dim.$dim},AJS.undim=function(){if(AJS.dim.$dim&&(AJS.dim.$dim.remove(),AJS.dim.$dim=null,AJS.dim.$shim&&(AJS.dim.$shim.remove(),AJS.dim.$shim=null),t&&t.css("overflow",AJS.dim.cachedOverflow),e.browser.safari)){var i=e(window).scrollTop();e(window).scrollTop(10+5*(10==i)).scrollTop(i)}}}(AJS.$),AJS.popup=function(e){var t={width:800,height:600,closeOnOutsideClick:!1,keypressListener:function(e){27===e.keyCode&&i.is(":visible")&&l.hide()}};"object"!=typeof e&&(e={width:arguments[0],height:arguments[1],id:arguments[2]},e=AJS.$.extend({},e,arguments[3])),e=AJS.$.extend({},t,e);
var i=AJS("div").addClass("aui-popup");e.id&&i.attr("id",e.id);var n=3e3;AJS.$(".aui-dialog").each(function(){var e=AJS.$(this);n=e.css("z-index")>n?e.css("z-index"):n});var r=function(t,r){e.width=t=t||e.width,e.height=r=r||e.height,i.toggleClass("auto-height","auto"===r);var o={marginTop:-Math.round(r/2)+"px",marginLeft:-Math.round(t/2)+"px",width:t,height:r,"z-index":parseInt(n,10)+2};return"auto"!==r?o.marginTop=-Math.round(r/2)+"px":o["max-height"]=this.maxHeight,i.css(o),arguments.callee}(e.width,e.height);AJS.$("body").append(i),i.hide(),AJS.enable(i);var o=AJS.$(".aui-blanket"),s=function(e,t){var i=AJS.$(e,t);return i.length?(i.focus(),!0):!1},a=function(t){if(0===AJS.$(".dialog-page-body",t).find(":focus").length){if(e.focusSelector)return s(e.focusSelector,t);var i=":input:visible:enabled:first";s(i,AJS.$(".dialog-page-body",t))||s(i,AJS.$(".dialog-button-panel",t))||s(i,AJS.$(".dialog-page-menu",t))}},l={changeSize:function(t,i){(t&&t!=e.width||i&&i!=e.height)&&r(t,i),this.show()},show:function(){var t=function(){AJS.$(document).off("keydown",e.keypressListener).on("keydown",e.keypressListener),AJS.dim(),o=AJS.$(".aui-blanket"),0!=o.size()&&e.closeOnOutsideClick&&o.click(function(){i.is(":visible")&&l.hide()}),i.show(),AJS.popup.current=this,a(i),AJS.$(document).trigger("showLayer",["popup",this])};t.call(this),this.show=t},hide:function(){AJS.$(document).unbind("keydown",e.keypressListener),o.unbind(),this.element.hide(),0==AJS.$(".aui-dialog:visible").size()&&AJS.undim();var t=document.activeElement;this.element.has(t).length&&t.blur(),AJS.$(document).trigger("hideLayer",["popup",this]),AJS.popup.current=null,this.enable()},element:i,remove:function(){i.remove(),this.element=null},disable:function(){this.disabled||(this.popupBlanket=AJS.$("<div class='dialog-blanket'> </div>").css({height:i.height(),width:i.width()}),i.append(this.popupBlanket),this.disabled=!0)},enable:function(){this.disabled&&(this.disabled=!1,this.popupBlanket.remove(),this.popupBlanket=null)}};return l},function(){function e(e,t,i,n){e.buttonpanel||e.addButtonPanel(),this.page=e,this.onclick=i,this._onclick=function(){return i.call(this,e.dialog,e)===!0},this.item=AJS("button",t).addClass("button-panel-button"),n&&this.item.addClass(n),"function"==typeof i&&this.item.click(this._onclick),e.buttonpanel.append(this.item),this.id=e.button.length,e.button[this.id]=this}function t(e,t,i,n,r){e.buttonpanel||e.addButtonPanel(),r||(r="#"),this.page=e,this.onclick=i,this._onclick=function(){return i.call(this,e.dialog,e)===!0},this.item=AJS("a",t).attr("href",r).addClass("button-panel-link"),n&&this.item.addClass(n),"function"==typeof i&&this.item.click(this._onclick),e.buttonpanel.append(this.item),this.id=e.button.length,e.button[this.id]=this}function i(e,t){var i="left"==e?-1:1;return function(e){var n=this.page[t];if(this.id!=(1==i?n.length-1:0)){i*=e||1,n[this.id+i].item[0>i?"before":"after"](this.item),n.splice(this.id,1),n.splice(this.id+i,0,this);for(var r=0,o=n.length;o>r;r++)"panel"==t&&this.page.curtab==n[r].id&&(this.page.curtab=r),n[r].id=r}return this}}function n(e){return function(){this.page[e].splice(this.id,1);for(var t=0,i=this.page[e].length;i>t;t++)this.page[e][t].id=t;this.item.remove()}}e.prototype.moveUp=e.prototype.moveLeft=i("left","button"),e.prototype.moveDown=e.prototype.moveRight=i("right","button"),e.prototype.remove=n("button"),e.prototype.html=function(e){return this.item.html(e)},e.prototype.onclick=function(e){return"undefined"==typeof e?this.onclick:(this.item.unbind("click",this._onclick),this._onclick=function(){return e.call(this,page.dialog,page)===!0},"function"==typeof e&&this.item.click(this._onclick),void 0)};var r=20,o=function(e,t,i,n,o){i instanceof AJS.$||(i=AJS.$(i)),this.dialog=e.dialog,this.page=e,this.id=e.panel.length,this.button=AJS("button").html(t).addClass("item-button"),o&&(this.button[0].id=o),this.item=AJS("li").append(this.button).addClass("page-menu-item"),this.body=AJS("div").append(i).addClass("dialog-panel-body"),"auto"!==this.dialog.height?this.body.css("height",e.dialog.height+"px"):this.body.css("max-height",e.dialog.maxHeight+"px"),this.padding=r,n&&this.body.addClass(n);var s=e.panel.length,a=this;e.menu.append(this.item),e.body.append(this.body),e.panel[s]=this;var l=function(){var t;e.curtab+1&&(t=e.panel[e.curtab],t.body.hide(),t.item.removeClass("selected"),"function"==typeof t.onblur&&t.onblur()),e.curtab=a.id,a.body.show(),a.item.addClass("selected"),"function"==typeof a.onselect&&a.onselect(),"function"==typeof e.ontabchange&&e.ontabchange(a,t)};this.button.click?this.button.click(l):(AJS.log("atlassian-dialog:Panel:constructor - this.button.click false"),this.button.onclick=l),l(),0==s?e.menu.css("display","none"):e.menu.show()};o.prototype.select=function(){this.button.click()},o.prototype.moveUp=o.prototype.moveLeft=i("left","panel"),o.prototype.moveDown=o.prototype.moveRight=i("right","panel"),o.prototype.remove=n("panel"),o.prototype.html=function(e){return e?(this.body.html(e),this):this.body.html()},o.prototype.setPadding=function(e){return isNaN(+e)||(this.body.css("padding",+e),this.padding=+e,this.page.recalcSize()),this};var s=56,a=51,l=50,c=function(e,t){this.dialog=e,this.id=e.page.length,this.element=AJS("div").addClass("dialog-components"),this.body=AJS("div").addClass("dialog-page-body"),this.menu=AJS("ul").addClass("dialog-page-menu"),"auto"!==e.height?this.menu.css("height",e.height+"px"):this.menu.css("max-height",e.maxHeight+"px"),this.body.append(this.menu),this.curtab,this.panel=[],this.button=[],t&&this.body.addClass(t),e.popup.element.append(this.element.append(this.menu).append(this.body)),e.page[e.page.length]=this};c.prototype.recalcSize=function(){for(var e=this.header?s:0,t=this.buttonpanel?a:0,i=this.menu.innerHeight()-this.menu.height(),n=this.panel.length;n--;)if("auto"!==this.dialog.height){var r=this.dialog.height-e-t;this.panel[n].body.css("height",r),this.menu.css("height",r)}else{var o=this.panel[n].body.innerHeight()-this.panel[n].body.height(),l=this.dialog.maxHeight-e-t;this.panel[n].body.css("max-height",l-o),this.menu.css("max-height",l-i)}},c.prototype.addButtonPanel=function(){this.buttonpanel=AJS("div").addClass("dialog-button-panel"),this.element.append(this.buttonpanel)},c.prototype.addPanel=function(e,t,i,n){return new o(this,e,t,i,n),this.recalcSize(),this},c.prototype.addHeader=function(e,t){return this.header&&this.header.remove(),this.header=AJS("h2").text(e||"").addClass("dialog-title"),t&&this.header.addClass(t),this.element.prepend(this.header),this.recalcSize(),this},c.prototype.addButton=function(t,i,n){return new e(this,t,i,n),this.recalcSize(),this},c.prototype.addLink=function(e,i,n,r){return new t(this,e,i,n,r),this.recalcSize(),this},c.prototype.gotoPanel=function(e){this.panel[e.id||e].select()},c.prototype.getCurrentPanel=function(){return this.panel[this.curtab]},c.prototype.hide=function(){this.element.hide()},c.prototype.show=function(){this.element.show()},c.prototype.remove=function(){this.element.remove()},AJS.Dialog=function(e,t,i){var n={};+e||(n=Object(e),e=n.width,t=n.height,i=n.id),this.height=t||480,"auto"===this.height&&(this.maxHeight=AJS.$(window).height()-200),this.width=e||640,this.id=i,n=AJS.$.extend({},n,{width:this.width,height:this.height,id:this.id,maxHeight:this.maxHeight}),this.popup=AJS.popup(n),this.popup.element.addClass("aui-dialog"),this.page=[],this.curpage=0,new c(this)},AJS.Dialog.prototype.addHeader=function(e,t){return this.page[this.curpage].addHeader(e,t),this},AJS.Dialog.prototype.addButton=function(e,t,i){return this.page[this.curpage].addButton(e,t,i),this},AJS.Dialog.prototype.addLink=function(e,t,i,n){return this.page[this.curpage].addLink(e,t,i,n),this},AJS.Dialog.prototype.addSubmit=function(e,t){return this.page[this.curpage].addButton(e,t,"button-panel-submit-button"),this},AJS.Dialog.prototype.addCancel=function(e,t){return this.page[this.curpage].addLink(e,t,"button-panel-cancel-link"),this},AJS.Dialog.prototype.addButtonPanel=function(){return this.page[this.curpage].addButtonPanel(),this},AJS.Dialog.prototype.addPanel=function(e,t,i,n){return this.page[this.curpage].addPanel(e,t,i,n),this},AJS.Dialog.prototype.addPage=function(e){return new c(this,e),this.page[this.curpage].hide(),this.curpage=this.page.length-1,this},AJS.Dialog.prototype.nextPage=function(){return this.page[this.curpage++].hide(),this.curpage>=this.page.length&&(this.curpage=0),this.page[this.curpage].show(),this},AJS.Dialog.prototype.prevPage=function(){return this.page[this.curpage--].hide(),this.curpage<0&&(this.curpage=this.page.length-1),this.page[this.curpage].show(),this},AJS.Dialog.prototype.gotoPage=function(e){return this.page[this.curpage].hide(),this.curpage=e,this.curpage<0?this.curpage=this.page.length-1:this.curpage>=this.page.length&&(this.curpage=0),this.page[this.curpage].show(),this},AJS.Dialog.prototype.getPanel=function(e,t){var i=null==t?this.curpage:e;return null==t&&(t=e),this.page[i].panel[t]},AJS.Dialog.prototype.getPage=function(e){return this.page[e]},AJS.Dialog.prototype.getCurrentPanel=function(){return this.page[this.curpage].getCurrentPanel()},AJS.Dialog.prototype.gotoPanel=function(e,t){if(null!=t){var i=e.id||e;this.gotoPage(i)}this.page[this.curpage].gotoPanel("undefined"==typeof t?e:t)},AJS.Dialog.prototype.show=function(){return this.popup.show(),AJS.trigger("show.dialog",{dialog:this}),this},AJS.Dialog.prototype.hide=function(){return this.popup.hide(),AJS.trigger("hide.dialog",{dialog:this}),this},AJS.Dialog.prototype.remove=function(){this.popup.hide(),this.popup.remove(),AJS.trigger("remove.dialog",{dialog:this})},AJS.Dialog.prototype.disable=function(){return this.popup.disable(),this},AJS.Dialog.prototype.enable=function(){return this.popup.enable(),this},AJS.Dialog.prototype.get=function(e){var t=[],i=this,n='#([^"][^ ]*|"[^"]*")',r=":(\\d+)",o="page|panel|button|header",s="(?:("+o+")(?:"+n+"|"+r+")?"+"|"+n+")",a=new RegExp("(?:^|,)\\s*"+s+"(?:\\s+"+s+")?"+"\\s*(?=,|$)","ig");(e+"").replace(a,function(e,n,r,o,s,a,l,c,u){n=n&&n.toLowerCase();var d=[];if("page"==n&&i.page[o]?(d.push(i.page[o]),n=a,n=n&&n.toLowerCase(),r=l,o=c,s=u):d=i.page,r=r&&(r+"").replace(/"/g,""),l=l&&(l+"").replace(/"/g,""),s=s&&(s+"").replace(/"/g,""),u=u&&(u+"").replace(/"/g,""),n||s)for(var h=d.length;h--;){if(s||"panel"==n&&(r||!r&&null==o))for(var p=d[h].panel.length;p--;)(d[h].panel[p].button.html()==s||d[h].panel[p].button.html()==r||"panel"==n&&!r&&null==o)&&t.push(d[h].panel[p]);if(s||"button"==n&&(r||!r&&null==o))for(var p=d[h].button.length;p--;)(d[h].button[p].item.html()==s||d[h].button[p].item.html()==r||"button"==n&&!r&&null==o)&&t.push(d[h].button[p]);d[h][n]&&d[h][n][o]&&t.push(d[h][n][o]),"header"==n&&d[h].header&&t.push(d[h].header)}else t=t.concat(d)});for(var l={length:t.length},c=t.length;c--;){l[c]=t[c];for(var u in t[c])u in l||function(e){l[e]=function(){for(var t=this.length;t--;)"function"==typeof this[t][e]&&this[t][e].apply(this[t],arguments)}}(u)}return l},AJS.Dialog.prototype.updateHeight=function(){for(var e=0,t=AJS.$(window).height()-s-a-2*l,i=0;this.getPanel(i);i++)this.getPanel(i).body.css({height:"auto",display:"block"}).outerHeight()>e&&(e=Math.min(t,this.getPanel(i).body.outerHeight())),i!==this.page[this.curpage].curtab&&this.getPanel(i).body.css({display:"none"});for(i=0;this.getPanel(i);i++)this.getPanel(i).body.css({height:e||this.height});this.page[0].menu.height(e),this.height=e+s+a+1,this.popup.changeSize(void 0,this.height)},AJS.Dialog.prototype.isMaximised=function(){return this.popup.element.outerHeight()>=AJS.$(window).height()-2*l},AJS.Dialog.prototype.getCurPanel=function(){return this.getPanel(this.page[this.curpage].curtab)},AJS.Dialog.prototype.getCurPanelButton=function(){return this.getCurPanel().button}}(),function(e){function t(e){e.preventDefault()}function i(e){if(e.click)e.click();else{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}function n(t,i){return t===i||e.contains(i,t)}function r(t){t instanceof AJS.$||(t=e(t));var i=t.attr("aria-owns"),n=t.attr("aria-haspopup"),r=document.getElementById(i);if(r)return e(r);if(!i)throw new Error("Dropdown 2 trigger required attribute not set: aria-owns");if(!n)throw new Error("Dropdown 2 trigger required attribute not set: aria-haspopup");if(!r)throw new Error("Dropdown 2 trigger aria-owns attr set to nonexistent id: "+i);throw new Error("Dropdown 2 trigger unknown error. I don't know what you did, but there's smoke everywhere. Consult the documentation.")}var o=e(document),s=AJS.$.browser.msie&&8==parseInt(AJS.$.browser.version,10),a=null,l=function(){function i(t){s||1!==t.which||(s=!0,o.bind("mouseup mouseleave",n),e(this).trigger("aui-button-invoke"))}function n(){o.unbind("mouseup mouseleave",n),setTimeout(function(){s=!1},0)}function r(){s||e(this).trigger("aui-button-invoke")}var s=!1;return"undefined"==typeof document.addEventListener?{click:r,"click selectstart":t,mousedown:function(e){function t(e){switch(e.toElement){case null:case n:case document.body:case document.documentElement:e.returnValue=!1}}var n=this,r=document.activeElement;i.call(this,e),null!==r&&(r.attachEvent("onbeforedeactivate",t),setTimeout(function(){r.detachEvent("onbeforedeactivate",t)},0))}}:{click:r,"click mousedown":t,mousedown:i}}(),c={"aui-button-invoke":function(l,c){function u(t,i){t.each(function(){var t=e(this);t.attr("role",i),t.hasClass("checked")?(t.attr("aria-checked","true"),"radio"==i&&t.closest("ul").attr("role","radiogroup")):t.attr("aria-checked","false")})}function d(){var t=I.offset(),i=I.outerWidth();D.css({left:0,top:0});var n,r=D.outerWidth(),o=e("body").outerWidth(!0),a=Math.max(parseInt(D.css("min-width"),10),i),l=I.data("container")||!1,c="left";s&&(n=parseInt(D.css("border-left-width"),10)+parseInt(D.css("border-right-width"),10),r-=n,a-=n),A||D.css("min-width",a+"px");var u=t.left,d=t.top+I.outerHeight();if(A){var h=3;u=t.left+O.outerWidth()-h,d=t.top}if(u+r>o&&u+i>=r&&(u=t.left+i-r,A&&(u=t.left-r),c="right"),l){var p=(I.closest(l),I.offset().left+I.outerWidth()),f=p+r;a>=r&&(r=a),f>p&&(u=p-r,c="right"),s&&(u-=n)}D.attr({"data-dropdown2-alignment":c,"aria-hidden":"false"}).css({display:"block",left:u+"px",top:d+"px"}),D.appendTo(document.body)}function h(){$(),E("off"),setTimeout(function(){D.css("display","none").css("min-width","").insertAfter(I).attr("aria-hidden","true"),A||I.removeClass("active"),b().removeClass("active"),D.removeClass("aui-dropdown2-in-toolbar"),D.removeClass("aui-dropdown2-in-buttons"),M?D.insertBefore(M):D.appendTo(j),D.trigger("aui-dropdown2-hide")},0)}function p(){h(),A&&O.trigger("aui-dropdown2-hide-all")}function f(e){A&&e.target===O[0]&&h()}function m(e){return!e.is(".disabled, [aria-disabled=true]")}function g(e){return e.hasClass("aui-dropdown2-sub-trigger")}function v(t,i){if(g(t)){i=e.extend({},i,{$menu:L});var n=r(t);n.is(":visible")?n.trigger("aui-dropdown2-select-first"):t.trigger("aui-button-invoke",i)}}function b(){return D.find("a.active")}function y(e){return N&&N[0]===e[0]?!1:(N=e,D.hasClass("aui-dropdown2-disable-active-class")||(b().removeClass("active"),m(e)&&e.addClass("active")),D.trigger("aui-dropdown2-item-selected"),T(),!0)}function _(){y(D.find("a:not(.disabled)").first())}function w(e){var t=D.find("> ul > li > a, > .aui-dropdown2-section > ul > li > a").not(".disabled");y(C(t,e,!0))}function x(e){e.length>0&&(p(),e.trigger("aui-button-invoke"))}function k(e){x(C(L.find(".aui-dropdown2-trigger").not(".disabled, [aria-disabled=true], .aui-dropdown2-sub-trigger"),e,!1))}function C(e,t,i){var n=e.index(e.filter(".active"));return n+=0>n&&0>t?1:0,n+=t,i?n%=e.length:0>n&&(n=e.length),e.eq(n)}function S(){x(e(this))}function $(){a===z&&(o.unbind(z),a=null)}function T(){a!==z&&(o.unbind(a),o.bind(z),a=z)}function E(e){var t="bind",i="delegate";"on"!==e&&(t="unbind",i="undelegate"),A?O[t]("aui-dropdown2-hide aui-dropdown2-item-selected aui-dropdown2-step-out",f):(L[i](".aui-dropdown2-trigger:not(.active)","mousemove",S),I[t]("aui-button-invoke",h)),D[t]("aui-dropdown2-hide-all",p),D[i]("a",R),D[t]("aui-dropdown2-hide",T),D[t]("aui-dropdown2-select-first",_)}c=e.extend({selectFirst:!0},c);var D=r(this),I=e(this).addClass("active"),A=I.hasClass("aui-dropdown2-sub-trigger"),j=D.parent()[0],M=D.next()[0],P=e(this).attr("data-dropdown2-hide-location");if(P){var q=document.getElementById(P);if(!q)throw new Error("The specified data-dropdown2-hide-location id doesn't exist");j=e(q),M=void 0}var L=c.$menu||I.closest(".aui-dropdown2-trigger-group");if(A){var O=I.closest(".aui-dropdown2");D.addClass(O.attr("class")).addClass("aui-dropdown2-sub-menu")}var R={click:function(i){var n=e(this);m(n)&&(n.hasClass("interactive")||p(),g(n)&&(v(n,{selectFirst:!1}),t(i)))},mousemove:function(){var t=e(this),i=y(t);i&&v(t,{selectFirst:!1})}},z={"click focusin mousedown":function(e){var t=e.target;(document!==t||"focusin"!==e.type)&&(n(t,D[0])||n(t,I[0])||p())},keydown:function(e){var n;if(e.shiftKey&&9==e.keyCode)w(-1);else switch(e.keyCode){case 13:n=b(),g(n)?v(n):i(n[0]);break;case 27:h();break;case 37:if(n=b(),g(n)){var o=r(n);if(o.is(":visible"))return D.trigger("aui-dropdown2-step-out"),void 0}A?h():k(-1);break;case 38:w(-1);break;case 39:n=b(),g(n)?v(n):k(1);break;case 40:w(1);break;case 9:w(1);break;default:return}t(e)}};I.attr("aria-controls",I.attr("aria-owns")),s&&D.removeClass("aui-dropdown2-tailed"),D.find(".disabled").attr("aria-disabled","true"),D.find("li.hidden > a").addClass("disabled").attr("aria-disabled","true"),u(D.find(".aui-dropdown2-checkbox"),"checkbox"),u(D.find(".aui-dropdown2-radio"),"radio"),d(),I.hasClass("toolbar-trigger")&&D.addClass("aui-dropdown2-in-toolbar"),I.parent().hasClass("aui-buttons")&&D.addClass("aui-dropdown2-in-buttons"),I.parents().hasClass("aui-header")&&D.addClass("aui-dropdown2-in-header"),D.trigger("aui-dropdown2-show",c),c.selectFirst&&_(),E("on");var N=null},mousedown:function(t){1===t.which&&e(this).bind(u)}},u={mouseleave:function(){o.bind(d)},"mouseup mouseleave":function(){e(this).unbind(u)}},d={mouseup:function(t){var n=e(t.target).closest(".aui-dropdown2 a, .aui-dropdown2-trigger")[0];n&&setTimeout(function(){i(n)},0)},"mouseup mouseleave":function(){e(this).unbind(d)}};o.delegate(".aui-dropdown2-trigger",l),o.delegate(".aui-dropdown2-trigger:not(.active):not([aria-disabled=true]),.aui-dropdown2-sub-trigger:not([aria-disabled=true])",c),o.delegate(".aui-dropdown2-checkbox:not(.disabled)","click",function(){var t=e(this);t.hasClass("checked")?(t.removeClass("checked").attr("aria-checked","false"),t.trigger("aui-dropdown2-item-uncheck")):(t.addClass("checked").attr("aria-checked","true"),t.trigger("aui-dropdown2-item-check"))}),o.delegate(".aui-dropdown2-radio:not(.checked):not(.disabled)","click",function(){var t=e(this),i=t.closest("ul").find(".checked");i.removeClass("checked").attr("aria-checked","false").trigger("aui-dropdown2-item-uncheck"),t.addClass("checked").attr("aria-checked","true").trigger("aui-dropdown2-item-check")}),o.delegate(".aui-dropdown2 a.disabled","click",function(e){t(e)})}(AJS.$),AJS.bind=function(e,t,i){try{return"function"==typeof i?AJS.$(window).bind(e,t,i):AJS.$(window).bind(e,t)}catch(n){AJS.log("error while binding: "+n.message)}},AJS.unbind=function(e,t){try{return AJS.$(window).unbind(e,t)}catch(i){AJS.log("error while unbinding: "+i.message)}},AJS.trigger=function(e,t){try{return AJS.$(window).trigger(e,t)}catch(i){AJS.log("error while triggering: "+i.message)}},AJS.inlineHelp=function(){AJS.$(".icon-inline-help").click(function(){var e=AJS.$(this).siblings(".field-help");e.hasClass("hidden")?e.removeClass("hidden"):e.addClass("hidden")})},function(e){function t(t){var i=e(t),n=e.extend({left:0,top:0},i.offset());return{left:n.left,top:n.top,width:i.outerWidth(),height:i.outerHeight()}}function i(e,t,i,n){var r=AJS.$.isFunction(n.offsetX)?n.offsetX(e,t,i,n):n.offsetX,o=AJS.$.isFunction(n.offsetY)?n.offsetY(e,t,i,n):n.offsetY,s=AJS.$.isFunction(n.arrowOffsetX)?n.arrowOffsetX(e,t,i,n):n.arrowOffsetX,a=AJS.$.isFunction(n.arrowOffsetY)?n.arrowOffsetY(e,t,i,n):n.arrowOffsetY,l="body"!==n.container.toLowerCase(),c=AJS.$(n.container),u=l?AJS.$(n.container).parent():AJS.$(window),d=l?c.offset():{left:0,top:0},h=l?u.offset():{left:0,top:0},p=t.target,f=p.offset(),m=p[0].getBBox&&p[0].getBBox();return{screenPadding:10,arrowMargin:5,window:{top:h.top,left:h.left,scrollTop:u.scrollTop(),scrollLeft:u.scrollLeft(),width:u.width(),height:u.height()},scrollContainer:{width:c.width(),height:c.height()},trigger:{top:f.top-d.top,left:f.left-d.left,width:m?m.width:p.outerWidth(),height:m?m.height:p.outerHeight()},dialog:{width:e.width(),height:e.height(),offset:{top:o,left:r}},arrow:{height:e.find(".arrow").outerHeight(),offset:{top:a,left:s}}}}function n(e,t,n,r){var o=i(e,t,n,r),s=o.screenPadding,a=o.window,l=o.trigger,c=o.dialog,u=o.arrow,d=o.scrollContainer,h={top:l.top-a.scrollTop,left:l.left-a.scrollLeft},p=Math.floor(l.height/2),f=Math.floor(c.height/2),m=Math.floor(u.height/2),g=h.left-c.offset.left-s,v=d.width-h.left-l.width-c.offset.left-s,b=g>=c.width,y=v>=c.width,_=!y&&b?"e":"w",w=h.top+p-m,x=a.height-w-u.height;s=Math.min(s,w-o.arrowMargin),s=Math.min(s,x-o.arrowMargin);var k,C,S=h.top+p,$=Math.max(S-s,0),T=Math.max(a.height-S-s,0),E=f-c.offset.top>$,D=f+c.offset.top>T;return E?(k={top:a.scrollTop+s,left:"w"===_?l.left+l.width+c.offset.left:l.left-c.width-c.offset.left},C={top:l.top+p-(k.top+m)}):D?(k={top:a.scrollTop+a.height-c.height-s,left:"w"===_?l.left+l.width+c.offset.left:l.left-c.width-c.offset.left},C={top:l.top+p-(k.top+m)}):(k={top:l.top+p-f+c.offset.top,left:"w"===_?l.left+l.width+c.offset.left:l.left-c.width-c.offset.left},C={top:f-m+u.offset.top}),{gravity:_,popupCss:k,arrowCss:C}}function r(e,i,n,r){var o=AJS.$.isFunction(r.offsetX)?r.offsetX(e,i,n,r):r.offsetX,s=AJS.$.isFunction(r.offsetY)?r.offsetY(e,i,n,r):r.offsetY,a=AJS.$.isFunction(r.arrowOffsetX)?r.arrowOffsetX(e,i,n,r):r.arrowOffsetX;AJS.$.isFunction(r.arrowOffsetY)?r.arrowOffsetY(e,i,n,r):r.arrowOffsetY;var l=t(window),c=t(i.target),u=t(e),d=t(e.find(".aui-inline-dialog-arrow")),h=c.left+c.width/2,p=(window.pageYOffset||document.documentElement.scrollTop)+l.height,f=10;u.top=c.top+c.height+~~s,u.left=c.left+~~o;var m=l.width-(u.left+u.width+f);d.left=h-u.left+~~a,d.top=-(d.height/2);var g=c.top>u.height,v=u.top+u.height<p,b=!v&&g||g&&"s"===r.gravity;if(b&&(u.top=c.top-u.height-d.height/2,d.top=u.height),r.isRelativeToMouse)0>m?(u.right=f,u.left="auto",d.left=n.x-(l.width-u.width)):(u.left=n.x-20,d.left=n.x-u.left);else if(0>m){u.right=f,u.left="auto";var y=l.width-u.right,_=y-u.width;d.right="auto",d.left=h-_-d.width/2}else u.width<=c.width/2&&(d.left=u.width/2,u.left=h-u.width/2);return{gravity:b?"s":"n",displayAbove:b,popupCss:{left:u.left,top:u.top,right:u.right},arrowCss:{left:d.left,top:d.top,right:d.right}}}AJS.InlineDialog=function(t,i,n,r){if(r&&r.getArrowAttributes&&AJS.log("DEPRECATED: getArrowAttributes - See https://ecosystem.atlassian.net/browse/AUI-1362"),r&&r.getArrowPath&&(AJS.log("DEPRECATED: getArrowPath - See https://ecosystem.atlassian.net/browse/AUI-1362"),void 0!==r.gravity&&AJS.log("DEPRECATED: getArrowPath does not support gravity - See https://ecosystem.atlassian.net/browse/AUI-2197")),r&&void 0!==r.onTop&&(AJS.log("DEPRECATED: onTop has been replaced with gravity - See https://ecosystem.atlassian.net/browse/AUI-2197"),r.onTop&&void 0===r.gravity&&(r.gravity="s")),"undefined"==typeof i&&(i=String(Math.random()).replace(".",""),e("#inline-dialog-"+i+", #arrow-"+i+", #inline-dialog-shim-"+i).length))throw"GENERATED_IDENTIFIER_NOT_UNIQUE";var o=e.extend(!1,AJS.InlineDialog.opts,r);"w"===o.gravity&&(o.offsetX=void 0===r.offsetX?10:r.offsetX,o.offsetY=void 0===r.offsetY?0:r.offsetY);var s,a,l,c,u,d=function(){return window.Raphael&&r&&(r.getArrowPath||r.getArrowAttributes)},h=!1,p=!1,f=!1,m=e('<div id="inline-dialog-'+i+'" class="aui-inline-dialog"><div class="aui-inline-dialog-contents contents"></div><div id="arrow-'+i+'" class="aui-inline-dialog-arrow arrow"></div></div>'),g=e("#arrow-"+i,m),v=m.find(".contents");d()||m.find(".aui-inline-dialog-arrow").addClass("aui-css-arrow"),o.displayShadow||v.addClass("aui-inline-dialog-no-shadow"),o.autoWidth?v.addClass("aui-inline-dialog-auto-width"):v.css("width",o.width+"px"),v.mouseover(function(){clearTimeout(a),m.unbind("mouseover")}).mouseout(function(){_()});var b=function(){return s||(s={popup:m,hide:function(){_(0)},id:i,show:function(){y()},persistent:o.persistent?!0:!1,reset:function(){function t(t,n){if(t.css(n.popupCss),d()){"s"===n.gravity&&(n.arrowCss.top-=e.browser.msie?10:9),t.arrowCanvas||(t.arrowCanvas=Raphael("arrow-"+i,16,16));var r=o.getArrowPath,s=e.isFunction(r)?r(n):r;t.arrowCanvas.path(s).attr(o.getArrowAttributes())}else g.removeClass("aui-bottom-arrow aui-left-arrow aui-right-arrow"),"s"!==n.gravity||g.hasClass("aui-bottom-arrow")?"n"===n.gravity||("w"===n.gravity?g.addClass("aui-left-arrow"):"e"===n.gravity&&g.addClass("aui-right-arrow")):g.addClass("aui-bottom-arrow");g.css(n.arrowCss)}var n=AJS.$(window).height(),r=Math.round(.75*n);m.children(".aui-inline-dialog-contents").css("max-height",r);var s=o.calculatePositions(m,u,c,o);if(void 0!==s.displayAbove&&(AJS.log("DEPRECATED: displayAbove has been replaced with gravity - See https://ecosystem.atlassian.net/browse/AUI-2197"),s.gravity=s.displayAbove?"s":"n"),t(m,s),m.fadeIn(o.fadeTime,function(){}),e.browser.msie&&~~e.browser.version<10){var a=e("#inline-dialog-shim-"+i);a.length||e(m).prepend(e('<iframe class = "inline-dialog-shim" id="inline-dialog-shim-'+i+'" frameBorder="0" src="javascript:false;"></iframe>')),a.css({width:v.outerWidth(),height:v.outerHeight()})}}}),s},y=function(){m.is(":visible")||(l=setTimeout(function(){f&&p&&(o.addActiveClass&&e(t).addClass("active"),h=!0,o.persistent||T(),AJS.InlineDialog.current=b(),e(document).trigger("showLayer",["inlineDialog",b()]),b().reset())},o.showDelay))},_=function(i){"undefined"==typeof i&&o.persistent||(p=!1,h&&o.preHideCallback.call(m[0].popup)&&(i=null==i?o.hideDelay:i,clearTimeout(a),clearTimeout(l),null!=i&&(a=setTimeout(function(){E(),o.addActiveClass&&e(t).removeClass("active"),m.fadeOut(o.fadeTime,function(){o.hideCallback.call(m[0].popup)}),m.arrowCanvas&&(m.arrowCanvas.remove(),m.arrowCanvas=null),h=!1,p=!1,e(document).trigger("hideLayer",["inlineDialog",b()]),AJS.InlineDialog.current=null,o.cacheContent||(f=!1,x=!1)},i))))},w=function(t,r){var s=e(r);o.upfrontCallback.call({popup:m,hide:function(){_(0)},id:i,show:function(){y()}}),m.each(function(){"undefined"!=typeof this.popup&&this.popup.hide()}),o.closeOthers&&e(".aui-inline-dialog").each(function(){!this.popup.persistent&&this.popup.hide()}),u={target:s},c=t?{x:t.pageX,y:t.pageY}:{x:s.offset().left,y:s.offset().top},h||clearTimeout(l),p=!0;var d=function(){x=!1,f=!0,o.initCallback.call({popup:m,hide:function(){_(0)},id:i,show:function(){y()}}),y()};return x||(x=!0,e.isFunction(n)?n(v,r,d):e.get(n,function(e,t,n){v.html(o.responseHandler(e,t,n)),f=!0,o.initCallback.call({popup:m,hide:function(){_(0)},id:i,show:function(){y()}}),y()})),clearTimeout(a),h||y(),!1};m[0].popup=b();var x=!1,k=!1,C=function(){k||(e(o.container).append(m),k=!0)},S=e(t);o.onHover?o.useLiveEvents?S.selector?e(document).on("mousemove",S.selector,function(e){C(),w(e,this)}).on("mouseout",S.selector,function(){_()}):AJS.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled."):S.mousemove(function(e){C(),w(e,this)}).mouseout(function(){_()}):o.noBind||(o.useLiveEvents?S.selector?e(document).on("click",S.selector,function(e){return C(),$()?m.hide():w(e,this),!1}).on("mouseout",S.selector,function(){_()}):AJS.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled."):S.click(function(e){return C(),$()?m.hide():w(e,this),!1}).mouseout(function(){_()}));var $=function(){return h&&o.closeOnTriggerClick},T=function(){A(),P()},E=function(){j(),q()},D=!1,I=i+".inline-dialog-check",A=function(){D||(e("body").bind("click."+I,function(t){var n=e(t.target);0===n.closest("#inline-dialog-"+i+" .contents").length&&_(0)}),D=!0)},j=function(){D&&e("body").unbind("click."+I),D=!1},M=function(e){27===e.keyCode&&_(0)},P=function(){e(document).on("keydown",M)},q=function(){e(document).off("keydown",M)};return m.show=function(e,i){e&&e.stopPropagation(),C(),!o.noBind||t&&t.length?w(e,t):w(e,void 0===i?e.target:i)},m.hide=function(){_(0)},m.refresh=function(){h&&b().reset()},m.getOptions=function(){return o},m},AJS.InlineDialog.opts={onTop:!1,responseHandler:function(e){return e},closeOthers:!0,isRelativeToMouse:!1,addActiveClass:!0,onHover:!1,useLiveEvents:!1,noBind:!1,fadeTime:100,persistent:!1,hideDelay:1e4,showDelay:0,width:300,offsetX:0,offsetY:10,arrowOffsetX:0,arrowOffsetY:0,container:"body",cacheContent:!0,displayShadow:!0,autoWidth:!1,gravity:"n",closeOnTriggerClick:!1,preHideCallback:function(){return!0},hideCallback:function(){},initCallback:function(){},upfrontCallback:function(){},calculatePositions:function(e,t,i,o){o=o||{};var s="w"===o.gravity?n:r;return s(e,t,i,o)},getArrowPath:function(e){return"s"===e.gravity?"M0,8L8,16,16,8":"M0,8L8,0,16,8"},getArrowAttributes:function(){return{fill:"#fff",stroke:"#ccc"}}}}(AJS.$),function(){AJS.keyCode={ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}(AJS.$),function(){var e=500,t=5e3,i=100;AJS.messages={setup:function(){AJS.messages.createMessage("generic"),AJS.messages.createMessage("error"),AJS.messages.createMessage("warning"),AJS.messages.createMessage("info"),AJS.messages.createMessage("success"),AJS.messages.createMessage("hint"),AJS.messages.makeCloseable(),AJS.messages.makeFadeout()},makeCloseable:function(e){AJS.$(e||"div.aui-message.closeable").each(function(){var e=AJS.$(this),t=AJS.$('<span class="aui-icon icon-close" role="button" tabindex="0"></span>').click(function(){e.closeMessage()}).keypress(function(t){(t.which===AJS.keyCode.ENTER||t.which===AJS.keyCode.SPACE)&&(e.closeMessage(),t.preventDefault())});e.append(t)})},makeFadeout:function(n,r,o){r="undefined"!=typeof r?r:t,o="undefined"!=typeof o?o:e,AJS.$(n||"div.aui-message.fadeout").each(function(){function e(){s.stop(!0,!1).delay(r).fadeOut(o,function(){s.closeMessage()})}function t(){s.stop(!0,!1).fadeTo(i,1)}function n(){return!a&&!l}var s=AJS.$(this),a=!1,l=!1;s.focusin(function(){a=!0,t()}).focusout(function(){a=!1,n()&&e()}).hover(function(){l=!0,t()},function(){l=!1,n()&&e()}),e()})},template:'<div class="aui-message {type} {closeable} {shadowed} {fadeout}"><p class="title"><span class="aui-icon icon-{type}"></span><strong>{title}</strong></p>{body}<!-- .aui-message --></div>',createMessage:function(e){AJS.messages[e]=function(t,i){var n,r,o=this.template;return i||(i=t,t="#aui-message-bar"),i.closeable=i.closeable!==!1,i.shadowed=i.shadowed!==!1,n=AJS.$(AJS.template(o).fill({type:e,closeable:i.closeable?"closeable":"",shadowed:i.shadowed?"shadowed":"",fadeout:i.fadeout?"fadeout":"",title:i.title||"","body:html":i.body||""}).toString()),i.id&&(/[#\'\"\.\s]/g.test(i.id)?AJS.log("AJS.Messages error: ID rejected, must not include spaces, hashes, dots or quotes."):n.attr("id",i.id)),r=i.insert||"append","prepend"===r?n.prependTo(t):n.appendTo(t),i.closeable&&AJS.messages.makeCloseable(n),i.fadeout&&AJS.messages.makeFadeout(n,i.delay,i.duration),n}}},AJS.$.fn.closeMessage=function(){var e=AJS.$(this);e.hasClass("aui-message","closeable")&&(e.stop(!0),e.trigger("messageClose",[this]).remove(),AJS.$(document).trigger("aui-message-close",[this]))
},AJS.$(function(){AJS.messages.setup()})}(),function(){function e(){var e=AJS.$(this);AJS._addID(e),e.attr("role","tab");var t=e.attr("href");AJS.$(t).attr("aria-labelledby",e.attr("id")),e.parent().hasClass(n)?e.attr(o,"true"):e.attr(o,"false")}function t(e){AJS.tabs.change(AJS.$(this),e),e&&e.preventDefault()}var i=/#.*/,n="active-tab",r="active-pane",o="aria-selected",s="aria-hidden";AJS.tabs={setup:function(){var i=AJS.$(".aui-tabs:not(.aui-tabs-disabled)");i.attr("role","application"),i.find(".tabs-pane").each(function(){var e=AJS.$(this);e.attr("role","tabpanel"),e.hasClass(r)?e.attr(s,"false"):e.attr(s,"true")});for(var n=0,o=i.length;o>n;n++){var a=i.eq(n);if(!a.data("aui-tab-events-bound")){var l=a.children("ul.tabs-menu");l.attr("role","tablist"),l.children("li").attr("role","presentation"),l.find("> .menu-item a").each(e),l.delegate("a","click",t),a.data("aui-tab-events-bound",!0)}}AJS.$(".aui-tabs.vertical-tabs").find("a").each(function(){var e=AJS.$(this);if(!e.attr("title")){var t=e.children("strong:first");AJS.isClipped(t)&&e.attr("title",e.text())}})},change:function(e){var t=AJS.$(e.attr("href").match(i)[0]);t.addClass(r).attr(s,"false").siblings(".tabs-pane").removeClass(r).attr(s,"true"),e.parent("li.menu-item").addClass(n).siblings(".menu-item").removeClass(n),e.closest(".tabs-menu").find("a").attr(o,"false"),e.attr(o,"true"),e.trigger("tabSelect",{tab:e,pane:t})}},AJS.$(AJS.tabs.setup)}(),AJS.template=function(e){var t=/\{([^\}]+)\}/g,i=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=/([^\\])'/g,r=function(e,t,n,r){var o=n;return t.replace(i,function(e,t,i,n,s){t=t||n,o&&(t+":html"in o?(o=o[t+":html"],r=!0):t in o&&(o=o[t]),s&&"function"==typeof o&&(o=o()))}),(null==o||o==n)&&(o=e),o=String(o),r||(o=l.escape(o)),o},o=function(e){return this.template=this.template.replace(t,function(t,i){return r(t,i,e,!0)}),this},s=function(e){return this.template=this.template.replace(t,function(t,i){return r(t,i,e)}),this},a=function(){return this.template},l=function(e){function t(){return t.template}return t.template=String(e),t.toString=t.valueOf=a,t.fill=s,t.fillHtml=o,t},c={},u=[];return l.load=function(t){return t=String(t),c.hasOwnProperty(t)||(u.length>=1e3&&delete c[u.shift()],u.push(t),c[t]=e("script[title='"+t.replace(n,"$1\\'")+"']")[0].text),this(c[t])},l.escape=AJS.escapeHtml,l}(AJS.$),function(e,t){var i=-1!==navigator.platform.indexOf("Mac"),n=/^(backspace|tab|r(ight|eturn)|s(hift|pace|croll)|c(trl|apslock)|alt|pa(use|ge(up|down))|e(sc|nd)|home|left|up|d(el|own)|insert|f\d\d?|numlock|meta)/i;e.whenIType=function(r){function o(e){!AJS.popup.current&&m&&m.fire(e)}function s(e){e.preventDefault()}function a(e){var i=e&&e.split?t.trim(e).split(" "):[e];t.each(i,function(){c(this)})}function l(e){for(var t=e.length;t--;)if(e[t].length>1&&"space"!==e[t])return!0;return!1}function c(e){var i=e instanceof Array?e:u(e.toString()),n=l(i)?"keydown":"keypress";f.push(i),t(document).bind(n,i,o),t(document).bind(n+" keyup",i,s)}function u(e){for(var t,i,r=[],o="";e.length;)(t=e.match(/^(ctrl|meta|shift|alt)\+/i))?(o+=t[0],e=e.substring(t[0].length)):(i=e.match(n))?(r.push(o+i[0]),e=e.substring(i[0].length),o=""):(r.push(o+e[0]),e=e.substring(1),o="");return r}function d(e){for(var n=t(e),r=n.attr("title")||"",o=f.slice(),s=n.data("kbShortcutAppended")||"",a=!s,l=a?r:r.substring(0,r.length-s.length);o.length;)s=p(o.shift().slice(),s,a),a=!1;i&&(s=s.replace(/Meta/gi,"⌘").replace(/Shift/gi,"⇧")),n.attr("title",l+s),n.data("kbShortcutAppended",s)}function h(e){var i=t(e),n=i.data("kbShortcutAppended");if(n){var r=i.attr("title");i.attr("title",r.replace(n,"")),i.removeData("kbShortcutAppended")}}function p(e,i,n){return n?i+=" ("+AJS.I18n.getText("aui.keyboard.shortcut.type.x",e.shift()):(i=i.replace(/\)$/,""),i+=AJS.I18n.getText("aui.keyboard.shortcut.or.x",e.shift())),t.each(e,function(){i+=" "+AJS.I18n.getText("aui.keyboard.shortcut.then.x",this)}),i+=")"}var f=[],m=t.Callbacks();return a(r),e.whenIType.makeShortcut({executor:m,bindKeys:a,addShortcutsToTitle:d,removeShortcutsFromTitle:h,keypressHandler:o,defaultPreventionHandler:s})},e.whenIType.makeShortcut=function(e){function i(e){return function(i,r){r=r||{};var o=r.focusedClass||"focused",s=r.hasOwnProperty("wrapAround")?r.wrapAround:!0,a=r.hasOwnProperty("escToCancel")?r.escToCancel:!0;return n.add(function(){var n=t(i),r=n.filter("."+o),l=0===r.length?void 0:{transition:!0};a&&t(document).one("keydown",function(e){e.keyCode===AJS.keyCode.ESCAPE&&r&&r.removeClass(o)}),r.length&&r.removeClass(o),r=e(r,n,s),r&&r.length>0&&(r.addClass(o),r.moveTo(l),r.is("a")?r.focus():r.find("a:first").focus())}),this}}var n=e.executor,r=e.bindKeys,o=e.addShortcutsToTitle,s=e.removeShortcutsFromTitle,a=e.keypressHandler,l=e.defaultPreventionHandler,c=[];return{moveToNextItem:i(function(e,i,n){var r;return n&&0===e.length?i.eq(0):(r=t.inArray(e.get(0),i),r<i.length-1?(r+=1,i.eq(r)):n?i.eq(0):e)}),moveToPrevItem:i(function(e,i,n){var r;return n&&0===e.length?i.filter(":last"):(r=t.inArray(e.get(0),i),r>0?(r-=1,i.eq(r)):n?i.filter(":last"):e)}),click:function(e){return c.push(e),o(e),n.add(function(){var i=t(e);i.length>0&&i.click()}),this},goTo:function(e){return n.add(function(){window.location.href=e}),this},followLink:function(e){return c.push(e),o(e),n.add(function(){var i=t(e)[0];i&&{a:!0,link:!0}[i.nodeName.toLowerCase()]&&(window.location.href=i.href)}),this},execute:function(e){var t=this;return n.add(function(){e.apply(t,arguments)}),this},evaluate:function(e){e.call(this)},moveToAndClick:function(e){return c.push(e),o(e),n.add(function(){var i=t(e);i.length>0&&(i.click(),i.moveTo())}),this},moveToAndFocus:function(e){return c.push(e),o(e),n.add(function(t){var i=AJS.$(e);i.length>0&&(i.focus(),i.moveTo&&i.moveTo(),i.is(":input")&&t.preventDefault())}),this},or:function(e){return r(e),this},unbind:function(){t(document).unbind("keydown keypress",a).unbind("keydown keypress keyup",l);for(var e=0,i=c.length;i>e;e++)s(c[e]);c=[]}}},e.whenIType.fromJSON=function(e,n){var r=[];return e&&t.each(e,function(e,o){var s,a=o.op,l=o.param;if("execute"===a||"evaluate"===a)s=[new Function(l)];else if(/^\[[^\]\[]*,[^\]\[]*\]$/.test(l)){try{s=JSON.parse(l)}catch(c){AJS.error("When using a parameter array, array must be in strict JSON format: "+l)}t.isArray(s)||AJS.error("Badly formatted shortcut parameter. String or JSON Array of parameters required: "+l)}else s=[l];t.each(o.keys,function(){var e=this;n&&i&&(e=t.map(this,function(e){return e.replace(/ctrl/i,"meta")}));var o=AJS.whenIType(e);o[a].apply(o,s),r.push(o)})}),r},t(document).bind("iframeAppended",function(e,i){t(i).load(function(){var e=t(i).contents();e.bind("keyup keydown keypress",function(e){t.browser.safari&&"keypress"===e.type||t(e.target).is(":input")||t.event.trigger(e,arguments,document,!0)})})})}(AJS,AJS.$),define("aui-stable",["jquery","jquery-ui"],function(e){return function(){var t;return t||e.AJS}}(this)),function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function i(e){for(;e=e.parentNode;)if(e==document)return!0;return!1}function n(){var e=o++;return"tipsyuid"+e}function r(t,i){this.$element=e(t),this.options=i,this.enabled=!0,this.fixTitle()}var o=0;r.prototype={show:function(){function i(){a.hoverTooltip=!0}function r(){if("in"!=a.hoverState&&(a.hoverTooltip=!1,"manual"!=a.options.trigger)){var e="hover"==a.options.trigger?"mouseleave.tipsy":"blur.tipsy";a.$element.trigger(e)}}var o=this.getTitle();if(o&&this.enabled){var s=this.tip();s.find(".tipsy-inner")[this.options.html?"html":"text"](o),s[0].className="tipsy",s.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var a=this;this.options.hoverable&&s.hover(i,r),this.options.className&&s.addClass(t(this.options.className,this.$element[0]));var l,c=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),u=s[0].offsetWidth,d=s[0].offsetHeight,h=t(this.options.gravity,this.$element[0]);switch(h.charAt(0)){case"n":l={top:c.top+c.height+this.options.offset,left:c.left+c.width/2-u/2};break;case"s":l={top:c.top-d-this.options.offset,left:c.left+c.width/2-u/2};break;case"e":l={top:c.top+c.height/2-d/2,left:c.left-u-this.options.offset};break;case"w":l={top:c.top+c.height/2-d/2,left:c.left+c.width+this.options.offset}}if(2==h.length&&(l.left="w"==h.charAt(1)?c.left+c.width/2-15:c.left+c.width/2-u+15),s.css(l).addClass("tipsy-"+h),s.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+h.charAt(0),this.options.fade?s.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):s.css({visibility:"visible",opacity:this.options.opacity}),this.options.aria){var p=n();s.attr("id",p),this.$element.attr("aria-describedby",p)}}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove(),this.options.aria&&this.$element.removeAttr("aria-describedby")},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,i=this.options;this.fixTitle();var e,i=this.options;return"string"==typeof i.title?e=t.attr("title"==i.title?"original-title":i.title):"function"==typeof i.title&&(e=i.title.call(t[0])),e=(""+e).replace(/(^\s*|\s*$)/,""),e||i.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>').attr("role","tooltip"),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){function i(i){var n=e.data(i,"tipsy");return n||(n=new r(i,e.fn.tipsy.elementOptions(i,t)),e.data(i,"tipsy",n)),n}function n(){var e=i(this);e.hoverState="in",0==t.delayIn?e.show():(e.fixTitle(),setTimeout(function(){"in"==e.hoverState&&e.show()},t.delayIn))}function o(){var e=i(this);e.hoverState="out",0==t.delayOut?e.hide():setTimeout(function(){"out"!=e.hoverState||e.hoverTooltip||e.hide()},t.delayOut)}if(t===!0)return this.data("tipsy");if("string"==typeof t){var s=this.data("tipsy");return s&&s[t](),this}if(t=e.extend({},e.fn.tipsy.defaults,t),t.hoverable&&(t.delayOut=t.delayOut||20),t.live||this.each(function(){i(this)}),"manual"!=t.trigger){var a="hover"==t.trigger?"mouseenter.tipsy":"focus.tipsy",l="hover"==t.trigger?"mouseleave.tipsy":"blur.tipsy";t.live?e(this.context).on(a,this.selector,n).on(l,this.selector,o):this.bind(a,n).bind(l,o)}return this},e.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,hoverable:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},e.fn.tipsy.revalidate=function(){e(".tipsy").each(function(){var t=e.data(this,"tipsy-pointee");t&&i(t)||e(this).remove()})},e.fn.tipsy.elementOptions=function(t,i){return e.metadata?e.extend({},i,e(t).metadata()):i},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoBounds=function(t,i){return function(){var n={ns:i[0],ew:i.length>1?i[1]:!1},r=e(document).scrollTop()+t,o=e(document).scrollLeft()+t,s=e(this);return s.offset().top<r&&(n.ns="n"),s.offset().left<o&&(n.ew="w"),e(window).width()+e(document).scrollLeft()-s.offset().left<t&&(n.ew="e"),e(window).height()+e(document).scrollTop()-s.offset().top<t&&(n.ns="s"),n.ns+(n.ew?n.ew:"")}}}(jQuery),define("jquery-plugins/jquery.tipsy",function(){}),function(e){"undefined"==typeof e.fn.each2&&e.fn.extend({each2:function(t){for(var i=e([0]),n=-1,r=this.length;++n<r&&(i.context=i[0]=this[n])&&t.call(i[0],n,i)!==!1;);return this}})}(jQuery),function(e,t){function i(e,t){for(var i=0,n=t.length;n>i;i+=1)if(r(e,t[i]))return i;return-1}function n(){var t=e(O);t.appendTo("body");var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}function r(e,i){return e===i?!0:e===t||i===t?!1:null===e||null===i?!1:e.constructor===String?e+""==i+"":i.constructor===String?i+""==e+"":!1}function o(t,i){var n,r,o;if(null===t||t.length<1)return[];for(n=t.split(i),r=0,o=n.length;o>r;r+=1)n[r]=e.trim(n[r]);return n}function s(e){return e.outerWidth(!1)-e.width()}function a(i){var n="keyup-change-value";i.on("keydown",function(){e.data(i,n)===t&&e.data(i,n,i.val())}),i.on("keyup",function(){var r=e.data(i,n);r!==t&&i.val()!==r&&(e.removeData(i,n),i.trigger("keyup-change"))})}function l(i){i.on("mousemove",function(i){var n=L;(n===t||n.x!==i.pageX||n.y!==i.pageY)&&e(i.target).trigger("mousemove-filtered",i)})}function c(e,i,n){n=n||t;var r;return function(){var t=arguments;window.clearTimeout(r),r=window.setTimeout(function(){i.apply(n,t)},e)}}function u(e){var t,i=!1;return function(){return i===!1&&(t=e(),i=!0),t}}function d(e,t){var n=c(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){i(e.target,t.get())>=0&&n(e)})}function h(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,i=e[0],n=e.val().length;e.focus(),e.is(":visible")&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&(t=i.createTextRange(),t.collapse(!1),t.select()))},0)}function p(t){t=e(t)[0];var i=0,n=0;if("selectionStart"in t)i=t.selectionStart,n=t.selectionEnd-i;else if("selection"in document){t.focus();var r=document.selection.createRange();n=document.selection.createRange().text.length,r.moveStart("character",-t.value.length),i=r.text.length-n}return{offset:i,length:n}}function f(e){e.preventDefault(),e.stopPropagation()}function m(e){e.preventDefault(),e.stopImmediatePropagation()}function g(t){if(!M){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);M=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),M.attr("class","select2-sizer"),e("body").append(M)}return M.text(t.val()),M.width()}function v(t,i,n){var r,o,s=[];r=t.attr("class"),r&&(r=""+r,e(r.split(" ")).each2(function(){0===this.indexOf("select2-")&&s.push(this)})),r=i.attr("class"),r&&(r=""+r,e(r.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(o=n(this),o&&s.push(this))})),t.attr("class",s.join(" "))}function b(e,t,i,n){var r=e.toUpperCase().indexOf(t.toUpperCase()),o=t.length;return 0>r?(i.push(n(e)),void 0):(i.push(n(e.substring(0,r))),i.push("<span class='select2-match'>"),i.push(n(e.substring(r,r+o))),i.push("</span>"),i.push(n(e.substring(r+o,e.length))),void 0)}function y(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function _(i){var n,r=0,o=null,s=i.quietMillis||100,a=i.url,l=this;return function(c){window.clearTimeout(n),n=window.setTimeout(function(){r+=1;var n=r,s=i.data,u=a,d=i.transport||e.fn.select2.ajaxDefaults.transport,h={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},p=e.extend({},e.fn.select2.ajaxDefaults.params,h);s=s?s.call(l,c.term,c.page,c.context):null,u="function"==typeof u?u.call(l,c.term,c.page,c.context):u,o&&o.abort(),i.params&&(e.isFunction(i.params)?e.extend(p,i.params.call(l)):e.extend(p,i.params)),e.extend(p,{url:u,dataType:i.dataType,data:s,success:function(e){if(!(r>n)){var t=i.results(e,c.page);c.callback(t)}}}),o=d.call(l,p)},s)}}function w(t){var i,n,r=t,o=function(e){return""+e.text};e.isArray(r)&&(n=r,r={results:n}),e.isFunction(r)===!1&&(n=r,r=function(){return n});var s=r();return s.text&&(o=s.text,e.isFunction(o)||(i=s.text,o=function(e){return e[i]})),function(t){var i,n=t.term,s={results:[]};return""===n?(t.callback(r()),void 0):(i=function(r,s){var a,l;if(r=r[0],r.children){a={};for(l in r)r.hasOwnProperty(l)&&(a[l]=r[l]);a.children=[],e(r.children).each2(function(e,t){i(t,a.children)}),(a.children.length||t.matcher(n,o(a),r))&&s.push(a)}else t.matcher(n,o(r),r)&&s.push(r)},e(r().results).each2(function(e,t){i(t,s.results)}),t.callback(s),void 0)}}function x(i){var n=e.isFunction(i);return function(r){var o=r.term,s={results:[]};e(n?i():i).each(function(){var e=this.text!==t,i=e?this.text:this;(""===o||r.matcher(o,i))&&s.results.push(e?this:{id:this,text:this})}),r.callback(s)}}function k(t,i){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(i+" must be a function or a falsy value")}function C(t){return e.isFunction(t)?t():t}function S(t){var i=0;return e.each(t,function(e,t){t.children?i+=S(t.children):i++}),i}function $(e,i,n,o){var s,a,l,c,u,d=e,h=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return t;for(;;){for(a=-1,l=0,c=o.tokenSeparators.length;c>l&&(u=o.tokenSeparators[l],a=e.indexOf(u),!(a>=0));l++);if(0>a)break;if(s=e.substring(0,a),e=e.substring(a+u.length),s.length>0&&(s=o.createSearchChoice.call(this,s,i),s!==t&&null!==s&&o.id(s)!==t&&null!==o.id(s))){for(h=!1,l=0,c=i.length;c>l;l++)if(r(o.id(s),o.id(i[l]))){h=!0;break}h||n(s)}}return d!==e?e:void 0}function T(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}if(window.Select2===t){var E,D,I,A,j,M,P,q,L={x:0,y:0},E={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case E.LEFT:case E.RIGHT:case E.UP:case E.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case E.SHIFT:case E.CTRL:case E.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},O="<div class='select2-measure-scrollbar'></div>";P=e(document),j=function(){var e=1;return function(){return e++}}(),P.on("mousemove",function(e){L.x=e.pageX,L.y=e.pageY}),D=T(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var r,o,s,c,h=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+j()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=u(function(){return i.element.closest("body")}),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(C(i.containerCss)),this.container.addClass(C(i.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(C(i.dropdownCssClass)),this.dropdown.data("select2",this),this.results=r=this.container.find(h),this.search=o=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),l(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",h,this.bind(this.highlightUnderEvent)),d(80,this.results),this.dropdown.on("scroll-debounced",h,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&r.mousewheel(function(e,t,i,n){var o=r.scrollTop();n>0&&0>=o-n?(r.scrollTop(0),f(e)):0>n&&r.get(0).scrollHeight-r.scrollTop()+n<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),f(e))}),a(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",h,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var s=i.element.prop("disabled");s===t&&(s=!1),this.enable(!s);var c=i.element.prop("readonly");c===t&&(c=!1),this.readonly(c),q=q||n(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus()},destroy:function(){var e=this.opts.element,i=e.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),i!==t&&(i.container.remove(),i.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:r(e.attr("locked"),"locked")||r(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(i){var n,s,a,l,c=this;if(n=i.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=s=i.element),s&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=e.extend({},{populateResults:function(n,r,o){var s,a=this.opts.id;s=function(n,r,l){var u,d,h,p,f,m,g,v,b,y;for(n=i.sortResults(n,r,o),u=0,d=n.length;d>u;u+=1)h=n[u],f=h.disabled===!0,p=!f&&a(h)!==t,m=h.children&&h.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+l),g.addClass("select2-result"),g.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(c.opts.formatResultCssClass(h)),v=e(document.createElement("div")),v.addClass("select2-result-label"),y=i.formatResult(h,v,o,c.opts.escapeMarkup),y!==t&&v.html(y),g.append(v),m&&(b=e("<ul></ul>"),b.addClass("select2-result-sub"),s(h.children,b,l+1),g.append(b)),g.data("select2-data",h),r.append(g)},s(r,n,0)}},e.fn.select2.defaults,i),"function"!=typeof i.id&&(a=i.id,i.id=function(e){return e[a]}),e.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(s?(i.query=this.bind(function(e){var i,r,o,s={results:[],more:!1},a=e.term;o=function(t,i){var n;t.is("option")?e.matcher(a,t.text(),t)&&i.push(c.optionToData(t)):t.is("optgroup")&&(n=c.optionToData(t),t.children().each2(function(e,t){o(t,n.children)}),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==t&&i.length>0&&(r=this.getPlaceholderOption(),r&&(i=i.not(r))),i.each2(function(e,t){o(t,s.results)}),e.callback(s)}),i.id=function(e){return e.id},i.formatResultCssClass=function(e){return e.css}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=_.call(i.element,i.ajax)):"data"in i?i.query=w(i.data):"tags"in i&&(i.query=x(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(e){return{id:e,text:e}}),i.initSelection===t&&(i.initSelection=function(t,n){var s=[];e(o(t.val(),i.separator)).each(function(){var t=this,n=this,o=i.tags;e.isFunction(o)&&(o=o()),e(o).each(function(){return r(this.id,t)?(n=this.text,!1):void 0}),s.push({id:t,text:n})}),n(s)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");return i},monitorSource:function(){var e,i=this.opts.element;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e,n=i.prop("disabled");n===t&&(n=!1),this.enable(!n);var e=i.prop("readonly");e===t&&(e=!1),this.readonly(e),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(C(this.opts.containerCssClass)),v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(C(this.opts.dropdownCssClass))}),i.on("propertychange.select2 DOMAttrModified.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){return e===t&&(e=!0),this._enabled===e?!1:(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface(),!0)},readonly:function(e){return e===t&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,i,n,r,o=this.dropdown,s=this.container.offset(),a=this.container.outerHeight(!1),l=this.container.outerWidth(!1),c=o.outerHeight(!1),u=e(window).scrollLeft()+e(window).width(),d=e(window).scrollTop()+e(window).height(),h=s.top+a,p=s.left,f=d>=h+c,m=s.top-c>=this.body().scrollTop(),g=o.outerWidth(!1),v=u>=p+g,b=o.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(r=e(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),g=o.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:q.width),g>l?l=g:g=l,v=u>=p+g):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(t=this.body().offset(),h-=t.top,p-=t.left),b?(i=!0,!m&&f&&(i=!1)):(i=!1,!f&&m&&(i=!0)),v||(p=s.left+l-g),i?(h=s.top-c,this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),n=e.extend({top:h,left:p,width:l},C(this.opts.dropdownCss)),o.css(n)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){function t(){return{width:Math.max(document.documentElement.scrollWidth,e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var i,n,r=this.containerId,o="scroll."+r,s="resize."+r,a="orientationchange."+r;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),i=e("#select2-drop-mask"),0==i.length&&(i=e(document.createElement("div")),i.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),i.hide(),i.appendTo(this.body()),i.on("mousedown touchstart click",function(t){var i,n=e("#select2-drop");n.length>0&&(i=n.data("select2"),i.opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==i[0]&&this.dropdown.before(i),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),n=t(),i.css(n).show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var l=this;this.container.parents().add(window).each(function(){e(this).on(s+" "+o+" "+a,function(){var i=t();e("#select2-drop-mask").css(i),l.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,i="scroll."+t,n="resize."+t,r="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(i).off(n).off(r)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return C(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,i,n,r,o,s,a,l=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return l.scrollTop(0),void 0;t=this.findHighlightableChoices().find(".select2-result-label"),n=e(t[i]),r=n.offset().top+n.outerHeight(!0),i===t.length-1&&(a=l.find("li.select2-more-results"),a.length>0&&(r=a.offset().top+a.outerHeight(!0))),o=l.offset().top+l.outerHeight(!0),r>o&&l.scrollTop(l.scrollTop()+(r-o)),s=n.offset().top-l.offset().top,0>s&&"none"!=n.css("display")&&l.scrollTop(l.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){n+=t;var r=e(i[n]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(t){var n,r,o=this.findHighlightableChoices();return 0===arguments.length?i(o.filter(".select2-highlighted")[0],o.get()):(t>=o.length&&(t=o.length-1),0>t&&(t=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),n=e(o[t]),n.addClass("select2-highlighted"),this.ensureHighlightVisible(),r=n.data("select2-data"),r&&this.opts.element.trigger({type:"select2-highlight",val:this.id(r),choice:r}),void 0)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,i=t.find("li.select2-more-results"),n=this.resultsPage+1,r=this,o=this.search.val(),s=this.context;0!==i.length&&(e=i.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:n,context:s,matcher:this.opts.matcher,callback:this.bind(function(e){r.opened()&&(r.opts.populateResults.call(this,t,e.results,{term:o,page:n,context:s}),r.postprocessResults(e,!1,!1),e.more===!0?(i.detach().appendTo(t).text(r.opts.formatLoadMore(n+1)),window.setTimeout(function(){r.loadMoreIfNeeded()
},10)):i.remove(),r.positionDropdown(),r.resultsPage=n,r.context=e.context)})})))},tokenize:function(){},updateResults:function(i){function n(){l.removeClass("select2-active"),d.positionDropdown()}function o(e){c.html(e),n()}var s,a,l=this.search,c=this.results,u=this.opts,d=this,h=l.val(),p=e.data(this.container,"select2-last-term");if((i===!0||!p||!r(h,p))&&(e.data(this.container,"select2-last-term",h),i===!0||this.showSearchInput!==!1&&this.opened())){var f=this.getMaximumSelectionSize();if(f>=1&&(s=this.data(),e.isArray(s)&&s.length>=f&&k(u.formatSelectionTooBig,"formatSelectionTooBig")))return o("<li class='select2-selection-limit'>"+u.formatSelectionTooBig(f)+"</li>"),void 0;if(l.val().length<u.minimumInputLength)return k(u.formatInputTooShort,"formatInputTooShort")?o("<li class='select2-no-results'>"+u.formatInputTooShort(l.val(),u.minimumInputLength)+"</li>"):o(""),i&&this.showSearch&&this.showSearch(!0),void 0;if(u.maximumInputLength&&l.val().length>u.maximumInputLength)return k(u.formatInputTooLong,"formatInputTooLong")?o("<li class='select2-no-results'>"+u.formatInputTooLong(l.val(),u.maximumInputLength)+"</li>"):o(""),void 0;u.formatSearching&&0===this.findHighlightableChoices().length&&o("<li class='select2-searching'>"+u.formatSearching()+"</li>"),l.addClass("select2-active"),a=this.tokenize(),a!=t&&null!=a&&l.val(a),this.resultsPage=1,u.query({element:u.element,term:l.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(s){var a;return this.opened()?(this.context=s.context===t?null:s.context,this.opts.createSearchChoice&&""!==l.val()&&(a=this.opts.createSearchChoice.call(d,l.val(),s.results),a!==t&&null!==a&&d.id(a)!==t&&null!==d.id(a)&&0===e(s.results).filter(function(){return r(d.id(this),d.id(a))}).length&&s.results.unshift(a)),0===s.results.length&&k(u.formatNoMatches,"formatNoMatches")?(o("<li class='select2-no-results'>"+u.formatNoMatches(l.val())+"</li>"),void 0):(c.empty(),d.opts.populateResults.call(this,c,s.results,{term:l.val(),page:this.resultsPage,context:null}),s.more===!0&&k(u.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+d.opts.escapeMarkup(u.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){d.loadMoreIfNeeded()},10)),this.postprocessResults(s,i),n(),this.opts.element.trigger({type:"select2-loaded",items:s}),void 0)):(this.search.removeClass("select2-active"),void 0)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){h(this.search)},selectHighlighted:function(e){var t=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children().first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},initContainerWidth:function(){function i(){var i,n,r,o,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==t)for(n=i.split(";"),o=0,s=n.length;s>o;o+=1)if(r=n[o].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==r&&r.length>=1)return r[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=i.call(this);null!==n&&this.container.css("width",n)}}),I=T(D,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,i,n;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),t=this.search.get(0),t.createTextRange?(i=t.createTextRange(),i.collapse(!1),i.select()):t.setSelectionRange&&(n=this.search.val().length,t.setSelectionRange(n,n)),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var t,i=this.container,n=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+j()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===E.PAGE_UP||e.which===E.PAGE_DOWN)return f(e),void 0;switch(e.which){case E.UP:case E.DOWN:return this.moveHighlight(e.which===E.UP?-1:1),f(e),void 0;case E.ENTER:return this.selectHighlighted(),f(e),void 0;case E.TAB:return this.selectHighlighted({noFocus:!0}),void 0;case E.ESC:return this.cancel(e),f(e),void 0}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==E.TAB&&!E.isControl(e)&&!E.isFunctionKey(e)&&e.which!==E.ESC){if(this.opts.openOnEnter===!1&&e.which===E.ENTER)return f(e),void 0;if(e.which==E.DOWN||e.which==E.UP||e.which==E.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),f(e),void 0}return e.which==E.DELETE||e.which==E.BACKSPACE?(this.opts.allowClear&&this.clear(),f(e),void 0):void 0}})),a(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),m(e),this.close(),this.selection.focus())})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),f(t)})),n.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){f(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var t=this.selection.data("select2-data");if(t){var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection([]),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return(e=this.getPlaceholderOption())!==t&&e.is(":selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=e.find(":selected");t(i.optionToData(n))}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var o=i.val(),s=null;t.query({matcher:function(e,i,n){var a=r(o,t.id(n));return a&&(s=n),a},callback:e.isFunction(n)?function(){n(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,i){var n=0,o=this;if(this.findHighlightableChoices().each2(function(e,t){return r(o.id(t.data("select2-data")),o.opts.element.val())?(n=e,!1):void 0}),i!==!1&&(t===!0&&n>=0?this.highlight(n):this.highlight(0)),t===!0){var s=this.opts.minimumResultsForSearch;s>=0&&this.showSearch(S(e.results)>=s)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.close(),t&&t.noFocus||this.selection.focus(),r(i,this.id(e))||this.triggerChange({added:e,removed:n})}},updateSelection:function(e){var i,n,r=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),r.empty(),i=this.opts.formatSelection(e,r,this.opts.escapeMarkup),i!==t&&r.append(i),n=this.opts.formatSelectionCssClass(e,r),n!==t&&r.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,i=!1,n=null,r=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(e).find(":selected").each2(function(e,t){return n=r.optionToData(t),!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:o});else{if(!e&&0!==e)return this.clear(i),void 0;if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){r.opts.element.val(e?r.id(e):""),r.updateSelection(e),r.setPlaceholder(),i&&r.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e,i){var n;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(e&&""!==e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i),void 0)}}),A=T(D,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=[];e.find(":selected").each2(function(e,t){n.push(i.optionToData(t))}),t(n)}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var s=o(i.val(),t.separator),a=[];t.query({matcher:function(i,n,o){var l=e.grep(s,function(e){return r(e,t.id(o))}).length;return l&&a.push(o),l},callback:e.isFunction(n)?function(){for(var e=[],i=0;i<s.length;i++)for(var o=s[i],l=0;l<a.length;l++){var c=a[l];if(r(o,t.id(c))){e.push(c),a.splice(l,1);break}}n(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},initContainer:function(){var t,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(i);var n=this;this.selection.on("mousedown",".select2-search-choice",function(){n.search[0].focus(),n.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+j()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),r=i.next(".select2-search-choice:not(.select2-locked)"),o=p(this.search);if(i.length&&(e.which==E.LEFT||e.which==E.RIGHT||e.which==E.BACKSPACE||e.which==E.DELETE||e.which==E.ENTER)){var s=i;return e.which==E.LEFT&&n.length?s=n:e.which==E.RIGHT?s=r.length?r:null:e.which===E.BACKSPACE?(this.unselect(i.first()),this.search.width(10),s=n.length?n:r):e.which==E.DELETE?(this.unselect(i.first()),this.search.width(10),s=r.length?r:null):e.which==E.ENTER&&(s=null),this.selectChoice(s),f(e),s&&s.length||this.open(),void 0}if((e.which===E.BACKSPACE&&1==this.keydowns||e.which==E.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),f(e),void 0;if(this.selectChoice(null),this.opened())switch(e.which){case E.UP:case E.DOWN:return this.moveHighlight(e.which===E.UP?-1:1),f(e),void 0;case E.ENTER:return this.selectHighlighted(),f(e),void 0;case E.TAB:return this.selectHighlighted({noFocus:!0}),this.close(),void 0;case E.ESC:return this.cancel(e),f(e),void 0}if(e.which!==E.TAB&&!E.isControl(e)&&!E.isFunctionKey(e)&&e.which!==E.BACKSPACE&&e.which!==E.ESC){if(e.which===E.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===E.PAGE_UP||e.which===E.PAGE_DOWN)&&f(e),e.which===E.ENTER&&f(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),i=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],r=[],o=this;e(t).each(function(){i(o.id(this),n)<0&&(n.push(o.id(this)),r.push(this))}),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,r,o=!i.locked,s=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?s:a,c=this.id(i),u=this.getVal();n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),n!=t&&l.find("div").replaceWith("<div>"+n+"</div>"),r=this.opts.formatSelectionCssClass(i,l.find("div")),r!=t&&l.addClass(r),o&&l.find(".select2-search-choice-close").on("mousedown",f).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),f(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),u.push(c),this.setVal(u)},unselect:function(e){var t,n,r=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),t&&(n=i(this.id(t),r),n>=0&&(r.splice(n,1),this.setVal(r),this.select&&this.postprocessResults()),e.remove(),this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))},postprocessResults:function(e,t,n){var r=this.getVal(),o=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;o.each2(function(e,t){var n=a.id(t.data("select2-data"));i(n,r)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&k(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+a.opts.formatNoMatches(a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-s(this.search)},resizeSearch:function(){var e,t,i,n,r,o=s(this.search);e=g(this.search)+10,t=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,r=i-(t-n)-o,e>r&&(r=i-o),40>r&&(r=i-o),0>=r&&(r=e),this.search.width(r)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),o(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){i(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),i=0;i<t.length;i++)for(var n=0;n<e.length;n++)r(this.opts.id(t[i]),this.opts.id(e[n]))&&(t.splice(i,1),i--,e.splice(n,1),n--);return{added:t,removed:e}},val:function(i,n){var r,o=this;if(0===arguments.length)return this.getVal();if(r=this.data(),r.length||(r=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),n&&this.triggerChange({added:this.data(),removed:r}),void 0;if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=e.map(t,o.id);o.setVal(i),o.updateSelection(t),o.clearSearch(),n&&o.triggerChange(this.buildChangeDetails(r,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,i){var n,r,o=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(r=this.data(),t||(t=[]),n=e.map(t,function(e){return o.opts.id(e)}),this.setVal(n),this.updateSelection(t),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(r,this.data())),void 0)}}),e.fn.select2=function(){var n,r,o,s,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","readonly","positionDropdown","data","search"],u=["val","opened","isFocused","container","data"],d={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])n=0===l.length?{}:e.extend({},l[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),r=a?new A:new I,r.init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(i(l[0],c)<0)throw"Unknown method: "+l[0];if(s=t,r=e(this).data("select2"),r===t)return;if(o=l[0],"container"===o?s=r.container:"dropdown"===o?s=r.dropdown:(d[o]&&(o=d[o]),s=r[o].apply(r,l.slice(1))),i(l[0],u)>=0)return!1}}),s===t?this:s},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var r=[];return b(e.text,i.term,r,n),r.join("")},formatSelection:function(e,i,n){return e?n(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatSelectionCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:$,escapeMarkup:y,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:_,local:w,tags:x},util:{debounce:c,markMatch:b,escapeMarkup:y},"class":{"abstract":D,single:I,multi:A}}}}(jQuery),define("jquery-plugins/jquery.select2",function(){}),function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function i(e){for(;e=e.parentNode;)if(e==document)return!0;return!1}function n(){var e=o++;return"tipsyuid"+e}function r(t,i){this.$element=e(t),this.options=i,this.enabled=!0,this.fixTitle()}var o=0;r.prototype={show:function(){function i(){a.hoverTooltip=!0}function r(){if("in"!=a.hoverState&&(a.hoverTooltip=!1,"manual"!=a.options.trigger)){var e="hover"==a.options.trigger?"mouseleave.tipsy":"blur.tipsy";a.$element.trigger(e)}}var o=this.getTitle();if(o&&this.enabled){var s=this.tip();s.find(".tipsy-inner")[this.options.html?"html":"text"](o),s[0].className="tipsy",s.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var a=this;this.options.hoverable&&s.hover(i,r);var l,c=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),u=s[0].offsetWidth,d=s[0].offsetHeight,h=t(this.options.gravity,this.$element[0]);switch(h.charAt(0)){case"n":l={top:c.top+c.height+this.options.offset,left:c.left+c.width/2-u/2};break;case"s":l={top:c.top-d-this.options.offset,left:c.left+c.width/2-u/2};break;case"e":l={top:c.top+c.height/2-d/2,left:c.left-u-this.options.offset};break;case"w":l={top:c.top+c.height/2-d/2,left:c.left+c.width+this.options.offset}}if(2==h.length&&(l.left="w"==h.charAt(1)?c.left+c.width/2-15:c.left+c.width/2-u+15),s.css(l).addClass("tipsy-"+h),s.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+h.charAt(0),this.options.className&&s.addClass(t(this.options.className,this.$element[0])),this.options.fade?s.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):s.css({visibility:"visible",opacity:this.options.opacity}),this.options.aria){var p=n();s.attr("id",p),this.$element.attr("aria-describedby",p)}}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove(),this.options.aria&&this.$element.removeAttr("aria-describedby")},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,i=this.options;this.fixTitle();var e,i=this.options;return"string"==typeof i.title?e=t.attr("title"==i.title?"original-title":i.title):"function"==typeof i.title&&(e=i.title.call(t[0])),e=(""+e).replace(/(^\s*|\s*$)/,""),e||i.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>').attr("role","tooltip"),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){function i(i){var n=e.data(i,"tipsy");return n||(n=new r(i,e.fn.tipsy.elementOptions(i,t)),e.data(i,"tipsy",n)),n}function n(){var e=i(this);e.hoverState="in",0==t.delayIn?e.show():(e.fixTitle(),setTimeout(function(){"in"==e.hoverState&&e.show()},t.delayIn))}function o(){var e=i(this);e.hoverState="out",0==t.delayOut?e.hide():setTimeout(function(){"out"!=e.hoverState||e.hoverTooltip||e.hide()},t.delayOut)}if(t===!0)return this.data("tipsy");if("string"==typeof t){var s=this.data("tipsy");return s&&s[t](),this}if(t=e.extend({},e.fn.tipsy.defaults,t),t.hoverable&&(t.delayOut=t.delayOut||20),t.live||this.each(function(){i(this)}),"manual"!=t.trigger){var a="hover"==t.trigger?"mouseenter.tipsy":"focus.tipsy",l="hover"==t.trigger?"mouseleave.tipsy":"blur.tipsy";t.live?e(this.context).on(a,this.selector,n).on(l,this.selector,o):this.bind(a,n).bind(l,o)}return this},e.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,hoverable:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},e.fn.tipsy.revalidate=function(){e(".tipsy").each(function(){var t=e.data(this,"tipsy-pointee");t&&i(t)||e(this).remove()})},e.fn.tipsy.elementOptions=function(t,i){return e.metadata?e.extend({},i,e(t).metadata()):i},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoBounds=function(t,i){return function(){var n={ns:i[0],ew:i.length>1?i[1]:!1},r=e(document).scrollTop()+t,o=e(document).scrollLeft()+t,s=e(this);return s.offset().top<r&&(n.ns="n"),s.offset().left<o&&(n.ew="w"),e(window).width()+e(document).scrollLeft()-s.offset().left<t&&(n.ew="e"),e(window).height()+e(document).scrollTop()-s.offset().top<t&&(n.ns="s"),n.ns+(n.ew?n.ew:"")
}}}(jQuery),function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var i=e([0]),n=-1,r=this.length;++n<r&&(i.context=i[0]=this[n])&&t.call(i[0],n,i)!==!1;);return this}})}(jQuery),function(e,t){function i(e){var t,i,n,r;if(!e||e.length<1)return e;for(t="",i=0,n=e.length;n>i;i++)r=e.charAt(i),t+=z[r]||r;return t}function n(e,t){for(var i=0,n=t.length;n>i;i+=1)if(o(e,t[i]))return i;return-1}function r(){var t=e(R);t.appendTo("body");var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}function o(e,i){return e===i?!0:e===t||i===t?!1:null===e||null===i?!1:e.constructor===String?e+""==i+"":i.constructor===String?i+""==e+"":!1}function s(t,i){var n,r,o;if(null===t||t.length<1)return[];for(n=t.split(i),r=0,o=n.length;o>r;r+=1)n[r]=e.trim(n[r]);return n}function a(e){return e.outerWidth(!1)-e.width()}function l(i){var n="keyup-change-value";i.on("keydown",function(){e.data(i,n)===t&&e.data(i,n,i.val())}),i.on("keyup",function(){var r=e.data(i,n);r!==t&&i.val()!==r&&(e.removeData(i,n),i.trigger("keyup-change"))})}function c(i){i.on("mousemove",function(i){var n=O;(n===t||n.x!==i.pageX||n.y!==i.pageY)&&e(i.target).trigger("mousemove-filtered",i)})}function u(e,i,n){n=n||t;var r;return function(){var t=arguments;window.clearTimeout(r),r=window.setTimeout(function(){i.apply(n,t)},e)}}function d(e){var t,i=!1;return function(){return i===!1&&(t=e(),i=!0),t}}function h(e,t){var i=u(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){n(e.target,t.get())>=0&&i(e)})}function p(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,i=e[0],n=e.val().length;e.focus(),e.is(":visible")&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&(t=i.createTextRange(),t.collapse(!1),t.select()))},0)}function f(t){t=e(t)[0];var i=0,n=0;if("selectionStart"in t)i=t.selectionStart,n=t.selectionEnd-i;else if("selection"in document){t.focus();var r=document.selection.createRange();n=document.selection.createRange().text.length,r.moveStart("character",-t.value.length),i=r.text.length-n}return{offset:i,length:n}}function m(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function v(t){if(!P){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);P=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),P.attr("class","select2-sizer"),e("body").append(P)}return P.text(t.val()),P.width()}function b(t,i,n){var r,o,s=[];r=t.attr("class"),r&&(r=""+r,e(r.split(" ")).each2(function(){0===this.indexOf("select2-")&&s.push(this)})),r=i.attr("class"),r&&(r=""+r,e(r.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(o=n(this),o&&s.push(o))})),t.attr("class",s.join(" "))}function y(e,t,n,r){var o=i(e.toUpperCase()).indexOf(i(t.toUpperCase())),s=t.length;return 0>o?(n.push(r(e)),void 0):(n.push(r(e.substring(0,o))),n.push("<span class='select2-match'>"),n.push(r(e.substring(o,o+s))),n.push("</span>"),n.push(r(e.substring(o+s,e.length))),void 0)}function _(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function w(i){var n,r=null,o=i.quietMillis||100,s=i.url,a=this;return function(l){window.clearTimeout(n),n=window.setTimeout(function(){var n=i.data,o=s,c=i.transport||e.fn.select2.ajaxDefaults.transport,u={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,u);n=n?n.call(a,l.term,l.page,l.context):null,o="function"==typeof o?o.call(a,l.term,l.page,l.context):o,r&&r.abort(),i.params&&(e.isFunction(i.params)?e.extend(d,i.params.call(a)):e.extend(d,i.params)),e.extend(d,{url:o,dataType:i.dataType,data:n,success:function(e){var t=i.results(e,l.page);l.callback(t)}}),r=c.call(a,d)},o)}}function x(t){var i,n,r=t,o=function(e){return""+e.text};e.isArray(r)&&(n=r,r={results:n}),e.isFunction(r)===!1&&(n=r,r=function(){return n});var s=r();return s.text&&(o=s.text,e.isFunction(o)||(i=s.text,o=function(e){return e[i]})),function(t){var i,n=t.term,s={results:[]};return""===n?(t.callback(r()),void 0):(i=function(r,s){var a,l;if(r=r[0],r.children){a={};for(l in r)r.hasOwnProperty(l)&&(a[l]=r[l]);a.children=[],e(r.children).each2(function(e,t){i(t,a.children)}),(a.children.length||t.matcher(n,o(a),r))&&s.push(a)}else t.matcher(n,o(r),r)&&s.push(r)},e(r().results).each2(function(e,t){i(t,s.results)}),t.callback(s),void 0)}}function k(i){var n=e.isFunction(i);return function(r){var o=r.term,s={results:[]};e(n?i():i).each(function(){var e=this.text!==t,i=e?this.text:this;(""===o||r.matcher(o,i))&&s.results.push(e?this:{id:this,text:this})}),r.callback(s)}}function C(t,i){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(i+" must be a function or a falsy value")}function S(t){return e.isFunction(t)?t():t}function $(t){var i=0;return e.each(t,function(e,t){t.children?i+=$(t.children):i++}),i}function T(e,i,n,r){var s,a,l,c,u,d=e,h=!1;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return t;for(;;){for(a=-1,l=0,c=r.tokenSeparators.length;c>l&&(u=r.tokenSeparators[l],a=e.indexOf(u),!(a>=0));l++);if(0>a)break;if(s=e.substring(0,a),e=e.substring(a+u.length),s.length>0&&(s=r.createSearchChoice.call(this,s,i),s!==t&&null!==s&&r.id(s)!==t&&null!==r.id(s))){for(h=!1,l=0,c=i.length;c>l;l++)if(o(r.id(s),r.id(i[l]))){h=!0;break}h||n(s)}}return d!==e?e:void 0}function E(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}if(window.Select2===t){var D,I,A,j,M,P,q,L,O={x:0,y:0},D={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case D.LEFT:case D.RIGHT:case D.UP:case D.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case D.SHIFT:case D.CTRL:case D.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},R="<div class='select2-measure-scrollbar'></div>",z={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"};q=e(document),M=function(){var e=1;return function(){return e++}}(),q.on("mousemove",function(e){O.x=e.pageX,O.y=e.pageY}),I=E(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var n,o,s=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+M()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=d(function(){return i.element.closest("body")}),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(S(i.containerCss)),this.container.addClass(S(i.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(i.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=n=this.container.find(s),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),c(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",s,this.bind(this.highlightUnderEvent)),h(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&n.mousewheel(function(e,t,i,r){var o=n.scrollTop();r>0&&0>=o-r?(n.scrollTop(0),m(e)):0>r&&n.get(0).scrollHeight-n.scrollTop()+r<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),m(e))}),l(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",s,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var a=i.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var u=i.element.prop("readonly");u===t&&(u=!1),this.readonly(u),L=L||r(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.nextSearchTerm=t},destroy:function(){var e=this.opts.element,i=e.data("select2");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),i!==t&&(i.container.remove(),i.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:o(e.attr("locked"),"locked")||o(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(i){var n,r,a,l,c=this;if(n=i.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=r=i.element),r&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=e.extend({},{populateResults:function(n,r,o){var s,a=this.opts.id;s=function(n,r,l){var u,d,h,p,f,m,g,v,b,y;for(n=i.sortResults(n,r,o),u=0,d=n.length;d>u;u+=1)h=n[u],f=h.disabled===!0,p=!f&&a(h)!==t,m=h.children&&h.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+l),g.addClass("select2-result"),g.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(c.opts.formatResultCssClass(h)),v=e(document.createElement("div")),v.addClass("select2-result-label"),y=i.formatResult(h,v,o,c.opts.escapeMarkup),y!==t&&v.html(y),g.append(v),m&&(b=e("<ul></ul>"),b.addClass("select2-result-sub"),s(h.children,b,l+1),g.append(b)),g.data("select2-data",h),r.append(g)},s(r,n,0)}},e.fn.select2.defaults,i),"function"!=typeof i.id&&(a=i.id,i.id=function(e){return e[a]}),e.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(r?(i.query=this.bind(function(e){var i,r,o,s={results:[],more:!1},a=e.term;o=function(t,i){var n;t.is("option")?e.matcher(a,t.text(),t)&&i.push(c.optionToData(t)):t.is("optgroup")&&(n=c.optionToData(t),t.children().each2(function(e,t){o(t,n.children)}),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==t&&i.length>0&&(r=this.getPlaceholderOption(),r&&(i=i.not(r))),i.each2(function(e,t){o(t,s.results)}),e.callback(s)}),i.id=function(e){return e.id},i.formatResultCssClass=function(e){return e.css}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=w.call(i.element,i.ajax)):"data"in i?i.query=x(i.data):"tags"in i&&(i.query=k(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),i.initSelection===t&&(i.initSelection=function(t,n){var r=[];e(s(t.val(),i.separator)).each(function(){var t={id:this,text:this},n=i.tags;e.isFunction(n)&&(n=n()),e(n).each(function(){return o(this.id,t.id)?(t=this,!1):void 0}),r.push(t)}),n(r)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");return i},monitorSource:function(){var e,i,n=this.opts.element;n.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e=n.prop("disabled");e===t&&(e=!1),this.enable(!e);var i=n.prop("readonly");i===t&&(i=!1),this.readonly(i),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(S(this.opts.containerCssClass)),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(this.opts.dropdownCssClass))}),n.on("propertychange.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i(this.mutationCallback),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){return e===t&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,i,n,r,o,s=this.dropdown,a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=s.outerHeight(!1),d=e(window),h=d.width(),p=d.height(),f=d.scrollLeft()+h,m=d.scrollTop()+p,g=a.top+l,v=a.left,b=m>=g+u,y=a.top-u>=this.body().scrollTop(),_=s.outerWidth(!1),w=f>=v+_,x=s.hasClass("select2-drop-above");x?(i=!0,!y&&b&&(n=!0,i=!1)):(i=!1,!b&&y&&(n=!0,i=!0)),n&&(s.hide(),a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=s.outerHeight(!1),f=d.scrollLeft()+h,m=d.scrollTop()+p,g=a.top+l,v=a.left,_=s.outerWidth(!1),w=f>=v+_,s.show()),this.opts.dropdownAutoWidth?(o=e(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),_=s.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:L.width),_>c?c=_:_=c,w=f>=v+_):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(t=this.body().offset(),g-=t.top,v-=t.left),w||(v=a.left+c-_),r={left:v,width:c},i?(r.bottom=p-a.top,r.top="auto",this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above")):(r.top=g,r.bottom="auto",this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),r=e.extend(r,S(this.opts.dropdownCss)),s.css(r)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){var t,i=this.containerId,n="scroll."+i,r="resize."+i,o="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),t=e("#select2-drop-mask"),0==t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body()),t.on("mousedown touchstart click",function(t){var i,n=e("#select2-drop");n.length>0&&(i=n.data("select2"),i.opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close({focus:!0}),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var s=this;this.container.parents().add(window).each(function(){e(this).on(r+" "+n+" "+o,function(){s.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,i="scroll."+t,n="resize."+t,r="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(i).off(n).off(r)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return S(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,i,n,r,o,s,a,l=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return l.scrollTop(0),void 0;t=this.findHighlightableChoices().find(".select2-result-label"),n=e(t[i]),r=n.offset().top+n.outerHeight(!0),i===t.length-1&&(a=l.find("li.select2-more-results"),a.length>0&&(r=a.offset().top+a.outerHeight(!0))),o=l.offset().top+l.outerHeight(!0),r>o&&l.scrollTop(l.scrollTop()+(r-o)),s=n.offset().top-l.offset().top,0>s&&"none"!=n.css("display")&&l.scrollTop(l.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){n+=t;var r=e(i[n]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(t){var i,r,o=this.findHighlightableChoices();return 0===arguments.length?n(o.filter(".select2-highlighted")[0],o.get()):(t>=o.length&&(t=o.length-1),0>t&&(t=0),this.removeHighlight(),i=e(o[t]),i.addClass("select2-highlighted"),this.ensureHighlightVisible(),r=i.data("select2-data"),r&&this.opts.element.trigger({type:"select2-highlight",val:this.id(r),choice:r}),void 0)},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e,t=this.results,i=t.find("li.select2-more-results"),n=this.resultsPage+1,r=this,o=this.search.val(),s=this.context;0!==i.length&&(e=i.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:n,context:s,matcher:this.opts.matcher,callback:this.bind(function(e){r.opened()&&(r.opts.populateResults.call(this,t,e.results,{term:o,page:n,context:s}),r.postprocessResults(e,!1,!1),e.more===!0?(i.detach().appendTo(t).text(r.opts.formatLoadMore(n+1)),window.setTimeout(function(){r.loadMoreIfNeeded()},10)):i.remove(),r.positionDropdown(),r.resultsPage=n,r.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})})))},tokenize:function(){},updateResults:function(i){function n(){c.removeClass("select2-active"),h.positionDropdown()}function r(e){u.html(e),n()}var s,a,l,c=this.search,u=this.results,d=this.opts,h=this,p=c.val(),f=e.data(this.container,"select2-last-term");if((i===!0||!f||!o(p,f))&&(e.data(this.container,"select2-last-term",p),i===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(s=this.data(),e.isArray(s)&&s.length>=m&&C(d.formatSelectionTooBig,"formatSelectionTooBig")))return r("<li class='select2-selection-limit'>"+d.formatSelectionTooBig(m)+"</li>"),void 0;if(c.val().length<d.minimumInputLength)return C(d.formatInputTooShort,"formatInputTooShort")?r("<li class='select2-no-results'>"+d.formatInputTooShort(c.val(),d.minimumInputLength)+"</li>"):r(""),i&&this.showSearch&&this.showSearch(!0),void 0;if(d.maximumInputLength&&c.val().length>d.maximumInputLength)return C(d.formatInputTooLong,"formatInputTooLong")?r("<li class='select2-no-results'>"+d.formatInputTooLong(c.val(),d.maximumInputLength)+"</li>"):r(""),void 0;d.formatSearching&&0===this.findHighlightableChoices().length&&r("<li class='select2-searching'>"+d.formatSearching()+"</li>"),c.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=t&&null!=a&&c.val(a),this.resultsPage=1,d.query({element:d.element,term:c.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(s){var a;if(l==this.queryCount){if(!this.opened())return this.search.removeClass("select2-active"),void 0;if(this.context=s.context===t?null:s.context,this.opts.createSearchChoice&&""!==c.val()&&(a=this.opts.createSearchChoice.call(h,c.val(),s.results),a!==t&&null!==a&&h.id(a)!==t&&null!==h.id(a)&&0===e(s.results).filter(function(){return o(h.id(this),h.id(a))}).length&&s.results.unshift(a)),0===s.results.length&&C(d.formatNoMatches,"formatNoMatches"))return r("<li class='select2-no-results'>"+d.formatNoMatches(c.val())+"</li>"),void 0;u.empty(),h.opts.populateResults.call(this,u,s.results,{term:c.val(),page:this.resultsPage,context:null}),s.more===!0&&C(d.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(d.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(s,i),n(),this.opts.element.trigger({type:"select2-loaded",items:s})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(e){var t=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},initContainerWidth:function(){function i(){var i,n,r,o,s,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==t)for(n=i.split(";"),o=0,s=n.length;s>o;o+=1)if(a=n[o].replace(/\s/g,""),r=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==r&&r.length>=1)return r[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=i.call(this);null!==n&&this.container.css("width",n)}}),A=E(I,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));
return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var i,n,r;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),i=this.search.get(0),i.createTextRange?(n=i.createTextRange(),n.collapse(!1),n.select()):i.setSelectionRange&&(r=this.search.val().length,i.setSelectionRange(r,r)),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(e){this.opened()&&(this.parent.close.apply(this,arguments),e=e||{focus:!0},this.focusser.removeAttr("disabled"),e.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,i=this.container,n=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+M()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)return m(e),void 0;switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),m(e),void 0;case D.ENTER:return this.selectHighlighted(),m(e),void 0;case D.TAB:return this.selectHighlighted({noFocus:!0}),void 0;case D.ESC:return this.cancel(e),m(e),void 0}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.ESC){if(this.opts.openOnEnter===!1&&e.which===D.ENTER)return m(e),void 0;if(e.which==D.DOWN||e.which==D.UP||e.which==D.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),m(e),void 0}return e.which==D.DELETE||e.which==D.BACKSPACE?(this.opts.allowClear&&this.clear(),m(e),void 0):void 0}})),l(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection.focus())})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(t)})),n.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var i=this.selection.data("select2-data");if(i){var n=e.Event("select2-clearing");if(this.opts.element.trigger(n),n.isDefaultPrevented())return;var r=this.getPlaceholderOption();this.opts.element.val(r?r.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()?(e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val():!1},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=e.find("option").filter(function(){return this.selected});t(i.optionToData(n))}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var r=i.val(),s=null;t.query({matcher:function(e,i,n){var a=o(r,t.id(n));return a&&(s=n),a},callback:e.isFunction(n)?function(){n(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,i){var n=0,r=this;if(this.findHighlightableChoices().each2(function(e,t){return o(r.id(t.data("select2-data")),r.opts.element.val())?(n=e,!1):void 0}),i!==!1&&(t===!0&&n>=0?this.highlight(n):this.highlight(0)),t===!0){var s=this.opts.minimumResultsForSearch;s>=0&&this.showSearch($(e.results)>=s)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||this.focusser.focus(),o(i,this.id(e))||this.triggerChange({added:e,removed:n})}},updateSelection:function(e){var i,n,r=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),r.empty(),null!==e&&(i=this.opts.formatSelection(e,r,this.opts.escapeMarkup)),i!==t&&r.append(i),n=this.opts.formatSelectionCssClass(e,r),n!==t&&r.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,i=!1,n=null,r=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return n=r.optionToData(t),!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:o});else{if(!e&&0!==e)return this.clear(i),void 0;if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){r.opts.element.val(e?r.id(e):""),r.updateSelection(e),r.setPlaceholder(),i&&r.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var i,n=!1;return 0===arguments.length?(i=this.selection.data("select2-data"),i==t&&(i=null),i):(arguments.length>1&&(n=arguments[1]),e?(i=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),n&&this.triggerChange({added:e,removed:i})):this.clear(n),void 0)}}),j=E(I,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=[];e.find("option").filter(function(){return this.selected}).each2(function(e,t){n.push(i.optionToData(t))}),t(n)}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var r=s(i.val(),t.separator),a=[];t.query({matcher:function(i,n,s){var l=e.grep(r,function(e){return o(e,t.id(s))}).length;return l&&a.push(s),l},callback:e.isFunction(n)?function(){for(var e=[],i=0;i<r.length;i++)for(var s=r[i],l=0;l<a.length;l++){var c=a[l];if(o(s,t.id(c))){e.push(c),a.splice(l,1);break}}n(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(i);var n=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){n.search[0].focus(),n.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+M()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),r=i.next(".select2-search-choice:not(.select2-locked)"),o=f(this.search);if(i.length&&(e.which==D.LEFT||e.which==D.RIGHT||e.which==D.BACKSPACE||e.which==D.DELETE||e.which==D.ENTER)){var s=i;return e.which==D.LEFT&&n.length?s=n:e.which==D.RIGHT?s=r.length?r:null:e.which===D.BACKSPACE?(this.unselect(i.first()),this.search.width(10),s=n.length?n:r):e.which==D.DELETE?(this.unselect(i.first()),this.search.width(10),s=r.length?r:null):e.which==D.ENTER&&(s=null),this.selectChoice(s),m(e),s&&s.length||this.open(),void 0}if((e.which===D.BACKSPACE&&1==this.keydowns||e.which==D.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),m(e),void 0;if(this.selectChoice(null),this.opened())switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),m(e),void 0;case D.ENTER:return this.selectHighlighted(),m(e),void 0;case D.TAB:return this.selectHighlighted({noFocus:!0}),this.close(),void 0;case D.ESC:return this.cancel(e),m(e),void 0}if(e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.BACKSPACE&&e.which!==D.ESC){if(e.which===D.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)&&m(e),e.which===D.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),i=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i=[],r=[],o=this;e(t).each(function(){n(o.id(this),i)<0&&(i.push(o.id(this)),r.push(this))}),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,r,o=!i.locked,s=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?s:a,c=this.id(i),u=this.getVal();n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),n!=t&&l.find("div").replaceWith("<div>"+n+"</div>"),r=this.opts.formatSelectionCssClass(i,l.find("div")),r!=t&&l.addClass(r),o&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),m(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),u.push(c),this.setVal(u)},unselect:function(t){var i,r,o=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(i=t.data("select2-data")){for(;(r=n(this.id(i),o))>=0;)o.splice(r,1),this.setVal(o),this.select&&this.postprocessResults();var s=e.Event("select2-removing");s.val=this.id(i),s.choice=i,this.opts.element.trigger(s),s.isDefaultPrevented()||(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},postprocessResults:function(e,t,i){var r=this.getVal(),o=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;o.each2(function(e,t){var i=a.id(t.data("select2-data"));n(i,r)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&i!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&C(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+a.opts.formatNoMatches(a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-a(this.search)},resizeSearch:function(){var e,t,i,n,r,o=a(this.search);e=v(this.search)+10,t=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,r=i-(t-n)-o,e>r&&(r=i-o),40>r&&(r=i-o),0>=r&&(r=e),this.search.width(Math.floor(r))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),s(e,this.opts.separator))},setVal:function(t){var i;this.select?this.select.val(t):(i=[],e(t).each(function(){n(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),i=0;i<t.length;i++)for(var n=0;n<e.length;n++)o(this.opts.id(t[i]),this.opts.id(e[n]))&&(t.splice(i,1),i--,e.splice(n,1),n--);return{added:t,removed:e}},val:function(i,n){var r,o=this;if(0===arguments.length)return this.getVal();if(r=this.data(),r.length||(r=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),n&&this.triggerChange({added:this.data(),removed:r}),void 0;if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=e.map(t,o.id);o.setVal(i),o.updateSelection(t),o.clearSearch(),n&&o.triggerChange(o.buildChangeDetails(r,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,i){var n,r,o=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(r=this.data(),t||(t=[]),n=e.map(t,function(e){return o.opts.id(e)}),this.setVal(n),this.updateSelection(t),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(r,this.data())),void 0)}}),e.fn.select2=function(){var i,r,o,s,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],d=["val","data"],h={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])i=0===l.length?{}:e.extend({},l[0]),i.element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?a=i.element.prop("multiple"):(a=i.multiple||!1,"tags"in i&&(i.multiple=a=!0)),r=a?new j:new A,r.init(i);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(n(l[0],c)<0)throw"Unknown method: "+l[0];if(s=t,r=e(this).data("select2"),r===t)return;if(o=l[0],"container"===o?s=r.container:"dropdown"===o?s=r.dropdown:(h[o]&&(o=h[o]),s=r[o].apply(r,l.slice(1))),n(l[0],u)>=0||n(l[0],d)&&1==l.length)return!1}}),s===t?this:s},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var r=[];return y(e.text,i.term,r,n),r.join("")},formatSelection:function(e,i,n){return e?n(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatSelectionCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return i(""+t).toUpperCase().indexOf(i(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:T,escapeMarkup:_,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:w,local:x,tags:k},util:{debounce:u,markMatch:y,escapeMarkup:_,stripDiacritics:i},"class":{"abstract":I,single:A,multi:j}}}}(jQuery),function(e){e.fn.tooltip=function(t){var i=e.extend({},e.fn.tooltip.defaults,t),n=this.tipsy(i);if(i.hideOnClick&&("hover"==i.trigger||!i.trigger&&"hover"==this.tipsy.defaults.trigger)){var r=function(){e(this).tipsy("hide")};i.live?e(this.context).on("click.tipsy",this.selector,r):this.bind("click.tipsy",r)}return n},e.fn.tooltip.defaults={opacity:1,offset:1,delayIn:500,hoverable:!0,hideOnClick:!0}}(AJS.$),function(e){var t=e(document),i=function(i){var n={};return n.$trigger=e(i.currentTarget),n.$content=t.find("#"+n.$trigger.attr("aria-controls")),n.triggerIsParent=0!==n.$content.parent().filter(n.$trigger).length,n.$shortContent=n.triggerIsParent?n.$trigger.find(".aui-expander-short-content"):null,n.height=n.$content.css("min-height"),n.isCollapsible=n.$trigger.data("collapsible")!==!1,n.replaceText=n.$trigger.attr("data-replace-text"),n.replaceSelector=n.$trigger.data("replace-selector"),n},n=function(e){if(e.replaceText){var t=e.replaceSelector?e.$trigger.find(e.replaceSelector):e.$trigger;e.$trigger.attr("data-replace-text",t.text()),t.text(e.replaceText)}},r={"aui-expander-invoke":function(i){var n=e(i.currentTarget),r=t.find("#"+n.attr("aria-controls")),o=n.data("collapsible")!==!1;"true"==r.attr("aria-expanded")&&o?n.trigger("aui-expander-collapse"):n.trigger("aui-expander-expand")},"aui-expander-expand":function(e){var t=i(e);t.$content.attr("aria-expanded","true"),"0px"!=t.height?t.$content.css("height","auto"):t.$content.attr("aria-hidden","false"),n(t),t.triggerIsParent&&t.$shortContent.hide(),t.$trigger.trigger("aui-expander-expanded")},"aui-expander-collapse":function(e){var t=i(e);parseInt(t.$content.css("line-height"),10),t.$content.children().first().height(),"0px"!=t.height?t.$content.css("height",0):t.$content.attr("aria-hidden","true"),n(t),t.$content.attr("aria-expanded","false"),t.triggerIsParent&&t.$shortContent.show(),t.$trigger.trigger("aui-expander-collapsed")},"click.aui-expander":function(t){var i=e(t.currentTarget);i.trigger("aui-expander-invoke",t.currentTarget)}};t.on(r,".aui-expander-trigger")}(jQuery),function(e){var t=e.fn.select2,i="aui-select2-container",n="aui-select2-drop aui-dropdown2 aui-style-default",r="aui-has-avatar";e.fn.auiSelect2=function(o){var s;if(e.isPlainObject(o)){var a=e.extend({},o),l=a.hasAvatar?" "+r:"";a.containerCssClass=i+l+(a.containerCssClass?" "+a.containerCssClass:""),a.dropdownCssClass=n+l+(a.dropdownCssClass?" "+a.dropdownCssClass:""),s=Array.prototype.slice.call(arguments,1),s.unshift(a)}else s=arguments.length?arguments:[{containerCssClass:i,dropdownCssClass:n}];return t.apply(this,s)}}(AJS.$),function(e){for(var t=0,i=["webkit","moz"],n=e.requestAnimationFrame,r=e.cancelAnimationFrame,o=i.length;--o>=0&&!n;)n=e[i[o]+"RequestAnimationFrame"],r=e[i[o]+"CancelAnimationFrame"];n&&r||(n=function(e){var i=Date.now(),n=Math.max(t+16,i);return setTimeout(function(){e(t=n)},n-i)},r=clearTimeout),e.requestAnimationFrame=n,e.cancelAnimationFrame=r}(window),function(e){function t(t){this.$el=e(t).closest(".aui-nav"),this.$treeParent=this.$el.parent("li[aria-expanded]"),this.$subtreeToggleIcon=this.$treeParent.children(".aui-nav-subtree-toggle").children("span.aui-icon")}t.prototype.isNested=function(){return 1===this.$treeParent.length},t.prototype.isCollapsed=function(){return"false"===this.$treeParent.attr("aria-expanded")},t.prototype.expand=function(){return this.$treeParent.attr("aria-expanded","true"),this.$subtreeToggleIcon.removeClass("aui-iconfont-collapsed").addClass("aui-iconfont-expanded"),this},t.prototype.collapse=function(){return this.$treeParent.attr("aria-expanded","false"),this.$subtreeToggleIcon.removeClass("aui-iconfont-expanded").addClass("aui-iconfont-collapsed"),this},t.prototype.toggle=function(){return this.isCollapsed()?this.expand():this.collapse(),this},AJS.navigation=AJS._internal.widget("navigation",t),e(function(e){e(document).on("click",".aui-nav li[aria-expanded]",function(t){var i=e(t.target),n=i.closest("li[aria-expanded]")[0]!==this;if(!n){var r=i.closest(".aui-nav-subtree-toggle",this).length>0;r&&t.preventDefault();var o=AJS.navigation(e(this).children(".aui-nav"));o.toggle()}})})}(AJS.$),function(e){function t(e){return e.offset().top}function i(t){this.$body=e("body"),this.$el=e(t),this.$wrapper=this.$el.children(".aui-sidebar-wrapper"),this.submenus=new n,this.$body.addClass("aui-page-sidebar"),this._previousScrollTop=null,this._previousViewportHeight=null,this._previousViewportWidth=null,this._previousOffsetTop=null}function n(){this.inlineDialog=AJS.InlineDialog(e(),"sidebar-submenu",this.inlineDialogShowHandler.bind(this),{noBind:!0,addActiveClass:!1,hideCallback:this.inlineDialogHideHandler.bind(this),gravity:"w",offsetY:function(e,t){var i=t.target.height()/2,n=e.height()/2;return n-i-this.submenuHeadingHeight()}.bind(this),arrowOffsetY:function(e,t){var i=t.target.height()/2,n=e.height()/2;return-n+this.submenuHeadingHeight()+i}.bind(this)}),this.$trigger=null,this.$placeholder=null,this.$placeholderSubmenu=null,this.postHideCallback=null}function r(e){e.tipsy(u).tipsy("show");var t=e.data("tipsy")&&e.data("tipsy").$tip;t&&t.css({opacity:""}).addClass("tooltip-shown")}function o(e){var t=e.data("tipsy")&&e.data("tipsy").$tip;t&&(t.on("transitionend",function(){e.tipsy("hide")}),t.removeClass("tooltip-shown"))}var s="undefined"!=typeof document.documentElement.style.transition||"undefined"!=typeof document.documentElement.style.webkitTransition,a=1280,l="_aui-internal-sidebar-";i.prototype.on=function(){var t=arguments[0],i=Array.prototype.slice.call(arguments,1),n=e.map(t.split(" "),function(e){return l+e}).join(" ");return this.$el.on.apply(this.$el,[n].concat(i)),this},i.prototype.setHeight=function(e,i,n){e=e||window.pageYOffset,i=i||document.documentElement.clientHeight,n=n||t(this.$el);var r=Math.max(0,n-e);return this.$wrapper.height(i-r),this},i.prototype.setPosition=function(e){return e=e||window.pageYOffset,e<=document.body.scrollHeight-window.innerHeight&&this.$wrapper.toggleClass("aui-is-docked",e>t(this.$el)),this},i.prototype.setCollapsedState=function(t){var i={collapsed:{},expanded:{}};i.collapsed.narrow={narrow:e.noop,wide:function(e){e._expand(t)}},i.collapsed.wide={narrow:e.noop,wide:e.noop},i.expanded.narrow={narrow:e.noop,wide:function(e){e.$body.removeClass("aui-sidebar-collapsed"),e.$el.removeClass("aui-sidebar-fly-out")}},i.expanded.wide={narrow:function(e){e.collapse()},wide:e.noop};var n=this.isCollapsed()?"collapsed":"expanded",r=this.isViewportNarrow(this._previousViewportWidth)?"narrow":"wide",o=this.isViewportNarrow(t)?"narrow":"wide";return i[n][r][o](this),this},i.prototype.collapse=function(){return this.$el.trigger(e.Event(l+"collapse-start")),this.$body.addClass("aui-sidebar-collapsed"),this.$el.attr("aria-expanded","false"),this.$el.removeClass("aui-sidebar-fly-out"),this.isAnimated()||this.$el.trigger(e.Event(l+"collapse-end")),this},i.prototype._expand=function(t){this.$el.trigger(e.Event(l+"expand-start"));var i=this.isViewportNarrow(t);return this.$el.attr("aria-expanded","true"),this.$body.toggleClass("aui-sidebar-collapsed",i),this.$el.toggleClass("aui-sidebar-fly-out",i),this.isAnimated()||this.$el.trigger(e.Event(l+"expand-end")),this},i.prototype.expand=function(){return this._expand(this._previousViewportWidth),this},i.prototype.isAnimated=function(){return s&&this.$el.hasClass("aui-is-animated")},i.prototype.isCollapsed=function(){return"false"===this.$el.attr("aria-expanded")},i.prototype.isViewportNarrow=function(e){return e=void 0===e?this._previousViewportWidth:e,a>e},i.prototype.reflow=function(){var e=window.pageYOffset,i=document.documentElement.clientHeight,n=window.innerWidth,r=t(this.$el);(e!==this._previousScrollTop||i!==this._previousViewportHeight||r!==this._previousOffsetTop)&&(this.$body.hasClass("aui-page-sidebar-touch")||(this.setHeight(e,i,r),this.setPosition(e)));var o="false"!==this.$el.attr("data-aui-responsive");if(o){var s=null===this._previousViewportWidth;if(s){if(!this.isCollapsed()&&this.isViewportNarrow(n)){var a=this.isAnimated();a&&this.$el.removeClass("aui-is-animated"),this.collapse(),a&&(this.$el[0].offsetHeight,this.$el.addClass("aui-is-animated"))}}else n!==this._previousViewportWidth&&this.setCollapsedState(n)}else{var l=!this.isCollapsed()&&this.isViewportNarrow(n);this.$el.toggleClass("aui-sidebar-fly-out",l)}return this._previousScrollTop=e,this._previousViewportHeight=i,this._previousViewportWidth=n,this._previousOffsetTop=r,this},i.prototype.toggle=function(){return this.isCollapsed()?this.submenus.isShowing()?this.submenus.hide(this.expand.bind(this)):(this.expand(),e(".aui-sidebar-section-tooltip").remove()):this.collapse(),this},i.prototype.collapsedTriggersSelector=function(){return[".aui-sidebar-group:not(.aui-sidebar-group-tier-one)",".aui-sidebar-group.aui-sidebar-group-tier-one > .aui-nav > li > a",".aui-sidebar-footer > .aui-sidebar-settings-button"].join(", ")
},n.prototype.submenu=function(e){return e.is("a")?e.next(".aui-nav"):e.children(".aui-nav")},n.prototype.hasSubmenu=function(e){return 0!==this.submenu(e).length},n.prototype.submenuHeadingHeight=function(){return 34},n.prototype.isShowing=function(){return null!==this.$trigger},n.prototype.show=function(e,t){var i=this.isShowing();return this.inlineDialog.show(e,t),i&&this.inlineDialog.refresh(),this},n.prototype.hide=function(e){return void 0!==e&&(this.postHideCallback=e),this.inlineDialog.hide(),this};var c='<div class="aui-sidebar-submenu"><div class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong></strong></div></div></div></div>';n.prototype.inlineDialogShowHandler=function(t,i,n){this.isShowing()&&(this.restoreSubmenu(),this.$trigger.removeClass("active")),this.$trigger=e(i).is(".aui-sidebar-group")?e(i):e(i).closest("a"),this.$trigger.addClass("active");var r=this.$trigger.is("a")?this.$trigger.text():this.$trigger.children(".aui-nav-heading").text();t.html(c);var o=t.find(".aui-navgroup-inner");o.children(".aui-nav-heading").attr("title",r).children("strong").text(r),this.moveSubmenuToInlineDialog(this.submenu(this.$trigger)),n()},n.prototype.inlineDialogHideHandler=function(){this.restoreSubmenu(),this.$trigger.removeClass("active"),this.$trigger=null,null!==this.postHideCallback&&(this.postHideCallback(),this.postHideCallback=null)},n.prototype.moveSubmenuToInlineDialog=function(t){return this.$placeholder=e("<!-- placholder -->"),this.$placeholderSubmenu=t,t.replaceWith(this.$placeholder),this.inlineDialog.find(".aui-navgroup-inner").append(t),this},n.prototype.restoreSubmenu=function(){return this.$placeholder.replaceWith(this.$placeholderSubmenu),delete this.$placeholder,delete this.$placeholderSubmenu,this};var u={trigger:"manual",gravity:"w",className:"aui-sidebar-section-tooltip",title:function(){var t=e(this);return t.is("a")?t.attr("title")||t.find(".aui-nav-item-label").text()||t.data("tooltip"):t.children(".aui-nav").attr("title")||t.children(".aui-nav-heading").text()}};AJS.sidebar=AJS._internal.widget("sidebar",i),e(function(e){var t=e(".aui-sidebar");if(t.length){Modernizr.touch&&e("body").addClass("aui-page-sidebar-touch");var n=new i(t),s=null;e(window).on("scroll resize",function(){null===s&&(s=requestAnimationFrame(function(){n.reflow(),s=null}))}),n.reflow(),n.isAnimated()&&n.$el.on("transitionend webkitTransitionEnd",function(){n.$el.trigger(e.Event(l+(n.isCollapsed()?"collapse-end":"expand-end")))}),n.$el.on("click",".aui-sidebar-toggle",function(e){e.preventDefault(),n.toggle()}),n.$el.on("click",".aui-sidebar-body",function(t){e(t.target).is(".aui-sidebar-body")&&(t.preventDefault(),n.toggle())}),e(".aui-page-panel").click(function(){!n.isCollapsed()&&n.isViewportNarrow()&&n.collapse()}),AJS.whenIType("[").execute(function(){n.toggle()}),n.$el.on("touchend",function(e){n.isCollapsed()&&(n.expand(),e.preventDefault())}),n.$el.on("mouseenter focus",n.collapsedTriggersSelector(),function(){n.isCollapsed()&&r(e(this))}),n.$el.on("click blur mouseleave",n.collapsedTriggersSelector(),function(){n.isCollapsed()&&o(e(this))}),n.$el.on("mouseenter focus",".aui-sidebar-footer > .aui-sidebar-toggle",function(){var t=e(this);n.isCollapsed()?t.data("tooltip",AJS.I18n.getText("aui.sidebar.expand.tooltip")):t.data("tooltip",AJS.I18n.getText("aui.sidebar.collapse.tooltip")),r(t)}),n.$el.on("click blur mouseleave",".aui-sidebar-footer > .aui-sidebar-toggle",function(){o(e(this))}),n.$el.on("click",n.collapsedTriggersSelector(),function(t){if(n.isCollapsed()){var i=e(this);n.submenus.hasSubmenu(i)&&(t.preventDefault(),n.submenus.show(t,this))}}),n.$el.find(".aui-sidebar-body").on("mouseenter mouseover mouseleave",function(t){n.$el.toggleClass("aui-is-hover",("mouseover"===t.type||"mouseenter"===t.type)&&!e(t.srcElement).parentsUntil(n.$el).filter(".aui-page-header, .aui-navgroup").length)})}})}(AJS.$),define("aui-experimental",function(){}),define("aui",["aui-stable","aui-experimental"],function(e){return e}),Function.prototype.bind||(Function.prototype.bind=function(e){if(null==this)throw new TypeError("Cannot call method 'bind' of "+this);if("function"!=typeof this)throw new TypeError("Object "+this+"has no method 'bind'");var t=[].slice,i=t.call(arguments,1),n=this,r=function(){},o=function(){return n.apply(this instanceof r?this:e||{},i.concat(t.call(arguments)))};return o.prototype=this.prototype,o}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),define("shims/es5",function(){}),function(){var e,t,i,n,r,o=[].slice;n=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},i=function(e){return/^\/(.+)\/([gimy]*)$/.exec(e)},t=function(e){var t;return"string"==typeof e?RegExp("^"+n(e)):(t=i(e),RegExp("^"+t[1],t[2]))},e=function(e){var t;return"string"==typeof e?RegExp(""+n(e)+"$"):(t=i(e),RegExp(""+t[1]+"$",t[2]))},r=function(e){var t,i,n,r,o;for(i=[],n=[],r=0,o=e.length;o>r;r++)t=e[r],(_.isRegExp(t)?i:n).push(t);return i.concat(_.sortBy(n,function(e){return-e.length}))},String.prototype.lstrip=function(){var e,i,n,s,a,l;for(n=1<=arguments.length?o.call(arguments,0):[],l=r(n),s=0,a=l.length;a>s;s++)if(i=l[s],e=t(i).exec(this))return this.substr(e[0].length);return this.toString()},String.prototype.rstrip=function(){var t,i,n,s,a,l;for(n=1<=arguments.length?o.call(arguments,0):[],l=r(n),s=0,a=l.length;a>s;s++)if(i=l[s],t=e(i).exec(this))return this.substr(0,this.length-t[0].length);return this.toString()},String.prototype.startsWith=function(){var e,i,n,r;for(i=1<=arguments.length?o.call(arguments,0):[],n=0,r=i.length;r>n;n++)if(e=i[n],t(e).test(this))return!0;return!1},String.prototype.endsWith=function(){var t,i,n,r;for(i=1<=arguments.length?o.call(arguments,0):[],n=0,r=i.length;r>n;n++)if(t=i[n],e(t).test(this))return!0;return!1}}.call(this),define("shims/string-extensions",function(){}),function(){var e,t,i,n=[].slice;e=String.prototype.format=function(){var i,r,o,s,a,l=this;return i=1<=arguments.length?n.call(arguments,0):[],0===i.length?function(){var e;return e=1<=arguments.length?n.call(arguments,0):[],l.format.apply(l,e)}:(s=0,o=a=!1,r="cannot switch from {} to {} numbering".format(),this.replace(/([{}])\1|[{](.*?)(?:!(.+?))?[}]/g,function(n,l,c,u){var d,h,p,f,m;if(l)return l;if(c.length){if(o=!0,a)throw r("implicit","explicit");h=null!=(p=t(i,c))?p:""}else{if(a=!0,o)throw r("explicit","implicit");h=null!=(f=i[s++])?f:""}return h=h.toString(),(d=e.transformers[u])?null!=(m=d.call(h))?m:"":h}))},t=function(e,t){var n;for(/^(\d+)([.]|$)/.test(t)||(t="0."+t);n=/(.+?)[.](.+)/.exec(t);)e=i(e,n[1]),t=n[2];return i(e,t)},i=function(e,t){var i;return i=e[t],"function"==typeof i?i.call(e):i},e.transformers={}}.call(this),define("shims/string-format",function(){}),!function(e){e.esc=function(){return _.escape(this)},e.s=function(){return 1!==+this?"s":void 0}}(String.prototype.format.transformers),define("shims/string-format-transformers",function(){});var LiquidMetal=function(){function e(e,t){var i=e.charAt(t);return i>="A"&&"Z">=i}function t(e,t){var i=e.charAt(t-1);return-1!=l.indexOf(i)}function i(e,t,i,n){for(var r=i;n>r;r++)e[r]=t;return e}var n=0,r=1,o=0,s=.9,a=.85,l=" 	_-/";return{lastScore:null,lastScoreArray:null,score:function(e,t){if(0===t.length)return.8;if(t.length>e.length)return n;var i=[],r=e.toLowerCase();if(t=t.toLowerCase(),this._scoreAll(e,r,t,-1,0,[],i),0===i.length)return 0;for(var o=0,s=[],a=0;a<i.length;a++){for(var l=i[a],c=0,u=0;u<e.length;u++)c+=l[u];c>o&&(o=c,s=l)}return o/=e.length,this.lastScore=o,this.lastScoreArray=s,o},_scoreAll:function(l,c,u,d,h,p,f){if(h===u.length){var m=c.charAt(0)==u.charAt(0),g=m?s:o;return i(p,g,p.length,l.length),f.push(p.slice(0)),void 0}var v=u.charAt(h);h++;var b=c.indexOf(v,d);if(-1!=b)for(var y=d;-1!==(b=c.indexOf(v,d+1));)t(l,b)?(p[b-1]=1,i(p,a,y+1,b-1)):e(l,b)?i(p,a,y+1,b):i(p,n,y+1,b),p[b]=r,d=b,this._scoreAll(l,c,u,d,h,p,f)}}}();define("liquidmetal",function(){}),String.prototype.score=function(e){return LiquidMetal.score(this,e)},define("shims/string-score",function(){}),define("data/flags",[],function(){function e(e){return e.replace(/-\w/g,function(e){return e[1].toUpperCase()})}for(var t,i=document.body.attributes,n=/^data-flag-(.*)/,r={},o=0;o<i.length;o++)t=n.exec(i[o].name),t&&(r[e(t[1])]=!0);return r}),define("data/current-repo",["jquery"],function(e){var t=e(document.body).data("currentRepo")||{};return t.toString=function(){return t.cname?t.slug:"{owner.username}/{slug}".format(t)},t});var Mustache="undefined"!=typeof module&&module.exports||{};!function(e){function t(e,t){return RegExp.prototype.test.call(e,t)}function i(e){return!t(_,e)}function n(e){var t=e.replace(S,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)});return'"'+t+'"'}function r(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function o(e){return String(e).replace(/[&<>"'\/]/g,function(e){return $[e]})}function s(e){this.string=e,this.tail=e,this.pos=0}function a(e,t){this.view=e,this.parent=t,this.clearCache()}function l(){this.clearCache()}function c(e,t){"string"==typeof e&&(e=p(e));for(var i,r,o,s=['""'],a=0,l=e.length;l>a;++a)switch(i=e[a],i.type){case"#":case"^":r="#"===i.type?"_section":"_inverted",s.push("r."+r+"("+n(i.value)+", c, function (c, r) {\n"+"  "+c(i.tokens,!0)+"\n"+"})");break;case"{":case"&":case"name":o="name"===i.type?"true":"false",s.push("r._name("+n(i.value)+", c, "+o+")");break;case">":s.push("r._partial("+n(i.value)+", c)");break;case"text":s.push(n(i.value))}return s="return "+s.join(" + ")+";",t?s:new Function("c, r",s)}function u(e){if(2===e.length)return[new RegExp(r(e[0])+"\\s*"),new RegExp("\\s*"+r(e[1]))];throw new Error("Invalid tags: "+e.join(" "))}function d(e){for(var t,i,n=[],r=n,o=[],s=0;s<e.length;++s)switch(t=e[s],t.type){case"#":case"^":t.tokens=[],o.push(t),r.push(t),r=t.tokens;break;case"/":if(0===o.length)throw new Error("Unopened section: "+t.value);if(i=o.pop(),i.value!==t.value)throw new Error("Unclosed section: "+i.value);r=o.length>0?o[o.length-1].tokens:n;break;default:r.push(t)}if(i=o.pop())throw new Error("Unclosed section: "+i.value);return n}function h(e){for(var t,i=0;i<e.length;++i)token=e[i],t&&"text"===t.type&&"text"===token.type?(t.value+=token.value,e.splice(i--,1)):t=token}function p(t,n){n=n||e.tags,tagRes=u(n);for(var o,a,l,c=new s(t),p=[],f=[],m=!1,g=!1,v=function(){if(m&&!g)for(;f.length;)p.splice(f.pop(),1);else f=[];m=!1,g=!1};!c.eos();){if(a=c.scanUntil(tagRes[0]))for(var _=0,C=a.length;C>_;++_)l=a[_],i(l)?f.push(p.length):g=!0,p.push({type:"text",value:l}),"\n"===l&&v();if(!c.scan(tagRes[0]))break;if(m=!0,o=c.scan(k)||"name",c.scan(b),"="===o)a=c.scanUntil(w),c.scan(w),c.scanUntil(tagRes[1]);else if("{"===o){var S=new RegExp("\\s*"+r("}"+n[1]));a=c.scanUntil(S),c.scan(x),c.scanUntil(tagRes[1])}else a=c.scanUntil(tagRes[1]);if(!c.scan(tagRes[1]))throw new Error("Unclosed tag at "+c.pos);p.push({type:o,value:a}),("name"===o||"{"===o||"&"===o)&&(g=!0),"="===o&&(n=a.split(y),tagRes=u(n))}return h(p),d(p)}function f(){T.clearCache()}function m(e,t){return T.compile(e,t)}function g(e,t,i){return T.compilePartial(e,t,i)}function v(e,t,i){if(i)for(var n in i)g(n,i[n]);return T.render(e,t)}e.name="mustache.js",e.version="0.5.1-dev",e.tags=["{{","}}"],e.parse=p,e.clearCache=f,e.compile=m,e.compilePartial=g,e.render=v,e.Scanner=s,e.Context=a,e.Renderer=l,e.to_html=function(e,t,i,n){var r=v(e,t,i);return"function"!=typeof n?r:(n(r),void 0)};var b=/\s*/,y=/\s+/,_=/\S/,w=/\s*=/,x=/\s*\}/,k=/#|\^|\/|>|\{|&|=|!/,C=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},S=/[\x00-\x2F\x3A-\x40\x5B-\x60\x7B-\xFF\u2028\u2029]/gm,$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};e.isWhitespace=i,e.isArray=C,e.quote=n,e.escapeRe=r,e.escapeHtml=o,s.prototype.eos=function(){return""===this.tail},s.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):null},s.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t=null;break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i),this.pos+=i}return t},a.make=function(e){return e instanceof a?e:new a(e)},a.prototype.clearCache=function(){this._cache={}},a.prototype.push=function(e){return new a(e,this)},a.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."===e)t=this.view;else for(var i=this;i;){if(e.indexOf(".")>0){var n=e.split("."),r=0;for(t=i.view;t&&r<n.length;)t=t[n[r++]]}else t=i.view[e];if(null!=t)break;i=i.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},l.prototype.clearCache=function(){this._cache={},this._partialCache={}},l.prototype.compile=function(e){var t=c(e),i=this;return function(e){return t(a.make(e),i)}},l.prototype.compilePartial=function(e,t,i){return this._partialCache[e]=this.compile(t,i),this._partialCache[e]},l.prototype.render=function(e,t){var i=this._cache[e];return i||(i=this.compile(e),this._cache[e]=i),i(t)},l.prototype._section=function(e,t,i){var n=t.lookup(e);switch(typeof n){case"object":if(C(n)){for(var r="",o=0,s=n.length;s>o;++o)r+=i(t.push(n[o]),this);return r}return i(t.push(n),this);case"function":var a=i(t,this),l=this,c=function(e){return l.render(e,t)};return n.call(t.view,a,c)||"";default:if(n)return i(t,this)}return""},l.prototype._inverted=function(e,t,i){var n=t.lookup(e);return null==n||n===!1||C(n)&&0===n.length?i(t,this):""},l.prototype._partial=function(e,t){var i=this._partialCache[e];return i?i(t,this):""},l.prototype._name=function(e,t,i){var n=t.lookup(e);"function"==typeof n&&(n=n.call(t.view));var r=null==n?"":String(n);return i?o(r):r};var T=new l}(Mustache),define("mustache",function(e){return function(){var t;return t||e.Mustache}}(this)),function(){var e,t=this,i=t.Backbone,n=[],r=n.push,o=n.slice,s=n.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="0.9.10";var a=t._;a||"undefined"==typeof require||(a=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var l=/\s+/,c=function(e,t,i,n){if(!i)return!0;if("object"==typeof i)for(var r in i)e[t].apply(e,[r,i[r]].concat(n));else{if(!l.test(i))return!0;for(var o=i.split(l),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(n))}},u=function(e,t){var i,n=-1,r=e.length;switch(t.length){case 0:for(;++n<r;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=e[n]).callback.call(i.ctx,t[0]);return;case 2:for(;++n<r;)(i=e[n]).callback.call(i.ctx,t[0],t[1]);return;case 3:for(;++n<r;)(i=e[n]).callback.call(i.ctx,t[0],t[1],t[2]);return;default:for(;++n<r;)(i=e[n]).callback.apply(i.ctx,t)}},d=e.Events={on:function(e,t,i){if(!c(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,i){if(!c(this,"once",e,[t,i])||!t)return this;var n=this,r=a.once(function(){n.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,i),this},off:function(e,t,i){var n,r,o,s,l,u,d,h;if(!this._events||!c(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(s=e?[e]:a.keys(this._events),l=0,u=s.length;u>l;l++)if(e=s[l],n=this._events[e]){if(o=[],t||i)for(d=0,h=n.length;h>d;d++)r=n[d],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&o.push(r);this._events[e]=o}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!c(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&u(i,t),n&&u(n,arguments),this},listenTo:function(e,t,i){var n=this._listeners||(this._listeners={}),r=e._listenerId||(e._listenerId=a.uniqueId("l"));return n[r]=e,e.on(t,"object"==typeof t?this:i,this),this},stopListening:function(e,t,i){var n=this._listeners;if(n){if(e)e.off(t,"object"==typeof t?this:i,this),t||i||delete n[e._listenerId];else{"object"==typeof t&&(i=this);for(var r in n)n[r].off(t,i,this);this._listeners={}}return this}}};d.bind=d.on,d.unbind=d.off,a.extend(e,d);var h=e.Model=function(e,t){var i,n=e||{};this.cid=a.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(n=this.parse(n,t)||{}),(i=a.result(this,"defaults"))&&(n=a.defaults({},n,i)),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};a.extend(h.prototype,d,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return a.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var n,r,o,s,l,c,u,d;if(null==e)return this;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;o=i.unset,l=i.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=a.clone(this.attributes),this.changed={}),d=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(n in r)t=r[n],a.isEqual(d[n],t)||s.push(n),a.isEqual(u[n],t)?delete this.changed[n]:this.changed[n]=t,o?delete d[n]:d[n]=t;if(!l){s.length&&(this._pending=!0);for(var h=0,p=s.length;p>h;h++)this.trigger("change:"+s[h],this,d[s[h]],i)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,a.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,a.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!a.isEmpty(this.changed):a.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?a.clone(this.changed):!1;var t,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var r in e)a.isEqual(n[r],t=e[r])||((i||(i={}))[r]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,i,n){return e.set(e.parse(i,n),n)?(t&&t(e,i,n),void 0):!1},this.sync("read",this,e)},save:function(e,t,i){var n,r,o,s,l=this.attributes;return null==e||"object"==typeof e?(n=e,i=t):(n={})[e]=t,!n||i&&i.wait||this.set(n,i)?(i=a.extend({validate:!0},i),this._validate(n,i)?(n&&i.wait&&(this.attributes=a.extend({},l,n)),void 0===i.parse&&(i.parse=!0),r=i.success,i.success=function(e,t,i){e.attributes=l;var o=e.parse(t,i);return i.wait&&(o=a.extend(n||{},o)),a.isObject(o)&&!e.set(o,i)?!1:(r&&r(e,t,i),void 0)},o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=n),s=this.sync(o,this,i),n&&i.wait&&(this.attributes=l),s):!1):!1},destroy:function(e){e=e?a.clone(e):{};var t=this,i=e.success,n=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(e,t,r){(r.wait||e.isNew())&&n(),i&&i(e,t,r)},this.isNew())return e.success(this,null,e),!1;var r=this.sync("delete",this,e);return e.wait||n(),r},url:function(){var e=a.result(this,"urlRoot")||a.result(this.collection,"url")||A();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=a.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,t||{}),!1):!0}});var p=e.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,a.extend({silent:!0},t))};a.extend(p.prototype,d,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){e=a.isArray(e)?e.slice():[e],t||(t={});var i,n,o,l,c,u,d,h,p,f;for(d=[],h=t.at,p=this.comparator&&null==h&&0!=t.sort,f=a.isString(this.comparator)?this.comparator:null,i=0,n=e.length;n>i;i++)(o=this._prepareModel(l=e[i],t))?(c=this.get(o))?t.merge&&(c.set(l===o?o.attributes:l,t),p&&!u&&c.hasChanged(f)&&(u=!0)):(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)):this.trigger("invalid",this,l,t);if(d.length&&(p&&(u=!0),this.length+=d.length,null!=h?s.apply(this.models,[h,0].concat(d)):r.apply(this.models,d)),u&&this.sort({silent:!0}),t.silent)return this;for(i=0,n=d.length;n>i;i++)(o=d[i]).trigger("add",o,this,t);return u&&this.trigger("sort",this,t),this},remove:function(e,t){e=a.isArray(e)?e.slice():[e],t||(t={});var i,n,r,o;for(i=0,n=e.length;n>i;i++)o=this.get(e[i]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,t.silent||(t.index=r,o.trigger("remove",o,this,t)),this._removeReference(o));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e])},at:function(e){return this.models[e]},where:function(e){return a.isEmpty(e)?[]:this.filter(function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return a.invoke(this.models,"get",e)},update:function(e,t){t=a.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e,t));var i,n,r,o,s=[],l=[],c={};if(a.isArray(e)||(e=e?[e]:[]),t.add&&!t.remove)return this.add(e,t);for(n=0,r=e.length;r>n;n++)i=e[n],o=this.get(i),t.remove&&o&&(c[o.cid]=!0),(t.add&&!o||t.merge&&o)&&s.push(i);if(t.remove)for(n=0,r=this.models.length;r>n;n++)i=this.models[n],c[i.cid]||l.push(i);return l.length&&this.remove(l,t),s.length&&this.add(s,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,a.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,i,n){var r=n.update?"update":"reset";e[r](i,n),t&&t(e,i,n)},this.sync("read",this,e)},create:function(e,t){if(t=t?a.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,n=t.success;return t.success=function(e,t,r){r.wait&&i.add(e,r),n&&n(e,t,r)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var i=new this.model(e,t);return i._validate(e,t)?i:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))},sortedIndex:function(e,t,i){t||(t=this.comparator);var n=a.isFunction(t)?t:function(e){return e.get(t)};return a.sortedIndex(this.models,e,n,i)}});var f=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(f,function(e){p.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),a[e].apply(a,t)}});var m=["groupBy","countBy","sortBy"];a.each(m,function(e){p.prototype[e]=function(t,i){var n=a.isFunction(t)?t:function(e){return e.get(t)};return a[e](this.models,n,i)}});var g=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},v=/\((.*?)\)/g,b=/(\(\?)?:\w+/g,y=/\*\w+/g,_=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(g.prototype,d,{initialize:function(){},route:function(t,i,n){return a.isRegExp(t)||(t=this._routeToRegExp(t)),n||(n=this[i]),e.history.route(t,a.bind(function(r){var o=this._extractParameters(t,r);n&&n.apply(this,o),this.trigger.apply(this,["route:"+i].concat(o)),this.trigger("route",i,o),e.history.trigger("route",this,i,o)},this)),this},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes)for(var e,t=a.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(_,"\\$&").replace(v,"(?:$1)?").replace(b,function(e,t){return t?e:"([^/]+)"}).replace(y,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var w=e.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},x=/^[#\/]|\s+$/g,k=/^\/+|\/+$/g,C=/msie [\w.]+/,S=/\/$/;w.started=!1,a.extend(w.prototype,d,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var i=this.root.replace(S,"");e.indexOf(i)||(e=e.substr(i.length))}else e=this.getHash();return e.replace(x,"")},start:function(t){if(w.started)throw new Error("Backbone.history has already been started");w.started=!0,this.options=a.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),n=document.documentMode,r=C.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(k,"/"),r&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(x,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),w.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),i=a.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return i},navigate:function(e,t){if(!w.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var i=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),e.history=new w;var $=e.View=function(e){this.cid=a.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},T=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];a.extend($.prototype,d,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=a.result(this,"events"))){this.undelegateEvents();for(var t in e){var i=e[t];if(a.isFunction(i)||(i=this[e[t]]),!i)throw new Error('Method "'+e[t]+'" does not exist');var n=t.match(T),r=n[1],o=n[2];i=a.bind(i,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,i):this.$el.on(r,o,i)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=a.extend({},a.result(this,"options"),e)),a.extend(this,a.pick(e,E)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var t=a.extend({},a.result(this,"attributes"));this.id&&(t.id=a.result(this,"id")),this.className&&(t["class"]=a.result(this,"className"));var i=e.$("<"+a.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}});var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.sync=function(t,i,n){var r=D[t];a.defaults(n||(n={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:r,dataType:"json"};if(n.url||(o.url=a.result(i,"url")||A()),null!=n.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(n.attrs||i.toJSON(n))),n.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),n.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",n.emulateJSON&&(o.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===o.type||n.emulateJSON||(o.processData=!1);var l=n.success;n.success=function(e){l&&l(i,e,n),i.trigger("sync",i,e,n)};var c=n.error;n.error=function(e){c&&c(i,e,n),i.trigger("error",i,e,n)};var u=n.xhr=e.ajax(a.extend(o,n));return i.trigger("request",i,u,n),u},e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var I=function(e,t){var i,n=this;i=e&&a.has(e,"constructor")?e.constructor:function(){return n.apply(this,arguments)},a.extend(i,n,t);var r=function(){this.constructor=i};return r.prototype=n.prototype,i.prototype=new r,e&&a.extend(i.prototype,e),i.__super__=n.prototype,i};h.extend=p.extend=g.extend=$.extend=w.extend=I;
var A=function(){throw new Error('A "url" property or function must be specified')}}.call(this),define("backbone",["jquery","underscore"],function(e){return function(){var t;return t||e.Backbone}}(this)),define("components/command-bar/help-entry",["backbone"],function(e){return e.Model.extend({})}),define("utils/is-promise",["underscore"],function(e){return function(t){return e.isObject(t)&&e.has(t,"promise")&&e.isFunction(t.promise)}}),define("components/command-bar/command",["backbone","underscore","components/command-bar/help-entry","utils/is-promise"],function(e,t,i,n){return e.Model.extend({defaults:{score:0},getHelpEntry:function(){var e=t.isFunction(this.get("helpEntry"))?this.get("helpEntry")():this.get("helpEntry");return e&&(e=new i(e)),e},getSuggestions:function(e,i){function r(e){return t.each(e,function(e){e.has("label")||e.set("label",e.get("value")),e.set("command",this)}.bind(this)),e}var o=t.every(this.get("guards"),function(t){return t(e,i)});if(o){var s=this.get("suggest").call(this,e,i);if(n(s)){var a=new $.Deferred;return s.done(function(e){a.resolve(r.call(this,e))}.bind(this)),s.fail(function(){a.reject()}),a}return r.call(this,s)}return[]}})}),define("components/command-bar/commands",["backbone","components/command-bar/command"],function(e,t){return e.Collection.extend({model:t})}),define("components/command-bar/filter",["backbone"],function(e){return e.Model.extend({})}),define("components/command-bar/filters",["backbone","components/command-bar/filter"],function(e,t){return e.Collection.extend({model:t})}),define("components/command-bar/suggestion",["backbone"],function(e){function t(){var e=this.get("score"),t=this.get("count"),i=this.get("command"),n=i?i.get("score"):0,r=Math.min(Math.log(t+1)/2.302,1);this.set({totalScore:n+r+e})}function i(){var e=localStorage.getItem("cb-{}".format(this.get("value")));e&&this.set({count:parseInt(e,10)})}function n(){localStorage.setItem("cb-{}".format(this.get("value")),this.get("count"))}return e.Model.extend({defaults:{score:0,count:0,totalScore:0},initialize:function(){this.on("change:score change:count change:command",t,this),localStorage&&(i.call(this),this.on("change:count",n,this))},execute:function(){this.set({count:this.get("count")+1}),this.has("url")?(this.trigger("execute:url"),window.location=this.get("url")):this.has("execute")?(this.trigger("execute:code"),this.get("execute").call(this)):this.get("command").has("execute")&&(this.trigger("execute:code"),this.get("command").get("execute")(this))}})}),define("components/command-bar/suggestions",["backbone","components/command-bar/suggestion"],function(e,t){return e.Collection.extend({model:t,comparator:function(e,t){var i=e.get("totalScore"),n=t.get("totalScore");if(i!==n)return n-i;var r=e.get("label"),o=t.get("label");return r!==o?o>r?-1:1:e.id<t.id?-1:1},getDistinct:function(){var e={};return this.filter(function(t){var i=t.get("value"),n=!_.has(e,i);return e[i]=t,n})},getFocused:function(){return this.find(function(e){return e&&e.get("focused")===!0})},getNext:function(){var e=this.getFocused();return e&&this.at(this.indexOf(e)+1)?this.at(this.indexOf(e)+1):this.at(0)},getPrevious:function(){var e=this.getFocused();return e&&this.at(this.indexOf(e)-1)?this.at(this.indexOf(e)-1):this.at(this.length-1)},next:function(){var e=this.getFocused();return this.getNext().set("focused",!0),1===this.length?this:(e&&e.set("focused",!1),this)},previous:function(){var e=this.getFocused();return this.getPrevious().set("focused",!0),1===this.length?this:(e&&e.set("focused",!1),this)}})}),define("components/command-bar/help-entries",["backbone","components/command-bar/help-entry"],function(e,t){return e.Collection.extend({model:t,comparator:function(e){return-e.get("score")}})}),define("text",["module"],function(e){var t,i,n,r,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),u=l&&location.hostname,d=l&&(location.port||void 0),h={},p=e.config&&e.config()||{};return t={version:"2.0.7",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=o[t];try{e=new ActiveXObject(i)}catch(n){}if(e){o=[i];break}}return e},parseName:function(e){var t,i,n,r=!1,o=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!s||o>1)?(t=e.substring(0,o),i=e.substring(o+1,e.length)):t=e,n=i||t,o=n.indexOf("!"),-1!==o&&(r="strip"===n.substring(o+1),n=n.substring(0,o),i?i=n:t=n),{moduleName:t,ext:i,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,n,r){var o,s,a,l=t.xdRegExp.exec(e);return l?(o=l[2],s=l[3],s=s.split(":"),a=s[1],s=s[0],!(o&&o!==i||s&&s.toLowerCase()!==n.toLowerCase()||(a||s)&&a!==r)):!0},finishLoad:function(e,i,n,r){n=i?t.strip(n):n,p.isBuild&&(h[e]=n),r(n)},load:function(e,i,n,r){if(r.isBuild&&!r.inlineText)return n(),void 0;p.isBuild=r.isBuild;var o=t.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),a=i.toUrl(s),h=p.useXhr||t.useXhr;!l||h(a,c,u,d)?t.get(a,function(i){t.finishLoad(e,o.strip,i,n)},function(e){n.error&&n.error(e)}):i([s],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,n)})},write:function(e,i,n){if(h.hasOwnProperty(i)){var r=t.jsEscape(h[i]);n.asModule(e+"!"+i,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,i,n,r,o){var s=t.parseName(i),a=s.ext?"."+s.ext:"",l=s.moduleName+a,c=n.toUrl(s.moduleName+a)+".js";t.load(l,n,function(){var i=function(e){return r(c,e)};i.asModule=function(e,t){return r.asModule(e,c,t)},t.write(e,l,i,o)},o)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(i=require.nodeRequire("fs"),t.get=function(e,t,n){try{var r=i.readFileSync(e,"utf8");0===r.indexOf("﻿")&&(r=r.substring(1)),t(r)}catch(o){n(o)}}):"xhr"===p.env||!p.env&&t.createXhr()?t.get=function(e,i,n,r){var o,s=t.createXhr();if(s.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),r[o]);p.onXhr&&p.onXhr(s,e),s.onreadystatechange=function(){var t,r;4===s.readyState&&(t=s.status,t>399&&600>t?(r=new Error(e+" HTTP status: "+t),r.xhr=s,n(r)):i(s.responseText),p.onXhrComplete&&p.onXhrComplete(s,e))},s.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,n,r="utf-8",o=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),l="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=a.readLine());)i.append(s),i.append(n);l=String(i.toString())}finally{a.close()}t(l)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var i,o,s={},a=new FileUtils.File(e);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),i.init(a,1,0,!1),o=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),o.init(i,"utf-8",i.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(i.available(),s),o.close(),i.close(),t(s.value)}catch(l){throw new Error((a&&a.path||"")+": "+l)}}),t}),define("text!components/command-bar/suggestion-item.mustache",[],function(){return'[[#icon]]\n  <span class="suggestion-icon">\n    <img src="[[icon]]" alt="[[label]]">\n  </span>\n[[/icon]]\n\n[[label]]\n\n[[#help]]\n  <em>[[help]]</em>\n[[/help]]\n'}),define("components/command-bar/suggestion-item",["backbone","mustache","underscore","text!components/command-bar/suggestion-item.mustache"],function(e,t,i,n){return e.View.extend({tagName:"li",template:n,initialize:function(){i.bindAll(this,"render","focus"),this.model.has("template")&&(this.template=this.model.get("template")),this.model.on("change:focused",this.focus)},render:function(){return this.$el.html(t.render(this.template,this.model.toJSON())),this},focus:function(e){this.$el.toggleClass("focused",e)}})}),define("components/command-bar/suggestion-list",["backbone","underscore","components/command-bar/suggestions","components/command-bar/suggestion-item"],function(e,t,i,n){return e.View.extend({tagName:"ul",initialize:function(){t.bindAll(this,"render","resetCollection"),this.collection=this.options.collection,this.collection.on("reset",this.render),this.collection.on("bulkAdd",this.resetCollection),this.$el.addClass("suggestions")},render:function(){this.$el.toggleClass("hidden",!this.collection.length);var e=[];return t.each(this.collection.slice(0,10),function(t){e.push(new n({model:t}).render().el)}.bind(this)),this.$el.html(e),this},resetCollection:function(){return this.collection.reset(this.collection.getDistinct()),this}})}),define("text!components/command-bar/help-item.mustache",[],function(){return"[[command]]\n\n[[#description]]\n  <em>[[description]]</em>\n[[/description]]\n"}),define("components/command-bar/help-item",["backbone","mustache","underscore","text!components/command-bar/help-item.mustache"],function(e,t,i,n){return e.View.extend({tagName:"li",template:n,initialize:function(){i.bindAll(this,"render"),this.model.has("template")&&(this.template=this.model.get("template"))},render:function(){return this.$el.html(t.render(this.template,this.model.toJSON())),this}})}),define("components/command-bar/help-list",["backbone","underscore","components/command-bar/help-item"],function(e,t,i){return e.View.extend({tagName:"ul",initialize:function(){t.bindAll(this,"render"),this.collection=this.options.collection,this.collection.on("bulkAdd reset",this.render),this.$el.addClass("help-entries")},render:function(){return this.$el.toggleClass("hidden",!this.collection.length).empty(),this.collection.each(function(e){this.$el.append(new i({model:e}).render().el)}.bind(this)),this}})}),define("text!components/command-bar/command-bar.mustache",[],function(){return'<form class="aui">\n  <input type="text" class="text query long-field">\n</form>\n'}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("spin",t):e.Spinner=t()}(this,function(){function e(e,t){var i,n=document.createElement(e||"div");for(i in t)n[i]=t[i];return n}function t(e){for(var t=1,i=arguments.length;i>t;t++)e.appendChild(arguments[t]);return e}function i(e,t,i,n){var r=["opacity",t,~~(100*e),i,n].join("-"),o=.01+100*(i/n),s=Math.max(1-(1-e)/t*(100-o),e),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[r]||(h.insertRule("@"+l+"keyframes "+r+"{"+"0%{opacity:"+s+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+s+"}"+"}",h.cssRules.length),d[r]=1),r}function n(e,t){var i,n,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<u.length;n++)if(i=u[n]+t,void 0!==r[i])return i}function r(e,t){for(var i in t)e.style[n(e,i)||i]=t[i];return e}function o(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)void 0===e[n]&&(e[n]=i[n])}return e}function s(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function a(e){return"undefined"==typeof this?new a(e):(this.opts=o(e||{},a.defaults,p),void 0)}function l(){function i(t,i){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}h.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(e,n){function o(){return r(i("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function s(e,s,a){t(d,t(r(o(),{rotation:360/n.lines*e+"deg",left:~~s}),t(r(i("roundrect",{arcsize:n.corners}),{width:l,height:n.width,left:n.radius,top:-n.width>>1,filter:a}),i("fill",{color:n.color,opacity:n.opacity}),i("stroke",{opacity:0}))))}var a,l=n.length+n.width,c=2*l,u=2*-(n.width+n.length)+"px",d=r(o(),{position:"absolute",top:u,left:u});if(n.shadow)for(a=1;a<=n.lines;a++)s(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;a<=n.lines;a++)s(a);return t(e,d)},a.prototype.opacity=function(e,t,i,n){var r=e.firstChild;n=n.shadow&&n.lines||0,r&&t+n<r.childNodes.length&&(r=r.childNodes[t+n],r=r&&r.firstChild,r=r&&r.firstChild,r&&(r.opacity=i))}}var c,u=["webkit","Moz","ms","O"],d={},h=function(){var i=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};a.defaults={},o(a.prototype,{spin:function(t){this.stop();var i,n,o=this,a=o.opts,l=o.el=r(e(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),u=a.radius+a.length+a.width;if(t&&(t.insertBefore(l,t.firstChild||null),n=s(t),i=s(l),r(l,{left:("auto"==a.left?n.x-i.x+(t.offsetWidth>>1):parseInt(a.left,10)+u)+"px",top:("auto"==a.top?n.y-i.y+(t.offsetHeight>>1):parseInt(a.top,10)+u)+"px"})),l.setAttribute("role","progressbar"),o.lines(l,o.opts),!c){var d,h=0,p=(a.lines-1)*(1-a.direction)/2,f=a.fps,m=f/a.speed,g=(1-a.opacity)/(m*a.trail/100),v=m/a.lines;!function b(){h++;for(var e=0;e<a.lines;e++)d=Math.max(1-(h+(a.lines-e)*v)%m*g,a.opacity),o.opacity(l,e*a.direction+p,d,a);o.timeout=o.el&&setTimeout(b,~~(1e3/f))}()}return o},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(n,o){function s(t,i){return r(e(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*l+o.rotate)+"deg) translate("+o.radius+"px"+",0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var a,l=0,u=(o.lines-1)*(1-o.direction)/2;l<o.lines;l++)a=r(e(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:c&&i(o.opacity,o.trail,u+l*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&t(a,r(s("#000","0 0 4px #000"),{top:"2px"})),t(n,t(a,s(o.color,"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(e,t,i){t<e.childNodes.length&&(e.childNodes[t].style.opacity=i)}});var f=r(e("group"),{behavior:"url(#default#VML)"});return!n(f,"transform")&&f.adj?l():c=n(f,"animation"),a}),function(e){if("object"==typeof exports)e(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define("jquery-plugins/jquery.spin",["jquery","spin"],e);else{if(!window.Spinner)throw new Error("Spin.js not present");e(window.jQuery,window.Spinner)}}(function(e,t){e.fn.spin=function(i,n){return this.each(function(){var r=e(this),o=r.data();o.spinner&&(o.spinner.stop(),delete o.spinner),i!==!1&&(i=e.extend({color:n||r.css("color")},e.fn.spin.presets[i]||i),o.spinner=new t(i).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),function(e,t){"function"==typeof define&&define.amd?define("utils/loading",["jquery","jquery-plugins/jquery.spin"],t):t(e.jQuery)}(this,function(e){e.fn.loading=function(t,i){var n=e(this),r=e.extend({loadTime:400,spin:!1,disable:!0},i),o=setTimeout(function(){r.spin?n.spin(r.spin):r.mask?n.addClass("has-mask"):n.addClass("loading"),r.disable&&n.attr({"aria-disabled":!0,disabled:!0})},r.loadTime);return t=t||e.Deferred(),t.always(function(){clearTimeout(o),r.disable&&n.removeAttr("aria-disabled disabled"),r.spin?n.spin(!1):r.mask?n.removeClass("has-mask"):n.removeClass("loading")})}}),function(e){e(function(){var t={primaryStyles:["fontFamily","fontSize","fontWeight","fontVariant","fontStyle","paddingLeft","paddingTop","paddingBottom","paddingRight","marginLeft","marginTop","marginBottom","marginRight","borderLeftColor","borderTopColor","borderBottomColor","borderRightColor","borderLeftStyle","borderTopStyle","borderBottomStyle","borderRightStyle","borderLeftWidth","borderTopWidth","borderBottomWidth","borderRightWidth","line-height","outline"],specificStyle:{"word-wrap":"break-word","overflow-x":"hidden","overflow-y":"auto"},simulator:e('<div id="textarea_simulator"/>').css({position:"absolute",top:0,left:0,visibility:"hidden"}).appendTo(document.body),toHtml:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").split(" ").join('<span style="white-space:prev-wrap">&nbsp;</span>')},getCaretPosition:function(){var i=t,n=this,r=n[0],o=n.offset();if(e.browser.msie){r.focus();var s=document.selection.createRange();return e("#hskeywords").val(r.scrollTop),{left:s.boundingLeft-o.left,top:parseInt(s.boundingTop)-o.top+r.scrollTop+document.documentElement.scrollTop+parseInt(n.getComputedStyle("fontSize"))}}i.simulator.empty(),e.each(i.primaryStyles,function(e,t){n.cloneStyle(i.simulator,t)}),i.simulator.css(e.extend({width:n.width(),height:n.height()},i.specificStyle));var a=n.val(),l=n.getCursorPosition(),c=a.substring(0,l),u=a.substring(l),d=e('<span class="before"/>').html(i.toHtml(c)),h=e('<span class="focus"/>'),p=e('<span class="after"/>').html(i.toHtml(u));i.simulator.append(d).append(h).append(p);var f=h.offset(),m=i.simulator.offset();return{top:f.top-m.top-r.scrollTop+(e.browser.mozilla?0:parseInt(n.getComputedStyle("fontSize"))),left:h[0].offsetLeft-i.simulator[0].offsetLeft-r.scrollLeft}}};e.fn.extend({getComputedStyle:function(t){if(0!=this.length){var i=this[0],n=this.css(t);return n=n||(e.browser.msie?i.currentStyle[t]:document.defaultView.getComputedStyle(i,null)[t])}},cloneStyle:function(t,i){var n=this.getComputedStyle(i);n&&e(t).css(i,n)},cloneAllStyle:function(e){var t=this[0];for(var i in t.style){var n=t.style[i];"string"==typeof n||"number"==typeof n?this.cloneStyle(e,i):0/0}},getCursorPosition:function(){var t=this[0],i=0;if("selectionStart"in t)i=t.selectionStart;else if("selection"in document){var n=document.selection.createRange();if(!(parseInt(e.browser.version)>6)){var r=document.body.createTextRange();for(r.moveToElementText(t);r.compareEndPoints("StartToStart",n)<0;i++)r.moveStart("character",1);for(var o=0;i>=o;o++)"\n"==t.value.charAt(o)&&i++;var s=t.value.split("\n").length-1;return i-=s}t.focus();var a=document.selection.createRange().text.length;n.moveStart("character",-t.value.length),i=n.text.length-a}return i},getCaretPosition:t.getCaretPosition})})}(window.jQuery),define("jquery-plugins/jquery.caretposition",function(){}),define("components/command-bar/index",["jquery","mustache","underscore","components/command-bar/commands","components/command-bar/filters","components/command-bar/suggestion","components/command-bar/suggestions","components/command-bar/help-entries","components/command-bar/suggestion-list","components/command-bar/help-list","utils/is-promise","text!components/command-bar/command-bar.mustache","utils/loading","jquery-plugins/jquery.caretposition"],function(e,t,i,n,r,o,s,a,l,c,u,d){return Backbone.View.extend({events:{"submit form":"submit","keyup input.query":"keyup","keydown input.query":"keydown","focusout input.query":"focusout","click ul.suggestion li":"execute"},initialize:function(){i.bindAll(this,"submit","keyup","keydown","focusout","execute","annotateFilter"),this.commands=new n,this.filters=new r,this.suggestions=new s,this.helpEntries=new a,this.filters.on("add",this.annotateFilter),this.query="",this.typeahead="",this.context="",this.suggestionList=new l({collection:this.suggestions}),this.helpList=new c({collection:this.helpEntries}),this.suggestions.on("execute",function(){this.closeDialog()}.bind(this))},render:function(){this.$el.addClass("command-bar").html(t.render(d)).append(this.suggestionList.render().el).append(this.helpList.render().el),this.$query=this.$("input.query");var i=e("<div/>").addClass("typeahead").append(e("<span/>"));return this.$("form").append(i),this.$typeahead=i.find("span"),this},submit:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).val();i!==this.query&&(this.query=i,this.updateSuggestions())},keydown:function(e){var t=13===e.keyCode,i=27===e.keyCode,n=9===e.keyCode&&!e.shiftKey||40===e.keyCode,r=9===e.keyCode&&e.shiftKey||38===e.keyCode,o=39===e.keyCode,s=this.$query.getCursorPosition()===this.query.length;t&&this.execute(),i&&this.closeDialog(),n&&!this.suggestions.length&&this.history(),n&&this.suggestions.length&&this.suggestions.next(),r&&this.suggestions.length&&this.suggestions.previous(),(n||r)&&(e.preventDefault(),this.suggestions.length&&this.setQuery(this.suggestions.getFocused().get("value")||"")),o&&s&&!this.suggestions.getFocused()&&this.autocompleteTypeahead()},focusout:function(){this.closeDialog()},updateTypeahead:function(){var e=this.suggestions.at(0),t=e?e.get("value"):"",i=this.$query.getCaretPosition();return!this.suggestions.getFocused()&&t.startsWith(this.query)?(this.typeahead=t,this.$typeahead.css({top:i.top,left:i.left}).html(t.slice(this.query.length).replace(" ","&nbsp;"))):(this.typeahead="",this.$typeahead.empty()),this},autocompleteTypeahead:function(){return this.typeahead&&this.setQuery(this.typeahead).suggestions.next(),this},annotateFilter:function(e){return e.set("commandBar",this),this},setQuery:function(e){return this.$query.val(e),this.query=e,this.updateTypeahead(),this},history:function(){if(localStorage){var e=0,t=this.updateSuggestions,n=JSON.parse(localStorage.getItem("commandbar-history")||"[]"),r=i.map(n,function(i){return new o({label:"{}: {}".format(e++,i.value),value:i.value,execute:t,score:i.date})});r.length&&(this.suggestions.reset(),this.helpEntries.reset(),this.suggestions.add(r),this.suggestions.trigger("bulkAdd"))}},addHistory:function(e){if(localStorage){var t=[],n=JSON.parse(localStorage.getItem("commandbar-history")||"[]");for(n.unshift({value:e.get("value"),date:Date.now()}),n.sort(function(e,t){return e.value<t.value?-1:e.value>t.value?1:t.date-e.date}),i.each(n,function(e){var i=t.length;i?e.value!==t[i-1].value&&t.push(e):t.push(e)}),n=t,n.sort(function(e,t){return t.date-e.date});n.length>10;)n.pop();localStorage.setItem("commandbar-history",JSON.stringify(n))}},setContext:function(e){return this.context=e,this},execute:function(){var e=this.suggestions.getFocused();if(!e){var t=this.query;e=this.suggestions.find(function(e){return t===e.get("value")})}return e&&(this.addHistory(e),e.execute()),this},openDialog:function(){return this.$el.slideDown(200,function(){this.$query.focus()}.bind(this)),this.setQuery(this.context).updateSuggestions(),this},closeDialog:function(){return this.setQuery("").$el.slideUp(200),this},updateSuggestions:function(){this.suggestions.reset(),this.helpEntries.reset();var e=this.query;if(e){var t={};this.filters.each(function(i){t=i.get("execute").call(i,e,t)}.bind(this));var i=[],n=[];this.commands.each(function(r){var o=r.getSuggestions(e,t);o&&(u(o)?n.push(o):i.push.apply(i,o))}),i.length&&(this.suggestions.add(i),this.suggestions.trigger("bulkAdd")),n.length&&this.addAsyncSuggestions(n)}else this.updateHelpEntries();return this.updateTypeahead(),this},updateHelpEntries:function(){this.helpEntries.reset();var e=[];return this.commands.each(function(t){var i=t.getHelpEntry();i&&e.push(i)}),e.length&&(this.helpEntries.add(e),this.helpEntries.trigger("bulkAdd")),this},addAsyncSuggestions:function(t){return t=e.when.apply(this,t),t.done(function(){this.updateSuggestions()}.bind(this)),this.$query.loading(t,{disable:!1}),this}})}),define("command-bar/regexes/repo-command",[],function(){var e="([\\w\\-.]+)",t="([\\w\\-.+]*)",i="([\\w\\-./+]*)",n="(\\s+.*)",r="^{}(?:\\/{}(?::{})?{}?)?$".format(e,t,i,n);return new RegExp(r)}),define("command-bar/filters/repo",["components/command-bar/filter","command-bar/regexes/repo-command"],function(e,t){return new e({execute:function(e,i){var n=t.exec(e),r=this.get("commandBar");return n&&(i.repoOwner=n[1],i.repoSlug=n[2],i.repoBranch=n[3],i.repoFullSlug="{}/{}".format(n[1],n[2]),i.query=n[4]||""),void 0===i.repoBranch&&i.query&&":"===i.query.trim()&&(r.setQuery(i.repoFullSlug+":"),i.repoBranch="",i.query=""),i}})}),define("command-bar/guards/is-repo",[],function(){return function(e,t){return t.repoSlug}}),define("command-bar/filters/user",["components/command-bar/filter","command-bar/guards/is-repo"],function(e,t){return new e({execute:function(e,i){var n=e.split(/\s+/);return!t(e,i)&&/@([\w-\s]+)/.exec(n[0])&&(i.username=n[0].lstrip("@"),i.query=e.substring(n[0].length)),i}})}),define("command-bar/filters/command",["components/command-bar/filter"],function(e){return new e({execute:function(e,t){var i=(void 0===t.query?e:t.query).trim(),n=this.get("commandBar"),r=_.compact(n.commands.map(function(e){var t=e.get("name");if(t){if(i.startsWith(t))return[t,{value:i.substring(t.length),partial:!1}];if(t.startsWith(i))return[t,{value:"",partial:!0}]}}));return t.named=_.object(r),t}})}),define("components/command-bar/async-command",["jquery","underscore","components/command-bar/command","utils/is-promise"],function(e,t,i,n){return i.extend({initialize:function(){t.bindAll(this,"suggest"),this.key=null,this.dataCache={},this.set("suggest",this.suggest),this.has("createKey")&&(this.createKey=this.get("createKey")),this.has("createPromise")&&(this.createPromise=this.get("createPromise"))},createKey:function(e,i){return t.isFunction(this.get("url"))?this.get("url").call(this,e,i):this.get("url")},createPromise:function(i,n){return e.ajax({url:t.isFunction(this.get("url"))?this.get("url").call(this,i,n):this.get("url"),type:"GET",dataType:"json"})},suggest:function(t,i){var r,o,s,a=this.dataCache;r=this.createKey(t,i),r!==this.key&&(o=a[this.key]||null,o&&n(o)&&o.reject()),this.key=r;var l=this.get("transform").bind(this);if(s=a[r]||null)return n(s)?s:l(a[r],t,i);var c=new e.Deferred;a[r]=c;var u=this.createPromise(t,i);return u.done(function(e){a[r]=e,c.isRejected()||c.resolve(l(e,t,i))}).fail(function(){a[r]=[],c.resolve([])}),c}})}),define("command-bar/guards/not-repo",["command-bar/guards/is-repo"],function(e){return function(t,i){return!e(t,i)}}),define("command-bar/guards/is-user",[],function(){return function(e,t){return!!t.username}}),define("command-bar/guards/in-context",[],function(){return function(e,t){var e=void 0===t.query?e:t.query;return e.length>0&&" "===e[0]}}),define("command-bar/guards/in-user-context",["command-bar/guards/is-user","command-bar/guards/in-context"],function(e,t){return function(i,n){return e(i,n)&&t(i,n)}}),define("command-bar/guards/not-in-user-context",["command-bar/guards/in-user-context"],function(e){return function(t,i){return!e(t,i)}}),define("text!command-bar/templates/user-suggestion.mustache",[],function(){return'<span class="user-avatar-container">\n  <img class="avatar avatar16" src="[[icon]]" alt="[[label]] avatar">\n</span>\n\n[[label]]\n\n[[#help]]\n  <em>[[help]]</em>\n[[/help]]\n'}),define("command-bar/commands/following-users",["underscore","components/command-bar/async-command","components/command-bar/suggestion","command-bar/guards/not-repo","command-bar/guards/not-in-user-context","text!command-bar/templates/user-suggestion.mustache"],function(e,t,i,n,r,o){return new t({url:"/!api/internal/my/following/",guards:[n,r],helpEntry:{command:"@user",description:"jump to user"},transform:function(t,n){n=n.toLowerCase().lstrip("@");var r=e.filter(t,function(e){var t=e.username.toLowerCase(),i=e.displayName.toLowerCase();return t.startsWith(n)||i.startsWith(n)});return e.map(r,function(e){return new i({template:o,icon:e.avatar,value:"@{}".format(e.username),url:e.url,label:e.username,help:e.displayName})})}})}),define("command-bar/commands/global-users",["underscore","components/command-bar/async-command","components/command-bar/suggestion","command-bar/guards/not-repo","command-bar/guards/not-in-user-context","text!command-bar/templates/user-suggestion.mustache"],function(e,t,i,n,r,o){return new t({guards:[n,r],url:function(e){return"/xhr/user-mention?term={}".format(e.lstrip("@"))},transform:function(t){return e.map(t,function(e){return new i({template:o,icon:e.avatar_url,value:"@{}".format(e.username),url:"/"+e.username,label:e.username,help:e.display_name})})}})}),define("utils/repo-filter",["underscore"],function(e){function t(e){return e.replace(i,"\\$&")}var i=/[-[\]{}()*+?.,\\^$|#\s]/g;return{getRegExp:function(e){var i=e.split(/[\/\s]/),n=i.map(t),r=n.join(".*[\\/\\s].*");return new RegExp(r,"i")},filterList:function(t,i){var n=this.getRegExp(i);return e.filter(t,function(e){return e.fullSlug.match(n)})}}}),define("command-bar/guards/not-user",["command-bar/guards/is-user"],function(e){return function(t,i){return!e(t,i)}}),define("command-bar/guards/in-repo-context",["command-bar/guards/is-repo","command-bar/guards/in-context"],function(e,t){return function(i,n){return e(i,n)&&t(i,n)}}),define("command-bar/guards/not-in-repo-context",["command-bar/guards/in-repo-context"],function(e){return function(t,i){return!e(t,i)}}),define("text!command-bar/templates/repo-suggestion.mustache",[],function(){return'<span class="repo-avatar-container size16">\n  <img src="[[icon]]" alt="[[label]]">\n</span>\n\n[[label]]\n\n[[#help]]\n  <em>[[help]]</em>\n[[/help]]\n'}),define("command-bar/commands/my-repos",["underscore","utils/repo-filter","components/command-bar/async-command","components/command-bar/suggestion","command-bar/guards/not-user","command-bar/guards/not-in-repo-context","text!command-bar/templates/repo-suggestion.mustache"],function(e,t,i,n,r,o,s){return new i({score:1,url:"/!api/internal/my/repositories/",guards:[r,o],helpEntry:{command:"user/repo",description:"jump to repository"},transform:function(i,r){var o=t.filterList(i,r);return e.map(o,function(e){return new n({template:s,icon:e.logo,value:e.fullSlug,url:e.url,label:"{} / {}".format(e.owner,e.name)})})}})}),define("command-bar/guards/is-repo-branch",[],function(){return function(e,t){return void 0!==t.repoBranch}}),define("command-bar/guards/not-repo-branch",["command-bar/guards/is-repo-branch"],function(e){return function(t,i){return!e(t,i)}}),define("command-bar/commands/global-repos",["underscore","components/command-bar/async-command","components/command-bar/suggestion","command-bar/guards/not-user","command-bar/guards/not-in-repo-context","command-bar/guards/not-repo-branch","text!command-bar/templates/repo-suggestion.mustache"],function(e,t,i,n,r,o,s){return new t({guards:[n,o,r],url:function(e){return"/xhr/repos?term={}".format(e)},transform:function(t){return e.map(t,function(e){return new i({template:s,icon:e.avatar,value:e.value,url:"/{}".format(e.value),label:e.label})})}})}),define("utils/fuzzy-match",["underscore"],function(e){function t(e,t){var i;return i=e?function(i){var n=(i[e]||(i.get?i.get(e):void 0)).toLowerCase().score(t);return i.score=n,{score:-n,value:i}}:function(e){return{score:-e.toLowerCase().score(t),value:e}}}return function(i,n,r){return e.chain(i).map(t(r,(n||"").toLowerCase())).filter(function(e){return e.score}).sortBy("score").map(function(e){return e.value}).value()}}),define("command-bar/commands/repo-branches",["underscore","utils/fuzzy-match","components/command-bar/async-command","components/command-bar/suggestion","command-bar/guards/is-repo-branch","command-bar/guards/not-in-repo-context"],function(e,t,i,n,r,o){return new i({guards:[r,o],url:function(e,t){return"/!api/1.0/repositories/{}/branches-tags/".format(t.repoFullSlug)
},helpEntry:{command:"user/repo:branch",description:"jump to branch"},transform:function(i,r,o){var s=[];for(var a in i)s.push({name:a});return s=t(i.branches,o.repoBranch,"name"),e.map(s,function(e){return new n({value:value="{}:{}".format(o.repoFullSlug,e.name),url:"/{}/commits/branch/{}".format(o.repoFullSlug,e.name),score:e.score})})}})}),define("utils/text",["jquery","underscore"],function(e,t){var i=3==="a1a".split(/(\d)/).length;return{toSentenceCase:function(e){return e+="",e?e.charAt(0).toUpperCase()+e.substring(1):""},camelCaseToHyphenated:function(e){return"string"!=typeof e?void 0:e.replace(/([^\s\-_])(?=[A-Z])/g,"$1-").replace(/\s/,"-").toLowerCase()},indent:function(e,t,i){var n="number"==typeof t&&isFinite(t)?t:4,r="string"==typeof i?i:" ";return"string"!=typeof e?void 0:0>n?e:new Array(n+1).join(r)+e},unindent:function(e,t,i){var n="number"==typeof t&&isFinite(t)?t:4,r="string"==typeof i?i:" ";if("string"!=typeof e)return void 0;if(0>n)return e;for(;e.charAt(0)===r&&n;)e=e.substring(1),n--;return e},formatSizeInBytes:function(e){var t=[" bytes","KB","MB","GB","TB","PB"],i=1024,n=0,r=t.length-1;if(e="number"==typeof e?e:parseInt(e,10),isNaN(e))return"";for(;e>=i&&r>n;)e/=i,n++;return e=Math.floor(10*e)/10,e+t[n]},abbreviateText:function(e,t,i){if("string"!=typeof e)return void 0;if(isNaN(t)||0>t||e.length<=t)return e;var n="string"==typeof i?i:"…",r=e.length-t+n.length,o=Math.round(e.length/2);return e.substring(0,o-Math.ceil(r/2))+n+e.substring(o+Math.floor(r/2),e.length)},convertBranchNameToSentence:function(e){if(!e||"string"!=typeof e)return"";if(!i)return e;var n=/([A-Z]{1,10}-\d+)/,r=t.map(e.split(n),function(e,t){return 0===t%2?e.replace(/[\-_]/g," "):e});return this.toSentenceCase(r.join(""))},pluralize:function(e,t,i){return 1!=t?void 0!==i?i:e+"s":e}}}),define("command-bar/guards/is-command",[],function(){return function(e,t){var i=!t;return e?function(t,n){return n.named&&n.named[e]&&(i||n.named[e].partial===!1)}:function(){return!1}}}),define("command-bar/regexes/numeric-key",[],function(){return/(?:^#?([0-9]+)$)|(?:^#$)/}),define("text!command-bar/templates/pr-suggestion.mustache",[],function(){return'<span class="suggestion-icon aui-icon aui-icon-small aui-iconfont-devtools-pull-request">\n  Pull request icon\n</span>\n\n[[label]]\n\n[[#help]]\n  <em class="extended">[[help]]</em>\n[[/help]]\n\n'}),define("command-bar/commands/repo-pullrequests",["underscore","utils/fuzzy-match","utils/text","components/command-bar/async-command","components/command-bar/suggestion","command-bar/guards/is-command","command-bar/guards/not-repo-branch","command-bar/guards/in-repo-context","command-bar/regexes/numeric-key","text!command-bar/templates/pr-suggestion.mustache"],function(e,t,i,n,r,o,s,a,l,c){return new n({guards:[o("pr"),a,s],name:"pr",url:function(e,t){return"/!api/2.0/repositories/{}/pullrequests?pagelen=50".format(t.repoFullSlug)},helpEntry:{command:"user/repo pr #",description:"jump to pull request"},transform:function(n,o,s){var a=s.named[this.get("name")],u=n.values?n.values:[];if(a.partial)return[new r({value:"{} pr ".format(s.repoFullSlug),help:"{} {}".format(u.length,i.pluralize("pull request",u.length)),score:1})];var d=a.value.trim(),h=d.match(l);return h?h[1]&&(d=h[1],u=e.filter(u,function(e){return e.id.toString().startsWith(d)})):""!==d.trim()&&(u=t(u,d,"title")),e.map(u,function(e){var t=e.links.html;return new r({template:c,value:"{} pr #{}".format(s.repoFullSlug,e.id),url:t.href,label:"#{}: {}".format(e.id,e.title),score:e.score})})}})}),define("utils/path-condenser",[],function(){var e=function(e,t,i){this.targetSize=e,this.ellipses=void 0!==t?t:"~",this.ellipsesSize=void 0!==i?i:this.ellipses.length};return e.prototype={_shortenPathElement:function(e,t,i){var n=e[t];if(n.length<=i)return n.length;if(this.ellipsesSize>i)return e[t]=this.ellipses,this.ellipsesSize;var r=i-this.ellipsesSize,o=r>1?r>>1:0,s=r-o;return e[t]=[n.substring(0,s),this.ellipses,n.substring(n.length-o)].join(""),i},_calculateSegmentSize:function(e,t,i){var n=this.targetSize-e;return 0===t?n:i?n>>1:0|n/(t+1)},condense:function(e){if(e.length<=this.targetSize)return e;var t,i=0,n=e.split("/"),r=n.length-1;for(t=r;t>=0;t--)i+=this._shortenPathElement(n,t,this._calculateSegmentSize(i,t,t===r)),i++;return n.join("/")}},e}),define("text!command-bar/templates/file-suggestion.mustache",[],function(){return'<span class="suggestion-icon aui-icon aui-icon-small aui-iconfont-devtools-[[type]]">\n  File icon\n</span>\n<span title="[[path]]">\n[[&label]]\n</span>\n[[#help]]\n  <em class="extended">[[help]]</em>\n[[/help]]\n\n'}),define("command-bar/commands/repo-source",["underscore","utils/fuzzy-match","utils/path-condenser","components/command-bar/async-command","components/command-bar/suggestion","command-bar/guards/is-command","command-bar/guards/in-repo-context","text!command-bar/templates/file-suggestion.mustache"],function(e,t,i,n,r,o,s,a){function l(e){return e.repoBranch?[new r({value:"{}:{} src".format(e.repoFullSlug,e.repoBranch),help:"source",score:1})]:[new r({value:"{} src".format(e.repoFullSlug),help:"source",score:1})]}function c(e,t){var n,r=e,o="",s=new i(45,"&hellip;",2);return n=t.lastIndexOf("/"),-1!==n&&(o=t.substring(0,n)),o.length>1&&r.startsWith(o)?(r=r.substring(n),r=s.condense(r),r="&hellip;"+r):r=s.condense(r),r}return new n({guards:[o("src"),s],name:"src",createKey:function(e,t){var i=t.named[this.get("name")],n=this.get("url")(e,t);return i&&i.partial?"_"+n:n},createPromise:function(e,t){var i=t.named[this.get("name")],n=this.get("url")(e,t);if(i&&i.partial){var r=$.Deferred();return r.resolve(l(t)),r}return $.ajax({url:n,type:"GET",dataType:"json"})},url:function(e,t){return t.repoBranch?"/!api/1.0/repositories/{}/directory/{}/".format(t.repoFullSlug,t.repoBranch):"/!api/1.0/repositories/{}/directory/".format(t.repoFullSlug)},helpEntry:{command:"user/repo src path",description:"jump to source"},transform:function(i,n,o){var s,l=o.named[this.get("name")],u=i.values||[],d=(l?l.value||"":"").trim();return l.partial?i:(u=t(e.map(u,function(e){return{name:e}}),d,"name"),s=o.repoBranch?"{}:{}".format(o.repoFullSlug,o.repoBranch):o.repoFullSlug,u.length>10&&(u=u.slice(0,10)),e.map(u,function(e){return new r({template:a,value:"{} src {}".format(s,e.name),url:"/{}/src/{}/{}".format(o.repoFullSlug,i.revision,e.name),label:c(e.name,d),path:e.name,score:e.score,help:s,type:"/"===e[e.length-1]?"folder-open":"file"})}))}})}),define("text!command-bar/templates/issue-suggestion.mustache",[],function(){return'[[#icon]]\n  <span class="suggestion-icon">\n    <img src="[[icon]]" alt="[[label]]">\n  </span>\n[[/icon]]\n\n[[label]]\n\n[[#help]]\n  <em class="extended">[[help]]</em>\n[[/help]]\n'}),define("command-bar/commands/repo-issues",["underscore","utils/fuzzy-match","utils/text","components/command-bar/async-command","components/command-bar/suggestion","command-bar/guards/is-command","command-bar/guards/not-repo-branch","command-bar/guards/in-repo-context","command-bar/regexes/numeric-key","text!command-bar/templates/issue-suggestion.mustache"],function(e,t,i,n,r,o,s,a,l,c){return new n({states:{},guards:[o("issue"),a,s],name:"issue",url:function(e,t){var i=t.repoFullSlug,n=this.get("states"),r=n[i];return r||(r={start:0,issues:[]},n[i]=r),"/!api/1.0/repositories/{}/issues?status=open&status=new&start={}&limit=50".format(t.repoFullSlug,r.start)},helpEntry:{command:"user/repo issue #",description:"jump to issue"},transform:function(n,o,s){var a=s.named[this.get("name")],u=n.issues?n.issues:[],d=s.repoFullSlug,h=this.get("states"),p=h[d];if(delete n.issues,e.has(p,"total")&&(p.total=n.count),u.length&&(p.start+u.length<p.total&&(p.start+=u.length),p.issues=p.issues.concat(u)),a.partial)return[new r({value:"{} issue ".format(s.repoFullSlug),help:"{} {}".format(p.issues.length,i.pluralize("issue",p.issues.length)),score:1})];var f=a.value.trim(),m=f.match(l);return m?m[1]&&(f=m[1],u=e.filter(p.issues,function(e){return e.local_id.toString().startsWith(f)})):u=t(p.issues,f,"title"),e.map(u,function(e){return new r({template:c,value:"{} issue #{}".format(s.repoFullSlug,e.local_id),url:"/{}/issues/{}".format(s.repoFullSlug,e.local_id),label:"#{}: {}".format(e.local_id,e.title),score:e.score})})}})}),define("command-bar/commands/compare-branches",["components/command-bar/command","components/command-bar/suggestion","command-bar/guards/in-repo-context","command-bar/guards/is-command","command-bar/guards/is-repo-branch"],function(e,t,i,n,r){return new e({guards:[i,n("compare"),r],name:"compare",helpEntry:{command:"user/repo:branch compare branch",description:"compare two branches"},suggest:function(e,i){var n=i.named[this.get("name")];if(!n||n.partial||""===n.value.trim())return[new t({value:"{}:{} compare".format(i.repoFullSlug,i.repoBranch),url:"/{}/compare/{}...".format(i.repoFullSlug,i.repoBranch),help:"compare two branches",score:1})];var r=n.value.trim();return[new t({value:"{}:{} compare {}".format(i.repoFullSlug,i.repoBranch,r),url:"/{}/compare/{}..{}".format(i.repoFullSlug,i.repoBranch,r),label:"compare {} to {}".format(i.repoBranch,r)})]}})}),define("command-bar/commands/my-pullrequests",["underscore","utils/fuzzy-match","components/command-bar/async-command","components/command-bar/suggestion","command-bar/guards/not-in-user-context","command-bar/guards/not-in-repo-context","text!command-bar/templates/pr-suggestion.mustache"],function(e,t,i,n,r,o,s){return new i({url:"/!api/internal/my/pull-requests/",guards:[r,o],transform:function(i,r){var o=t(i,r,"title");return e.map(o,function(e){return new n({template:s,value:"{} pr #{}".format(e.repo,e.localId),url:e.url,label:"#{}: {}".format(e.localId,e.title),help:e.repo,score:e.score})})}})}),define("command-bar/commands/my-issues",["underscore","utils/fuzzy-match","components/command-bar/async-command","components/command-bar/suggestion","command-bar/guards/not-in-user-context","command-bar/guards/not-in-repo-context","text!command-bar/templates/issue-suggestion.mustache"],function(e,t,i,n,r,o,s){return new i({url:"/!api/internal/my/issues/",guards:[r,o],transform:function(i,r){var o=t(i,r,"title");return e.map(o,function(e){return new n({template:s,value:"{} issue #{}".format(e.repo,e.localId),icon:e.icon,url:e.url,label:"#{}: {}".format(e.localId,e.title),help:e.repo,score:e.score})})}})}),define("command-bar/index",["jquery","data/flags","data/current-repo","components/command-bar/index","command-bar/filters/repo","command-bar/filters/user","command-bar/filters/command","command-bar/commands/following-users","command-bar/commands/global-users","command-bar/commands/my-repos","command-bar/commands/global-repos","command-bar/commands/repo-branches","command-bar/commands/repo-pullrequests","command-bar/commands/repo-source","command-bar/commands/repo-issues","command-bar/commands/compare-branches","command-bar/commands/my-pullrequests","command-bar/commands/my-issues"],function(e,t,i,n,r,o,s,a,l,c,u,d,h,p,f,m,g,v){if(!t.commandBar)return!1;var b=new n;return e(document.body).append(b.render().el),b.filters.add([r,o,s]),b.commands.add([c,g,v,a,l,u,d,h,p,f,m]),i&&i.owner&&b.setContext("{}/{} ".format(i.owner.username,i.slug)),b}),define("data/current-user",["jquery"],function(e){var t=e(document.body).data("currentUser")||{};return t}),define("utils/ready",["jquery"],function(e){return function(t,i){var n=function(){if(i){var n=e(t);n.length&&i(n)}else t()};e(document).on("pjax:end",n),e(n)}}),define("ace",["jquery","data/current-user","utils/ready"],function(e,t,i){var n=document.charset||document.characterSet,r={host:"ace.atlassian.com",path:"/j/"};i(function(){var i,o=e(".ace-integration"),s={};if(o.length){if(!t.username)return o.removeClass("ace-integration"),void 0;i="{}//{}{}".format(window.location.protocol,r.host,r.path),document.MAX_used=document.MAX_used||",",s.loc=window.location,n&&(s.charset=n),document.URL&&(s.referer=document.URL),document.context&&(s.context=document.context),o.each(function(){var t,n=e(this);s.zoneid=n.attr("data-ace-zone"),","!==document.MAX_used?s.exclude=document.MAX_used:s.exclude&&delete s.exclude,t="{}?{}".format(i,e.param(s)),e.ajax({url:t,dataType:"jsonp",contentType:"application/json"}).done(function(e){e.html&&n.html(e.html),n.removeClass("ace-integration")}).error(function(){n.removeClass("ace-integration")})})}})}),define("utils/initialize",["underscore"],function(e){var t=[],i=!1,n=function(){for(var e=t.length;e--;)t[e]();i=!0};return n.register=function(){if(t.push.apply(t,e.toArray(arguments)),i)for(var n=arguments.length;n--;)arguments[n]()},n}),function(e){function t(t,n,r){var o=this;return this.on("click.pjax",t,function(t){var s=e.extend({},h(n,r));s.container||(s.container=e(this).attr("data-pjax")||o),i(t,s)})}function i(t,i,n){n=h(i,n);var o=t.currentTarget;if("A"!==o.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||location.protocol!==o.protocol||location.host!==o.host||o.hash&&o.href.replace(o.hash,"")===location.href.replace(location.hash,"")||o.href===location.href+"#")){var s={url:o.href,container:e(o).attr("data-pjax"),target:o,fragment:null};r(e.extend({},s,n)),t.preventDefault()}}function n(t,i,n){n=h(i,n);var o=t.currentTarget;if("FORM"!==o.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var s={type:o.method,url:o.action,data:e(o).serializeArray(),container:e(o).attr("data-pjax"),target:o,fragment:null};r(e.extend({},s,n)),t.preventDefault()}function r(t){function i(t,i){var r=e.Event(t,{relatedTarget:n});return a.trigger(r,i),!r.isDefaultPrevented()}t=e.extend(!0,{},e.ajaxSettings,r.defaults,t),e.isFunction(t.url)&&(t.url=t.url());var n=t.target,o=d(t.url).hash,a=t.context=p(t.container);t.data||(t.data={}),t.data._pjax=a.selector;var l;t.beforeSend=function(e,n){return"GET"!==n.type&&(n.timeout=0),e.setRequestHeader("X-PJAX","true"),e.setRequestHeader("X-PJAX-Container",a.selector),i("pjax:beforeSend",[e,n])?(n.timeout>0&&(l=setTimeout(function(){i("pjax:timeout",[e,t])&&e.abort("timeout")},n.timeout),n.timeout=0),t.requestUrl=d(n.url).href,void 0):!1},t.complete=function(e,n){l&&clearTimeout(l),i("pjax:complete",[e,n,t]),i("pjax:end",[e,t])},t.error=function(e,n,r){var o=m("",e,t),a=i("pjax:error",[e,n,r,t]);"GET"==t.type&&"abort"!==n&&a&&s(o.url)},t.success=function(n,l,u){var h=m(n,u,t);if(!h.contents)return s(h.url),void 0;if(r.state={id:t.id||c(),url:h.url,title:h.title,container:a.selector,fragment:t.fragment,timeout:t.timeout,state:t.state},(t.push||t.replace)&&window.history.replaceState(r.state,h.title,h.url),h.title&&(document.title=h.title),a.html(h.contents),"number"==typeof t.scrollTo&&e(window).scrollTop(t.scrollTo),(t.replace||t.push)&&window._gaq&&_gaq.push(["_trackPageview"]),""!==o){var p=d(h.url);p.hash=o,r.state.url=p.href,window.history.replaceState(r.state,h.title,p.href);var f=e(p.hash);f.length&&e(window).scrollTop(f.offset().top)}i("pjax:success",[n,l,u,t])},r.state||(r.state={id:c(),url:window.location.href,title:document.title,container:a.selector,fragment:t.fragment,timeout:t.timeout,state:t.state},window.history.replaceState(r.state,document.title));var h=r.xhr;h&&h.readyState<4&&(h.onreadystatechange=e.noop,h.abort()),r.options=t;var h=r.xhr=e.ajax(t);return h.readyState>0&&(t.push&&!t.replace&&(g(r.state.id,a.clone().contents()),window.history.pushState(null,"",u(t.requestUrl))),i("pjax:start",[h,t]),i("pjax:send",[h,t])),r.xhr}function o(t,i){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return r(e.extend(n,h(t,i)))}function s(e){window.history.replaceState(null,"","#"),window.location.replace(e)}function a(t){var i=t.state;if(i&&i.container){var n=e(i.container);if(n.length){var o=_[i.id];if(!r.state)return r.state=i,void 0;var a=r.state.id<i.id?"forward":"back";v(a,r.state.id,n.clone().contents());var l=e.Event("pjax:popstate",{state:i,direction:a});n.trigger(l);var c={id:i.id,url:i.url,container:n,push:!1,fragment:i.fragment,timeout:i.timeout,state:i.state,scrollTo:!1};o?(n.trigger("pjax:start",[null,c]),i.title&&(document.title=i.title),n.html(o),r.state=i,n.trigger("pjax:end",[null,c])):r(c),n[0].offsetHeight}else s(location.href)}}function l(t){var i=e.isFunction(t.url)?t.url():t.url,n=t.type?t.type.toUpperCase():"GET",r=e("<form>",{method:"GET"===n?"GET":"POST",action:i,style:"display:none"});"GET"!==n&&"POST"!==n&&r.append(e("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var o=t.data;if("string"==typeof o)e.each(o.split("&"),function(t,i){var n=i.split("=");r.append(e("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if("object"==typeof o)for(key in o)r.append(e("<input>",{type:"hidden",name:key,value:o[key]}));e(document.body).append(r),r.submit()}function c(){return(new Date).getTime()}function u(e){return e.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function d(e){var t=document.createElement("a");return t.href=e,t}function h(t,i){return t&&i?i.container=t:i=e.isPlainObject(t)?t:{container:t},i.container&&(i.container=p(i.container)),i}function p(t){if(t=e(t),t.length){if(""!==t.selector&&t.context===document)return t;if(t.attr("id"))return e("#"+t.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+t.selector}function f(e,t){return e.filter(t).add(e.find(t))}function m(t,i,n){var r={};if(r.url=u(i.getResponseHeader("X-PJAX-URL")||n.requestUrl),/<html/i.test(t))var o=e(t.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0]),s=e(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]);else var o=s=e(t);if(0===s.length)return r;if(r.title=f(o,"title").last().text(),n.fragment){if("body"===n.fragment)var a=s;else var a=f(s,n.fragment).first();a.length&&(r.contents=a.contents(),r.title||(r.title=a.attr("title")||a.data("title")))}else/<html/i.test(t)||(r.contents=s);return r.contents&&(r.contents=r.contents.not("title"),r.contents.find("title").remove()),r.title&&(r.title=e.trim(r.title)),r}function g(e,t){for(_[e]=t,x.push(e);w.length;)delete _[w.shift()];for(;x.length>r.defaults.maxCacheLength;)delete _[x.shift()]}function v(e,t,i){var n,r;_[t]=i,"forward"===e?(n=x,r=w):(n=w,r=x),n.push(t),(t=r.pop())&&delete _[t]}function b(){e.fn.pjax=t,e.pjax=r,e.pjax.enable=e.noop,e.pjax.disable=y,e.pjax.click=i,e.pjax.submit=n,e.pjax.reload=o,e.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20},e(window).bind("popstate.pjax",a)}function y(){e.fn.pjax=function(){return this},e.pjax=l,e.pjax.enable=b,e.pjax.disable=e.noop,e.pjax.click=e.noop,e.pjax.submit=e.noop,e.pjax.reload=function(){window.location.reload()},e(window).unbind("popstate.pjax",a)}var _={},w=[],x=[];e.inArray("state",e.event.props)<0&&e.event.props.push("state"),e.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),e.support.pjax?b():y()}(jQuery),define("jquery-plugins/jquery.pjax",function(){}),define("initialization",["jquery","utils/initialize","jquery-plugins/jquery.pjax"],function(e,t){e.support.pjax&&(e.pjax.defaults.timeout=2e3),e(document).on("pjax:end",t),t()}),define("utils/api-helper",["underscore"],function(e){var t=Array.prototype.concat,i={concat:function(){return e.extend(t.apply(this,e.toArray(arguments)),i)},toString:function(){var i="",n=e.toArray(arguments);if("[object Object]"===Object.prototype.toString.call(e.last(n))){var r=n.pop();e.each(e.keys(r).sort(),function(e,t){i+="{sep}{key}={val}".format({sep:t?"&":"?",key:encodeURIComponent(e),val:encodeURIComponent(r[e])})})}return"/{}/{}".format(e.map(t.apply(this,n),encodeURIComponent).join("/"),i)}},n=e.extend(["!api","1.0"],i);return n}),define("utils/exists",["jquery"],function(e){return function(t,i){var n=e(t);1===n.length&&i(n)}}),define("data/debug",["jquery"],function(e){var t="true"===e("#bb-debug").attr("content");return t}),define("utils/gaq-push",["underscore","data/debug"],function(e,t){var i=!1,n=function(){if(i)t?console.log(["_gaq.push(",e.map(arguments,function(e){return'  ["'+e.join('", "')+'"]'}).join(",\n"),");"].join("\n")):(window._gaq||(window._gaq=[]),_gaq.push.apply(_gaq,e.toArray(arguments)));else{i=!0;var r="//www.google-analytics.com/plugins/ga/inpage_linkid.js";n(["_require","inpage_linkid",r],["_setAccount","UA-2456069-3"],["atl._setAccount","UA-6032469-33"]),n.apply(null,arguments)}};return n}),define("i18n",["aui","jquery","underscore","data/current-user","utils/api-helper","utils/exists","utils/gaq-push"],function(e,t,i,n,r,o,s){o("#header-language form",function(e){e.on("click","a",function(i){i.preventDefault(),e.find("input[name=language]").val(t(i.target).attr("data-value")),e.submit()})}),o("#call-for-translators",function(e){e.slideDown(),s(["atl._trackEvent","i18n","Show call for translators banner"]),e.on("messageClose",function(){var e=r.concat("user","preferences",n.username,"dismiss-call-for-translators");t.post(e,{value:"True"})}),e.on("click",".view-language-link",function(){s(["atl._trackEvent","i18n","View language preference","banner"])})}),o("#footer .view-language-link",function(e){e.on("click",function(){s(["atl._trackEvent","i18n","View language preference","footer"])})}),o("#id_language_code_group",function(n){function r(){var e=d.data("languages");return i.indexOf(e,l.val())<0}function o(){!h&&n.data("banner-referrer")&&(s(["atl._trackEvent","i18n","Language field referrer","banner"]),h=!0)}var a=n.closest("form"),l=t("#id_language_code"),c=t("#translate-progress-content"),u=null,d=t("#help-translate-message");l.on("change",function(){d.is(":visible")?r(l.val())||d.slideUp():r(l.val())&&d.slideDown()});var h=!1;l.on("change",function(){o(),u=t.get(c.attr("data-stats-url"))}),d.on("click",".translate-link",o);var p=l.val();a.on("submit",function(){if(l.val()!==p){var e=p+" -> "+l.val();s(["atl._trackEvent","i18n","Save language change",e])}});var f=!1,m=new e.Dialog({width:450,height:"auto",id:"translate-progress-dialog"});m.addPanel("main").addHeader("This translation is incomplete").addButton("Save settings",function(){f=!0,a.submit()},"aui-button aui-button-primary").addCancel("Cancel",function(e){e.hide()}),m.getCurrentPanel().body.append(c.show()),a.on("submit",function(e){var i=l.val();if(i!==p&&r(i)&&!f){e.preventDefault();var n=a.find("button[type=submit]"),o=setTimeout(function(){n.addClass("loading").attr("aria-disabled",!0).attr("disabled",!0)},400);u.done(function(e){clearTimeout(o),n.removeClass("loading").removeAttr("aria-disabled").removeAttr("disabled");var r=e[i]||0;t("#translate-progress-content").find("span.language").text(l.find(":selected").text()).end().find("span.percent").text(r).end().find(".progress").css("width",r+"%"),m.show()})}}),n.on("click",".translate-link",function(e){var i=t(e.target).attr("data-type");s(["atl._trackEvent","i18n","Translate",i])})})}),function(){var e,t,i,n,r,o,s,a;s="0.8.0",o=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(?:[.](\d+))?)?(?:([-+]\d\d):(\d\d)|Z)$/,i=function(e,t,i){return null==t&&(t=0),null==i&&(i=0),e.setHours(a.H(e)-t,a.M(e)+(+t>0?-i:+i)),e},t=function(t){return n[t]||e[t]},r=function(e,t){return null==t&&(t=2),(e+1e3+"").substr(4-t)},a={yy:function(e){return r(a.yyyy(e)%100)},yyyy:function(e){return e.getFullYear()},m:function(e){return e.getMonth()+1},mm:function(e){return r(a.m(e))},mmm:function(e){return t("abbrMonths")[a.m(e)-1]},mmmm:function(e){return t("fullMonths")[a.m(e)-1]},d:function(e){return e.getDate()},dd:function(e){return r(a.d(e))},ddd:function(e){return t("abbrDays")[e.getDay()]},dddd:function(e){return t("fullDays")[e.getDay()]},o:function(e){return t("ordinals")(a.d(e))},h:function(e){return a.H(e)%12||12},hh:function(e){return r(a.h(e))},H:function(e){return e.getHours()},HH:function(e){return r(a.H(e))},M:function(e){return e.getMinutes()},MM:function(e){return r(a.M(e))},s:function(e){return e.getSeconds()},ss:function(e){return r(a.s(e))},S:function(e){return""+a.s(e)+"."+r(e%1e3,3)},SS:function(e){return""+a.ss(e)+"."+r(e%1e3,3)},a:function(e){return t("periods")[+(a.H(e)>11)]},Z:function(e){var t,i;return t=Math.abs(i=-e.getTimezoneOffset()),""+(0>i?"-":"+")+r(t/60>>0)+":"+r(t%60)}},e=function(t,i){var n,r,o,s,l,c,u;if(t instanceof Date||(i=t,t=new Date),i||(i=e.format),"function"==typeof i)return i(t);for(s=null,r=o="",u=(""+i.replace(/~/g,"~T").replace(/%%/g,"~P")+"%").split(""),l=0,c=u.length;c>l;l++)n=u[l],r&&(n===s||"%"===r?r+=n:(r=r.substr(1),o+=a.hasOwnProperty(r)?e.escaped?jQuery("<b>").text(a[r](t)).html():a[r](t):r)),/%/.test(r)||(r=/%/.test(i)?"%"===n?"%":(o+=n,""):"%"+n),s=n;return o.replace(/~P/g,"%").replace(/~T/g,"~")},e.abbrDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e.abbrMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.fullDays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.fullMonths=["January","February","March","April","May","June","July","August","September","October","November","December"],e.format="d mmmm yyyy",e.periods=["AM","PM"],e.ordinals=function(e){return e+["th","st","nd","rd"][e>10&&14>e||(e%=10)>3?0:e]},e.version=s,jQuery.localize=e,n={},jQuery.fn.localize=function(t){var r;return"object"==typeof t&&(jQuery.extend(n,t),t=n.format),t||(t=e.format),r=n.escaped?"html":"text",this.each(function(){var n,s,a;return n=jQuery(this),"time"===this.nodeName.toLowerCase()&&(a=o.exec(n.attr("datetime")||e("yyyy-mm-ddTHH:MM:ssZ"))),a?(s=i(new Date(Date.UTC(+a[1],a[2]-1,+a[3],+a[4],+a[5],+a[6]||0,+(""+(a[7]||0)+"00").substr(0,3))),a[8],a[9]),n.attr("datetime",e(s,"yyyy-mm-ddTHH:MM"+(a[7]?":SS":a[6]?":ss":"")+"Z")),n[r]("function"==typeof t?t.call(n,s):e(s,t))):void 0}),n={},this}}.call(this),define("jquery-plugins/jquery.localize",function(){}),define("utils/localize",["jquery","jquery-plugins/jquery.localize"],function(e){var t=5,i=Math.abs,n=Math.floor,r=Math.round;return e.localize.format=function(o,s){var a,l,c,u,d,h,p,f,m,g,v;if(null==s&&(s=new Date),l=(o-s)/1e3,l>-10&&300>l)return"just now";if(u=0>l,l=i(l),h=u?"ago":"from now",o.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),a=i(r((o-s)/864e5)),a>t)return e.localize(o,"yyyy-mm-dd");if(a>1)return""+a+" days "+h;if(l>=86400)return u?"yesterday":"tomorrow";for(g=[["an hour",3600],["a minute",60],["a second",1]],f=0,m=g.length;m>f&&(v=g[f],p=v[0],d=v[1],!(l>=d));f++);return c=n(l/d),1===c?""+p+" "+h:""+c+" "+p.split(" ")[1]+"s "+h},function(t){t=t&&t.length?t:e("time"),t.each(function(){var t=e(this),i=t.data();i.format?t.localize({format:i.format,periods:i.associatedPressPeriods?["a.m.","p.m."]:void 0}):i.relative!==!1&&t.localize();var n=new Date(t.attr("datetime"));t.attr({title:e.localize(n,"d mmmm yyyy HH:MM")})})}}),define("localization",["jquery","utils/localize"],function(e,t){window.setInterval(t,6e4),e(function(){t()}),e(document).on("pjax:end",function(){t()})}),define("data/ga-commands",["jquery"],function(e){var t=e(document.body).data("gaCommands")||[];return t}),define("data/opt-commands",["jquery"],function(e){var t=e(document.body).data("optCommands")||[];return t}),define("utils/opt-push",["underscore","data/debug"],function(e,t){return function(i){i=e.isArray(i)?i:["trackEvent",i],t?console.log('window.optimizely.push(["'+i.join('", "')+'"])'):(window.optimizely=window.optimizely||[],window.optimizely.push(i))}}),define("tracking",["jquery","underscore","data/current-repo","data/ga-commands","data/opt-commands","utils/gaq-push","utils/opt-push"],function(e,t,i,n,r,o,s){o(["_trackPageview"]),o(["atl._trackPageview"]),i.analyticsKey&&o(["repo._setAccount",i.analyticsKey],["repo._trackPageview"]),t.each(n,function(e){switch(e.type){case"trackPageview":o(["atl._trackPageview",e.pageName]);break;case"trackEvent":o(["atl._trackEvent",e.eventCategory,e.eventName]);break;case"setCustomVar":o(["atl._setCustomVar",e.customVarSlot,e.customVarName,e.customVarValue,e.customVarScope])}}),t.each(r,function(e){s(e)}),e(".support-ga").on("click submit",function(){var t=e(this).data("support-gaq-page");o(["_trackPageview","/support/"+t],["atl._trackPageview","/support/"+t])}),e("#plan-details .aui-button-primary").on("click",function(){o(["atl._trackEvent","Account","Over Plan Upgrade"])});var a=e(window).width();a>=1280?o(["atl._trackEvent","Browser width",">= 1280px"]):1280>a&&a>=1024?o(["atl._trackEvent","Browser width","1279px - 1024px"]):o(["atl._trackEvent","Browser width","< 1024px"])}),define("utils/message-helper",[],function(){var e="bb-messages",t="|";return{addMessage:function(i,n){sessionStorage&&(n=n||"success",i=i+t+n,sessionStorage.setItem(e,i))},getMessage:function(){var i=null;if(sessionStorage){var n=sessionStorage.getItem(e);if(sessionStorage.removeItem(e),n){var r=n.split(t);i={body:r[0],type:r[1]}}}return i}}}),define("messages",["aui","jquery","utils/message-helper"],function(e,t,i){function n(e){e.animate({opacity:0},d,function(){e.remove()})}function r(){a&&(clearTimeout(a),a=null)}function o(e){r(e),a=setTimeout(function(){n(t(e.target))},u)}function s(e){a=setTimeout(function(){n(e)},c),e.on("mouseover",r),e.on("mouseout",o)}var a,l=t("#aui-message-bar .aui-message.closeable"),c=4e3,u=1e3,d=200;l.length&&s(l);var h=e.messages.makeCloseable;e.messages.makeCloseable=function(e){var i=t(e).filter(".aui-message"),n=i.closest("#aui-message-bar, .disappearing-message");i.length&&n.length&&s(i),h(e)},t(function(){var n=i.getMessage(),r=t("#aui-message-bar").find(".aui-message");n?(r.remove(),e.messages[n.type]({body:t("<div>").text(n.body).html()})):r.removeClass("hidden")})});var store=function(){function e(){try{return a in o&&o[a]}catch(e){return!1}}function t(){try{return l in o&&o[l]&&o[l][o.location.hostname]}catch(e){return!1}}function i(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(n),s.body.appendChild(n),n.addBehavior("#default#userData"),n.load(a);var i=e.apply(r,t);return s.body.removeChild(n),i}}var n,r={},o=window,s=o.document,a="localStorage",l="globalStorage",c="__storejs__";if(r.disabled=!1,r.set=function(){},r.get=function(){},r.remove=function(){},r.clear=function(){},r.transact=function(e,t){var i=r.get(e);"undefined"==typeof i&&(i={}),t(i),r.set(e,i)},r.serialize=function(e){return JSON.stringify(e)},r.deserialize=function(e){return"string"!=typeof e?void 0:JSON.parse(e)},e())n=o[a],r.set=function(e,t){n.setItem(e,r.serialize(t))},r.get=function(e){return r.deserialize(n.getItem(e))},r.remove=function(e){n.removeItem(e)},r.clear=function(){n.clear()};else if(t())n=o[l][o.location.hostname],r.set=function(e,t){n[e]=r.serialize(t)},r.get=function(e){return r.deserialize(n[e]&&n[e].value)},r.remove=function(e){delete n[e]},r.clear=function(){for(var e in n)delete n[e]};else if(s.documentElement.addBehavior){var n=s.createElement("div");r.set=i(function(e,t,i){e.setAttribute(t,r.serialize(i)),e.save(a)}),r.get=i(function(e,t){return r.deserialize(e.getAttribute(t))}),r.remove=i(function(e,t){e.removeAttribute(t),e.save(a)}),r.clear=i(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(a);for(var i,n=0;i=t[n];n++)e.removeAttribute(i.name);e.save(a)})}try{r.set(c,c),r.get(c)!=c&&(r.disabled=!0),r.remove(c)}catch(u){r.disabled=!0}return r}();"undefined"!=typeof module&&(module.exports=store),define("store",function(e){return function(){var t;return t||e.store}}(this)),function(e,t){"function"==typeof define&&define.amd?define("data/client",t):t({initialize:!0})}(this,function(e){var t={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var t=0;t<e.length;t++){var i=e[t].string,n=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,i){if(-1!=i.indexOf(e[t].subString))return e[t].identity
}else if(n)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer",versionSearch:"rv:"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};t.init();var i={os:t.OS,browser:t.browser};return e.initialize&&(document.body.className+=" "+i.os.toLowerCase()+" "+i.browser.toLowerCase()),i}),define("components/key-navigation",["jquery","data/client"],function(e,t){var i=function(i,n){function r(e){return{tab:9===e.which,enter:13===e.which,up:38===e.which,down:40===e.which,j:74===e.which,k:75===e.which,o:79===e.which,home:36===e.which,end:35===e.which}}function o(e,t){n.clear(),e.length&&(e.addClass("focused"),n.scroll(e,t))}function s(){var e=n.getFirstItem();o(e),i.trigger("navigate:first",e)}function a(){var e=n.getLastItem();o(e),i.trigger("navigate:last",e)}function l(){var e,t=n.getSelectedItem();t.length&&(e=n.getNextItem(t)),e&&e.length||(e=n.getFirstItem()),o(e),i.trigger("navigate:next",e)}function c(){var e,t=n.getSelectedItem();t.length&&(e=n.getPrevItem(t)),e&&e.length||(e=n.getLastItem()),o(e,!0),i.trigger("navigate:previous",e)}function u(){i.trigger("navigate:select",n.getSelectedItem())}var d={defaultAction:function(){},getNextItem:function(e){return e.next()},getPrevItem:function(e){return e.prev()},scroll:function(e){var t=e.offsetParent(),i=t.innerHeight(),n=e.position().top,r=n+e.innerHeight(),o=t.scrollTop();0>n?t.scrollTop(o+n):r>=i&&t.scrollTop(o+r-i)}};return n=e.extend({},d,n),i.on("keyup",function(e){var i=r(e),o="Mac"===t.os,d=o&&e.ctrlKey||!o&&e.altKey,h=i.up||i.k&&d||i.tab&&e.shiftKey,p=i.down||i.j&&d||i.tab&&!e.shiftKey,f=i.enter||i.o&&d,m=i.home,g=i.end;h?c():p?l():f?u():m?s():g?a():n.defaultAction(e)}),{next:l,prev:c,first:s,last:a,select:u}},n=function(t,n,r){var o={getSelectedItem:function(){return n.find(".active-pane .filter-item.focused")},getFirstItem:function(){return n.find(".active-pane .filter-item a:visible").first().parent()},getLastItem:function(){return n.find(".active-pane .filter-item a:visible").last().parent()},getNextItem:function(e){return e.nextAll().find("a:visible").first().parent()},getPrevItem:function(e){return e.prevAll().find("a:visible").first().parent()},clear:function(){n.find(".active-pane .focused").removeClass("focused")}};return t.on("navigate:select",function(t,i){var n=e(i),r=n.find("a");r.length&&r[0].click()}),i(t,e.extend({},o,r))};return{keyNavigation:i,tabbedFilter:n}}),define("utils/mustache",["jquery","mustache"],function(e,t){t.tags=["[[","]]"];var i={};return{toHtml:function(n,r){var o=i[n];return o||(o=t.compile(e("#"+n).html()),i[n]=o),o(r)},clear:function(e){delete i[e]}}}),define("components/file-search/file-search",["jquery","components/key-navigation","data/current-repo","utils/api-helper","utils/mustache"],function(e,t,i,n,r){function o(e,i,n,r,o){this.$queryInput=e,this.$resultsContainer=i,this.revision=n,this.branch=r?encodeURIComponent(r):r,this.template=o,this.charLimit=80,this.resultLimit=100,this.nextPageStart=0,this.isLastPage=!0,this.loading=!1,this.files=[],this.getFiles(),this.initialized=!0,this.keyNavigator=t.keyNavigation(e,{getSelectedItem:this.getSelectedItem.bind(this),getFirstItem:this.getFirstItem.bind(this),getLastItem:this.getLastItem.bind(this),clear:this.clear.bind(this),defaultAction:this.executeSearch.bind(this),scroll:this.scroll.bind(this)}),e.on("navigate:select",function(){this.selectResult()}.bind(this)),e.on("keydown",function(e){9===e.which&&e.preventDefault()})}function s(e){return e.replace(/(^\s*)|(\s*$)/gi,"").replace(/[ ]{2,}/gi," ")}function a(e){if(!e)return null;var t="",i=s(e).split(/\*|\s|(?=[A-Z0-9]|\/|\.|-|_)/g);i=_.filter(i,function(e){return 0!==e.length});var n=i.length;if(n){t+="("+_.map(i[0].split(""),l).join("")+")";for(var r=1;n>r;r++)t+=".*?("+_.map(i[r].split(""),l).join("")+")";return new RegExp("("+t+")","g")}}function l(e){return e!=e.toUpperCase()?"["+c(e.toUpperCase()+e)+"]":c(e)}function c(e){return e.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$&")}return o.prototype.getPositions=function(e){var t=e.position().top,i=this.$resultsContainer.scrollTop();return{itemStart:t,itemEnd:t+e.height(),containerStart:i,containerEnd:i+this.$resultsContainer.height()}},o.prototype.isVisible=function(e){var t=this.getPositions(e);return t.itemStart>=t.containerStart&&t.itemEnd<=t.containerEnd},o.prototype.makeVisible=function(e){var t=this.getPositions(e);if(t.itemEnd<=t.containerEnd)this.$resultsContainer.scrollTop(t.itemStart);else{var i=t.containerEnd-t.containerStart;this.$resultsContainer.scrollTop(t.itemEnd-i)}},o.prototype.scroll=function(e,t){this.isVisible(e)||this.makeVisible(e,t)},o.prototype.clear=function(){return this.$resultsContainer.find(".focused").removeClass("focused")},o.prototype.getSelectedItem=function(){return this.$resultsContainer.find(".focused")},o.prototype.getFirstItem=function(){return this.$resultsContainer.find(".iterable-item:first")},o.prototype.getLastItem=function(){return this.$resultsContainer.find(".iterable-item:last")},o.prototype.selectResult=function(){if(this.$resultsContainer.find(".focused").length){var e=this.$resultsContainer.find(".focused a.execute").attr("href");window.location.href=e}},o.prototype.executeSearch=function(){var e=this.$queryInput.val();if(e){var t=this.filterFiles(e);t.length<this.resultLimit&&!this.isLastPage&&this.getFiles({start:this.nextPageStart}),this.$resultsContainer.html(r.toHtml(this.template,{files:t,node:this.revision,branch:this.branch})).show(),0===t.length?this.$resultsContainer.hide():this.keyNavigator.first()}else this.$resultsContainer.hide()},o.prototype.getFiles=function(t){var r=n.concat("repositories",i.owner.username,i.slug,"directory");r=this.revision?r.toString(this.revision):r,this.loading||(this.$queryInput.addClass("loading"),e.ajax({url:r,type:"GET",data:t,dataType:"json"}).success(function(e){this.isLastPage=e.isLastPage,this.nextPageStart=e.nextPageStart,this.revision=e.revision,_.each(e.values,function(e){this.files.push({name:e})}.bind(this)),this.loading=!1,this.$queryInput.removeClass("loading"),this.executeSearch()}.bind(this)))},o.prototype.filterFiles=function(e){var t=this.files,i=a(e);return t=_.filter(this.files,function(e){return i.lastIndex=0,i.test(e.name)}),i.lastIndex=0,_.each(t,function(e){e.isDirectory="/"===e.name.slice(-1);var t=e.name;if(e.name.length>this.charLimit){var n=Math.floor(this.charLimit/2);t=e.name.slice(0,n)+"&hellip;"+e.name.slice(-n)}e.highlightedName=t.replace(i,"<strong>$1</strong>")}.bind(this)),t.slice(0,this.resultLimit)},o}),define("components/file-search/dialog",["aui","jquery","components/file-search/file-search","data/client"],function(e,t,i,n){function r(){var r,o=t(document),a=new e.Dialog({width:680,height:"auto",id:"file-search-dialog",closeOnOutsideClick:!0});a.addPanel("Search",s,"panel-body"),s.show(),s.on("submit",function(){return!1});var l=t("#file-search-query"),c=t("#filtered-files"),u=s.find(".tip"),d=Math.round(Math.random()*u.length-2);return"Mac"===n.os?u.closest(".mod-win").remove():u.closest(".mod-osx").remove(),e.bind("show.dialog",function(e,t){"file-search-dialog"!==t.dialog.id||r||(r=new i(l,c,s.attr("data-revision"),s.attr("data-branch"),"filtered-files-template"),u.addClass("hidden").eq(d).removeClass("hidden"))}),o.on("click","#inline-dialog-branch-dialog .filter-list a",function(){o.one("pjax:end",function(e,i,n){if(e.target&&"source-container"===e.target.id){var o,a=t(e.relatedTarget).text().trim();o=/src\/(.*)\//.exec(n.url),o=o?o[1]:a,r&&r.initialized?(r.revision=o,r.files=[],r.getFiles(),r.$queryInput.val("")):(s.attr("data-revision",o),s.attr("data-branch",a))}})}),a}var o,s=t("#file-search-form");return{exists:function(){return!!s.length},getDialog:function(){return o||(o=r()),o}}}),define("utils/when-i-type",["aui","jquery","underscore"],function(e,t,i){var n=[];whenITypeKeyDataMap={};var r=function(o,s,a,l,c){function u(e){for(var t=e.length;t--;)if(e[t].length>1&&"space"!==e[t])return!0;return!1}var d,h,p,f,m=function(e){var i=t(e),n=i.attr("title")||"",r=o.slice(0);if(i.data("kbShortcutAppended"))return g(i,r,n),void 0;var s=t("#keyType").val()||"type",a=t("#keyThen").val()||"then";n+=n?" ":"",n+="( "+s+" '"+r.shift()+"'",t.each(r,function(){n+=" "+a+" '"+this+"'"}),n+=" )",i.attr({title:n}),i.data("kbShortcutAppended",!0)},g=function(e,i,n){var r;n=n.replace(/\)$/," OR "),n+="'"+i.shift()+"'",r=t("#keyThen").val()||"then",t.each(i,function(){n+=" "+r+" '"+this+"'"}),n+=" )",e.attr({title:n})},v=function(e){var i=u(e)?"keydown":"keypress";t(document).on(i,c,e,function(e){d&&(l||!r.disabled&&!t("#keyboard-shortcut-container").is(":visible"))&&(!h||t(h).is(":visible"))&&(d(e),e.preventDefault())})};return a||(a="Application"),Object.hasOwnProperty.call(whenITypeKeyDataMap,a)||(n.push(a),whenITypeKeyDataMap[a]=[]),f={keys:[o],desc:s},whenITypeKeyDataMap[a].push(f),v(o),{or:function(e){return f.keys.push(e),v(e),this},moveToNextItem:function(e,i,n){d=function(){var r,o,s;t(".aui-dialog:visible").length>0&&(e=".aui-dialog:visible "+e),o=t(e),s=t(e).filter(".focused"),d.blurHandler||t(document).one("keydown",function(e){e.keyCode===t.ui.keyCode.ESCAPE&&s&&(s.removeClass("focused"),s.find("a:first").blur())}),0===s.length?s=t(e).eq(0):(s.removeClass("focused"),r=t.inArray(s.get(0),o),r<o.length-1?(r+=1,s=o.eq(r)):i&&i()?n():(s.removeClass("focused"),s=t(e).eq(0))),s&&s.length>0&&(s.addClass("focused"),s.moveTo(),s.find("a:first").focus())}},moveToPrevItem:function(e,i,n){d=function(){var r,o,s;t(".aui-dialog:visible").length>0&&(e=".aui-dialog:visible "+e),o=t(e),s=t(e).filter(".focused"),d.blurHandler||t(document).one("keydown",function(e){e.keyCode===t.ui.keyCode.ESCAPE&&s&&(s.removeClass("focused"),s.find("a:first").blur())}),0===s.length?s=t(e).last():(s.removeClass("focused"),r=t.inArray(s.get(0),o),r>0?(r-=1,s=o.eq(r)):i&&i()?n():(s.removeClass("focused"),s=t(e).last())),s&&s.length>0&&(s.addClass("focused"),s.moveTo(),s.find("a:first").focus())}},click:function(e){m(e),d=function(){t(e).trigger("click")}},goTo:function(e){d=function(){window.location.href=e}},followLink:function(e){m(e),d=function(){var i=t(e)[0];i&&"a"===i.nodeName.toLowerCase()&&(window.location.href=i.href)}},execute:function(e){d=e},moveToAndClick:function(e){m(e),d=function(){t(e).click().moveTo()}},moveToAndFocus:function(e){m(e),d=function(){t(e).focus().moveTo()}},focus:function(e){m(e),d=function(){t(e).focus()}},submitComment:function(){d=function(e){var i,n,r=t(e.currentTarget);1===r.length&&(i=r.closest("form"),1===i.length&&(n=i.find("button[type=submit]"),1===n.length&&n.click()))}},displayHelp:function(){d=function(){var r=p,o=function(){p&&p.hide().remove(),p=null};if(r)return o(),void 0;r=p=new e.Dialog({width:800,height:"auto",id:"bb-keyboard-shortcuts-dialog"}),r.addPanel("main").addHeader("Keyboard shortcuts").addCancel("Close",function(){o()});var s=t('<section id="keyboard-shortcuts" class="aui-group"></div>'),a=t('<div class="aui-item"></div>').appendTo(s),l=t('<div class=aui-item"></div>').appendTo(s),c=1;i.each(n,function(e){var n,r="";i.each(whenITypeKeyDataMap[e],function(e){(!e.guard||t(e.guard).is(":visible"))&&(r+="<dt>"+e.desc+"</dt>",r+="<dd>",r+=i.map(e.keys,function(e){return"<kbd>"+e.join("</kbd> then <kbd>")+"</kbd>"}).join(" or "),r+="</dd>")}),r&&(c++,n=t('<div class="keyboard-shortcut-context"></div>'),n.append('<h3 class="context-title">'+e+"</h3>"),t("<dl></dl>").append(r).appendTo(n),(c%2?l:a).append(n))}),r.getCurrentPanel().html(s),r.show()}},dismiss:function(){d=function(){t("#keyboard-shortcut-container").remove()}},guard:function(e){h=e,f.guard=e}}};return r.fromJSON=function(e){i.each(e,function(e){var t=e.section;i.each(e.shortcuts,function(e){var i=e.op,n=e.params||[],o=e.guard,s=r(e.keys,e.description,t,e.always,e.delegate);s[i].apply(null,n),o&&s.guard(o),e.aliasKeys&&s.or(e.aliasKeys)})})},t(document).on("keydown",function(e){27===e.keyCode&&/^(input|select|textarea)$/i.test(e.target.nodeName)&&e.target.blur()}),t(document).on("iframeAppended",function(e,i){t(i).load(function(){t(i).contents().bind("keyup keydown keypress",function(e){t.browser.safari&&"keypress"===e.type||/^(input|select|textarea)$/i.test(e.target.nodeName)||t(document).trigger(e)})})}),r}),define("keyboard-shortcuts",["jquery","store","underscore","command-bar/index","components/file-search/dialog","data/current-user","utils/initialize","utils/when-i-type","jquery-ui","jquery-plugins/jquery.pjax"],function(e,t,i,n,r,o,s,a){if(o.isKbdShortcutsEnabled){var l=function(){var i=e(".iterable-item.focused  a.execute:visible").first();if(i.length){var n=i.attr("href");if(!i.data("add-to-stack")){var r=t.get("lastFocusedIdArray")||[];r.push({id:n}),t.set("lastFocusedIdArray",r),t.set("leaveFocusedUniqueId",!0)}i.hasClass("click")||e.support.pjax&&i.data("bb-pjax-enabled")?i.click():window.location.href=n}},c=function(){return e("a.next-page, a.prev-page").length},u=function(){var i=e("a.next-page");i.attr("href")&&(t.set("focusFirst",!0),a.disabled=!0,e.support.pjax&&i.data("bb-pjax-enabled")?i.click():window.location=i.attr("href"))},d=function(){var i=e("a.prev-page");i.attr("href")&&(t.set("focusLast",!0),a.disabled=!0,e.support.pjax&&i.data("bb-pjax-enabled")?i.click():window.location=i.attr("href"))},h=[{section:"Global navigation",shortcuts:[{keys:["g","d"],description:"Go to dashboard",op:"followLink",params:["#logo a"]},{keys:["g","a"],description:"Go to account settings",op:"followLink",params:["#account-link"],guard:"#user-dropdown-trigger"},{keys:["g","i"],description:"Go to inbox",op:"followLink",params:["#inbox-link"],guard:"#user-dropdown-trigger"},{keys:["/"],description:"Focus the site search",op:"focus",params:["#search-query"]},{keys:["."],guard:'body[data-flag-command-bar="true"]',description:"Open the command bar",op:"execute",params:[function(){n&&n.openDialog()}]}]},{section:"Global actions",shortcuts:[{keys:["c","r"],description:"Create a repository",op:"followLink",params:["#create-repo-link"],guard:"#repositories-dropdown-trigger"},{keys:["i","r"],description:"Import a repository",op:"followLink",params:["#import-repo-link"],guard:"#repositories-dropdown-trigger"}]},{section:"Repository navigation",shortcuts:[{keys:["r","o"],description:"Repository overview",guard:"#repo-overview-link",op:"followLink",params:["#repo-overview-link"]},{keys:["r","s"],description:"Repository source",guard:"#repo-source-link",op:"followLink",params:["#repo-source-link"]},{keys:["r","c"],description:"Repository commits",guard:"#repo-commits-link",op:"followLink",params:["#repo-commits-link"]},{keys:["r","b"],description:"Repository branches",guard:"#repo-branches-link",op:"followLink",params:["#repo-branches-link"]},{keys:["r","p"],description:"Repository pull requests",guard:"#repo-pullrequests-link",op:"followLink",params:["#repo-pullrequests-link"]},{keys:["r","w"],description:"Repository wiki",guard:"#repo-wiki-link",op:"followLink",params:["#repo-wiki-link"]},{keys:["r","i"],description:"Repository issues",guard:"#repo-issues-link",op:"followLink",params:["#repo-issues-link"]},{keys:["r","d"],description:"Repository downloads",guard:"#repo-downloads-link",op:"followLink",params:["#repo-downloads-link"]},{keys:["r","a"],description:"Repository administration",guard:"#repo-admin-link",op:"followLink",params:["#repo-admin-link"]}]},{section:"Repository actions",shortcuts:[{keys:["x","f"],description:"Fork repository",guard:"#repo-more-actions-button.forks-enabled, #fork-button, .repository-actions.forks-enabled",op:"followLink",params:["#fork-button, #repo-fork-link"]},{keys:["x","b"],description:"Create branch",guard:"#branch-button, #repo-create-branch-link, .repository-actions.can-create",op:"click",params:["#branch-button, #repo-create-branch-link"]},{keys:["x","c"],description:"Compare repository",guard:"#repo-more-actions-button, #compare-button, #repo-compare-link, .repository-actions",op:"followLink",params:["#compare-button, #repo-compare-link"]},{keys:["x","p"],description:"Create pull request",guard:"#pull-request-button, #repo-create-pull-request-link, .repository-actions.can-create",op:"followLink",params:["#pull-request-button, #repo-create-pull-request-link"]},{keys:["x","i"],description:"Create issue",guard:"#repo-issues-link",op:"followLink",params:["#repo-create-issue"]},{keys:["x","u"],description:"Invite user to repository",guard:"#repo-invite-link",op:"click",params:["#repo-invite-link"]},{keys:["x","w"],description:"Follow repository",guard:"#repo-follow",op:"click",params:["#repo-follow"]},{keys:["f"],description:"Search for file",op:"execute",params:[function(){r.exists()&&r.getDialog().show()}]}]},{section:"List navigation",shortcuts:[{keys:["j"],description:"Select next item",guard:".iterable-item:visible",op:"moveToNextItem",params:[".iterable-item:visible",c,u]},{keys:["k"],description:"Select previous item",guard:".iterable-item:visible",op:"moveToPrevItem",params:[".iterable-item:visible",c,d]},{keys:["return"],aliasKeys:["o"],description:"View selected item",guard:".iterable-item:visible",op:"execute",params:[l]}]},{section:"Application",shortcuts:[{keys:["?"],description:"Display this help",op:"displayHelp",always:!0},{keys:["esc"],description:"Dismiss dialog or remove focus",op:"dismiss",always:!0},{keys:["u"],description:"Back up",op:"execute",params:[function(){t.set("leaveFocusedUniqueId",!0),window.history.back()}]},{keys:["["],description:"Collapse/expand sidebar",op:"execute",params:[e.noop],guard:".aui-sidebar"}]},{section:"Commits / pull requests",shortcuts:[{keys:["ctrl+return"],delegate:"textarea#id_new_comment",description:"Submit your comment.",op:"submitComment",always:!0},{keys:["t","c"],description:"Toggle display of inline comments",guard:"#changeset-diff",op:"execute",params:[function(){var t=e("#changeset-diff");t.find(".comment-thread-container").addClass("existing-comment"),t.toggleClass("hide-comments")}]},{keys:["p","d"],description:"Switch to the pull request diff tab",guard:"#pr-menu-diff",op:"execute",params:[function(){e(window).scrollTo("#pr-menu-diff",500,{axis:"y",offset:-50}),e("#pr-menu-diff").click()}]},{keys:["p","c"],description:"Switch to the pull request commits tab",guard:"#pr-menu-commits",op:"execute",params:[function(){e(window).scrollTo("#pr-menu-commits",500,{axis:"y",offset:-50}),e("#pr-menu-commits").click()}]},{keys:["p","a"],description:"Switch to the pull request activity tab",guard:"#pr-menu-activity",op:"execute",params:[function(){e(window).scrollTo("#pr-menu-activity",500,{axis:"y",offset:-50}),e("#pr-menu-activity").click()}]}]}];a.fromJSON(h);var p=function(){var i=null;if(t.get("focusLast"))i=e(".iterable-item:visible").last(),t.remove("focusLast"),a.disabled=!1;else if(t.get("focusFirst"))i=e(".iterable-item:visible").first(),t.remove("focusFirst"),a.disabled=!1;else{var n=t.get("lastFocusedIdArray");if(n)for(;n.length;){var r=n.pop();if(i=e('.iterable a[href="'+r.id+'"]:visible').closest(".iterable-item"),i.length){t.set("lastFocusedIdArray",n),t.remove("leaveFocusedUniqueId"),a.disabled=!1;break}}}i&&i.length&&(i.addClass("focused"),i.find("a").first().focus(),e(document).one("keydown",function(t){t.keyCode===e.ui.keyCode.ESCAPE&&(i.removeClass("focused"),i.find("a").first().blur())}))};s.register(p),e(document).on("bb:compare",p);var f=window.onbeforeunload;window.onbeforeunload=function(e){return t.get("leaveFocusedUniqueId")||t.remove("lastFocusedIdArray"),t.remove("leaveFocusedUniqueId"),"function"==typeof f?f(e):void 0}}}),function(){AJS.Dialog&&(AJS.Dialog.prototype.addClose=function(e,t){return e=e||"Close",t=t||function(){this.hide()},$('<span class="aui-dialog-close aui-icon aui-icon-small aui-iconfont-close-dialog"></span>').attr("title",e).text(e).click(t.bind(this)).appendTo(this.page[this.curpage].element),this})}(),define("aui-plugins/close-aui-dialog",function(){}),define("components/one-million-dialog",["aui","jquery","utils/mustache","data/flags","aui-plugins/close-aui-dialog"],function(e,t,i,n){if(!n.leftoverMillion)return function(){return{show:t.noop,hide:t.noop}};var r;return function(){return r||(r=new e.Dialog({width:800,height:"auto",id:"million-thanks-dialog",closeOnOutsideClick:!0}),r.addHeader("A million thanks"),r.addClose(),r.addPanel("MillionThanks",t(i.toHtml("million-thanks-template")),"panel-body")),{show:function(){r.show()},hide:function(){r.hide()}}}}),define("components/share/share-dialog",["aui","backbone","jquery","components/one-million-dialog","utils/mustache"],function(e,t,i,n,r){return t.View.extend({className:"share-dialog",template:"share-dialog-template",events:{tabSelect:"onChangeTab"},initialize:function(e){this.options=e||{}},createDialog:function(){this.dialog=new e.Dialog({width:800,height:"auto",id:this.options.id+"-dialog",closeOnOutsideClick:!0});var t=this.options.shareButtonText||"Share";this.dialog.addHeader(gettext("Share")).addPanel(gettext("Share"),this.$el,"panel-body").addLink(gettext("Manage this team"),null,"share-manage-link left").addButton(t,this.onShare.bind(this),"aui-button aui-style").addCancel(gettext("Cancel"),this.onCancel.bind(this)),this.$share=i(this.dialog.page[0].button[1].item[0]),this.$manage=i(this.dialog.page[0].button[0].item[0])},renderPanels:function(e){return this.panels=e,this.panels.forEach(function(e){e.on("sending",function(){this.enableDialog(!1)},this),e.on("success",function(){this.enableDialog(!0),this.dialog.hide(),n().show()},this),e.on("error",function(){this.enableDialog(!0)},this)}.bind(this)),this.render()},render:function(){if(!this.panels)throw new Error("panels must be set before rendering");this.dialog||this.createDialog(),this.dialog.popup.element.toggleClass("has-tabs",this.panels.length>1);var t=this.panels[0];if(1===this.panels.length)return this.$el.html(t.render().el),this.setPanel(t),this;var n=this.dialog,o=this.panels.map(function(e){return i.extend(e,{tabId:"{}-{}".format(n.id,e.display)})});return this.$el.html(r.toHtml(this.template,{panels:o})),this.panels.forEach(function(e){this.$("#{}-{}".format(n.id,e.display)).append(e.render().el)}.bind(this)),this.$(".tabs-pane:first").addClass("active-pane"),this.$(".menu-item:first").addClass("active-tab"),e.tabs.setup(),this.setPanel(t),this},enableDialog:function(e){this.$share.prop("disabled",!e)},onShare:function(){this.activePanel.share()},onCancel:function(){this.dialog.hide()},onChangeTab:function(e,t){var i=t.pane.selector.slice(1);this.panels.forEach(function(e){e.tabId===i&&this.setPanel(e)}.bind(this))},setPanel:function(e){this.activePanel=e,this.dialog.addHeader(e.action),this.$manage.attr("href",e.getManageLink()),this.$manage.text(e.manageText)},show:function(){this.dialog.show()}})}),function(){var e,t,i,n,r,o,s,a,l,c,u,d,h,p,f,m,g,v,b,y,_,w,x,k,C,S,T,E,D,I,A,j,M=[].slice,P={}.hasOwnProperty,q=function(e,t){function i(){this.constructor=e}for(var n in t)P.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};n={},i=function(e,t){return function(){var i;return i=1<=arguments.length?M.call(arguments,0):[],t.apply(e,i)}},b=function(e,t){return null==e&&(e={}),"function"==typeof e&&(e={success:e}),void 0!==t&&(e.data=t),e},s=function(e,t){var i;return e=b(e),(i=e.success)&&(e.success=function(e,n,r){return i(t(e),n,r)}),e},S=function(e,t,i){var n,r,o,s,a;if(r=/^(.+?)[.](.+)$/.exec(t))S(e[r[1]],r[2],i);else if(r=/^\[(.+)\]$/.exec(t))for(t=r[1],s=0,a=e.length;a>s;s++)o=e[s],i(o,t);else if(r=/^\{(.+)\}$/.exec(t)){t=r[1];for(n in e)P.call(e,n)&&(o=e[n],i(o,t))}else i(e,t);return e},_=function(e,t){var i,n;e=b(e);for(n in t)P.call(t,n)&&(i=t[n],i(n,e));return e},y=function(e){return function(t,i){return s(i,function(i){return S(i,t,e)})}},o={utc_created_on:"date_created",utc_last_updated:"date_updated",utc_sent_on:"date_created",utc_updated_on:"date_updated"},e=y(function(e,t){var i,n,r,s,a,l,c,u;for(c=t.split(","),a=0,l=c.length;l>a;a++)n=c[a],u=n.split(":"),s=u[0],r=u[1],(i=e[s])&&(r||(r=o[s]||"date"),delete e[s],delete e[s.replace(/^utc_?/,"")],e[r]=new Date(i.replace(" ","T")));return e}),v=y(function(e){return-1===e.size?delete e.size:void 0}),t=function(e,t){var i,n;return e===t?0:(i=e.toLowerCase(),n=t.toLowerCase(),(i===n?t>e:n>i)?-1:1)},u=y(function(e,i){var n,r,o,s,a;return a=i.split(":"),o=a[0],r=a[1],o in e&&(s=e[o].replace(/^\s+|\s+$/g,""),n=s?s.split(/\s*[\n\r]\s*/).sort(t):[],delete e[o],e[r||o]=n),e}),m=y(function(e,t){var i,n,r,o;return o=t.split(":"),n=o[0],i=o[1],n in e&&(r=e[n],delete e[n],e[i]=r),e}),T=y(function(e,t){var i,n,r,o,s,a;for(s=t.split(":"),t=s[0],n=s[1],a=n.split(","),r=0,o=a.length;o>r;r++)i=a[r],e[i]=e[t][i];return delete e[t],e}),g=function(e,t){return s(t,function(t){return t[e]})},c=function(e){return function(){var t,i,r,o,s;return r=arguments[0],o=3<=arguments.length?M.call(arguments,1,s=arguments.length-1):(s=1,[]),i=arguments[s++],t=o[0],i=b(i,t),i.type=e,i.url=r,"GET"!==e||n.proxy_url||(i.dataType="jsonp"),$.ajax(i)}},d=c("POST"),l=c("GET"),p=c("PUT"),a=c("DELETE"),E=function(){var e,t;return e=1<=arguments.length?M.call(arguments,0):[],t=n.proxy_url,(t||"https://bitbucket.org/!api/1.0/")+e.join("/")},f=function(e){var t,i,n,r,o,s,a,l,c;if(null==e&&(e={}),n=function(){var t;t=[];for(i in e)P.call(e,i)&&t.push(i);return t}().sort(),0===n.length)return"";for(t=[],s=0,l=n.length;l>s;s++)for(i=n[s],o=e[i],o instanceof Array||(o=[o]),a=0,c=o.length;c>a;a++)r=o[a],t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return"?"+t.join("&")},n.error=function(e){function t(e){return this instanceof t?(this.name="bitbucket.error",this.message=e,void 0):new t(e)}return q(t,e),t}(Error),x=function(t,i,n){var r,o;return null==n&&(n="%"),"string"==typeof i&&(n=i,i={}),r=["component","kind","milestone","version"],o={},o[n.replace(/%/,"utc_created_on,utc_last_updated")]=e,o[n.replace(/%/,"metadata:"+r.join())]=T,_(b(t,i),o)},k=function(t,i,n){var r;return null==n&&(n="%"),"string"==typeof i&&(n=i,i={}),r={},r[n.replace(/%/,"utc_created_on,utc_updated_on")]=e,r[n.replace(/%/,"author_info:author")]=m,_(b(t,i),r)},C=function(t,i,n){var r;return null==n&&(n="%"),"string"==typeof i&&(n=i,i={}),null!=(null!=i?i.mailing_lists:void 0)&&(i.email_mailinglist=i.mailing_lists.join("\n"),delete i.mailing_lists),r={},r[n.replace(/%/,"utc_created_on,utc_last_updated")]=e,r[n.replace(/%/,"email_mailinglist:mailing_lists")]=u,_(b(t,i),r)},w=function(t,i){var n;return null==i&&(i="%"),n={},n[i.replace(/%/,"utctimestamp")]=e,n[i.replace(/%/,"size")]=v,_(b(t),n)},n.flags={access:{direct:1,via_groups:2},output:{include_groups:4}},h=function(){var e,t,i,r,o,s,a,l,c,u;for(a=["read","write","admin"],l={},o=c=0,u=a.length;u>c;o=++c)r=a[o],l[r]=o;return s=function(){var e;return e=1<=arguments.length?M.call(arguments,0):[],a[Math.max.apply(Math,function(){var t,i,n;for(n=[],t=0,i=e.length;i>t;t++)r=e[t],n.push(l[r]||0);return n}())]},e=n.flags.access.direct,t=n.flags.access.via_groups,i=n.flags.output.include_groups,function(n){return{direct:e,expand:t,flags:n,groups:i,max:s,privileges:{}}}}(),n.repositories=function(){var e,t,i,n;return i=2<=arguments.length?M.call(arguments,0,n=arguments.length-1):(n=0,[]),e=arguments[n++],t=i[0],l(E("repositories")+f(t),C(e,"repositories.[%]"))},n.repository=function(){function t(e,i){var n;return null==i&&(n=e.split("/"),e=n[0],i=n[1]),this instanceof t?(this.username=e,this.slug=i,void 0):new t(e,i)}return t.create=function(e,i){var r,o;if(o=e.username,r=e.slug,!o||!r)throw n.error('"username" and "slug" are required attributes');if(/^[.]{1,2}$/.test(r))throw n.error('"'+r+'" is an invalid slug');if(/[^a-z0-9.-]/.test(r))throw n.error('"'+r+'" does not match /^[a-z0-9.-]+$/');return delete e.username,delete e.slug,e.name=r,d(E("repositories"),C(i,e)),t(o,r)},t.prototype.toString=function(){return this.username+"/"+this.slug},t.prototype.url=function(){var e;return e=1<=arguments.length?M.call(arguments,0):[],E.apply(null,["repositories",this.username,this.slug].concat(M.call(e)))},t.prototype.details=function(e){return l(this.url(),C(e))},t.prototype.update=function(e,t){return p(this.url(),C(t,e))},t.prototype.destroy=function(e){return a(this.url(),e)},t.prototype.branches=function(t){return l(this.url("branches"),_(t,{"{utctimestamp}":e,"{size}":v}))},t.prototype.changeset=function(e,t){return l(this.url("changesets",e),w(t))},t.prototype.changesets=function(){var e,t,i,n;return i=2<=arguments.length?M.call(arguments,0,n=arguments.length-1):(n=0,[]),e=arguments[n++],t=i[0],l(this.url("changesets")+f(t),w(e,"changesets.[%]"))},t.prototype.diffstat=function(e,t){return l(this.url("changesets",e,"diffstat"),t)},t.prototype.directory=function(){var t,i,n,r;return n=arguments[0],i=3<=arguments.length?M.call(arguments,1,r=arguments.length-1):(r=1,[]),t=arguments[r++],l(this.url("src",n,i),_(t,{"files.[utctimestamp]":e}))},t.prototype.file=function(e,t,i){return l(this.url("src",e,t),g("data",i))},t.prototype.followers=function(e){return l(this.url("followers"),g("followers",e))},t.prototype.create_issue=function(e,t){return d(this.url("issues"),x(t,e))},t.prototype.update_issue=function(e,t,i){return p(this.url("issues",e),x(i,t))},t.prototype.delete_issue=function(e,t){return a(this.url("issues",e),t)},t.prototype.issue=function(e,t){return l(this.url("issues",e),x(t))},t.prototype.create_issue_comment=function(e,t,i){return d(this.url("issues",e,"comments"),k(i,t))},t.prototype.update_issue_comment=function(e,t,i,n){return p(this.url("issues",e,"comments",t),k(n,i))},t.prototype.delete_issue_comment=function(e,t,i){return a(this.url("issues",e,"comments",t),i)},t.prototype.issue_comment=function(e,t,i){return l(this.url("issues",e,"comments",t),k(i))},t.prototype.issue_comments=function(e,t){return l(this.url("issues",e,"comments"),k(t,"[%]"))},t.prototype.issue_followers=function(e,t){return l(this.url("issues",e,"followers"),g("followers",t))},t.prototype.issues=function(){var e,t,i,n;return i=2<=arguments.length?M.call(arguments,0,n=arguments.length-1):(n=0,[]),e=arguments[n++],t=i[0],l(this.url("issues")+f(t),x(e,"issues.[%]"))},t.prototype.create_linkifier=function(e,t){return d(this.url("links"),e,t)},t.prototype.update_linkifier=function(e,t,i){return p(this.url("links",e),t,i)},t.prototype.delete_linkifier=function(e,t){return a(this.url("links",e),t)},t.prototype.linkifier=function(e,t){return l(this.url("links",e),t)},t.prototype.linkifiers=function(){},t.prototype.deploy_key=function(e,t,i){return l(this.url("deploy-keys",e),t,i)},t.prototype.deploy_keys=function(e,t){return l(this.url("deploy-keys"),e,t)},t.prototype.create_deploy_key=function(e,t){return d(this.url("deploy-keys"),e,t)},t.prototype.update_deploy_key=function(e,t,i){return p(this.url("deploy-keys",e),t,i)},t.prototype.delete_deploy_key=function(e,t){return a(this.url("deploy-keys",e),t)
},t.prototype.privileges=function(e,t){var n,r,o,s,a,c;return null==t&&(t=e,e=3),t=b(t),a=t.success||function(){},o=t.error||function(){},r=h(e),n=2,c=function(){return--n>0},s=!1,t.error=function(e,t,i){return s?void 0:(o(e,t,i),s=!0)},t.success=i(r,function(e,t,i){var n,r,o,s,l,u;if(this.flags&this.direct)for(s=0,l=e.length;l>s;s++)u=e[s],n=u.privilege,r=u.user,o=r.username,this.privileges[o]=this.max(this.privileges[o],n);return c()?void 0:a(this.privileges,t,i)}),l(E("privileges",this),t),t.success=i(r,function(e,t,i){var n,r,o,s,l,u,d,h,p;if(this.flags&(this.groups|this.expand))for(s=0,u=e.length;u>s;s++)if(h=e[s],r=h.privilege,n=h.group,this.flags&this.groups&&(this.privileges[n.owner.username+"/"+n.slug]=r),this.flags&this.expand)for(p=n.members,l=0,d=p.length;d>l;l++)o=p[l].username,this.privileges[o]=this.max(this.privileges[o],r);return c()?void 0:a(this.privileges,t,i)}),l(E("group-privileges",this),t)},t.prototype.tags=function(t){return l(this.url("tags"),_(t,{"{utctimestamp}":e,"{size}":v}))},t.prototype.wiki_page=function(){var e,t,i,n;return i=2<=arguments.length?M.call(arguments,0,n=arguments.length-1):(n=0,[]),e=arguments[n++],t=i[0],l(this.url("wiki",t),e)},t}(),j=["component","milestone","version"],D=function(){var e,t,i;return t=r,e=r+"s",i=n.repository.prototype,i["create_"+t]=function(t,i){return d(this.url("issues",e),{name:t},i)},i["update_"+t]=function(t,i,n){return p(this.url("issues",e,t),{name:i},n)},i["delete_"+t]=function(t,i){return a(this.url("issues",e,t),i)},i[t]=function(t,i){return l(this.url("issues",e,t),i)},i[e]=function(t){return l(this.url("issues",e),t)}};for(I=0,A=j.length;A>I;I++)r=j[I],D();n.send_invitation=function(t,i,n,r){var o,s,a,l;return l=n.toString().split("/"),a=l[0],s=l[1],o=E("invitations",a,s,t),d(o,{permission:i},e("utc_sent_on",C(r,"repository.%")))},n.send_general_invitation=function(e,t){return d(E("invitations",e),t)},n.users=function(e,t){var i;return 0===(null!=(i=e.user)?i.length:void 0)?(t=b(t),"function"==typeof t.complete&&t.complete(),t.success([]),void 0):l(E("users")+f(e),s(t,function(e){var t,i,n,r;for(i={},n=0,r=e.length;r>n;n++)t=e[n],i[t.username]=t;return i}))},n.user=function(){function t(e){return this instanceof t?(this.username=e,void 0):new t(e)}return t.create=function(e,i){var r;if(r=e.username,!r)throw n.error('"username" is a required attribute');return d(E("newuser"),e,i),t(r)},t.prototype.url=function(){var e;return e=1<=arguments.length?M.call(arguments,0):[],E.apply(null,["users",this.username].concat(M.call(e)))},t.prototype.details=function(e){return l(this.url(),g("user",e))},t.prototype.events=function(){var t,i,n,r;return n=2<=arguments.length?M.call(arguments,0,r=arguments.length-1):(r=0,[]),t=arguments[r++],i=n[0],l(this.url("events")+f(i),_(t,{"events.[utc_created_on:date]":e}))},t.prototype.followers=function(e){return l(this.url("followers"),g("followers",e))},t.prototype.delete_invitation=function(e,t){return a(this.url("invitations",e),t)},t.prototype.invitation=function(t,i){return l(this.url("invitations",t),_(i,{utc_sent_on:e}))},t.prototype.invitations=function(t){return l(this.url("invitations"),_(t,{"[utc_sent_on]":e}))},t.prototype.invite=function(e,t,i){return p(this.url("invitations",e,t),i)},t.prototype.uninvite=function(e,t,i){return a(this.url("invitations",e,t),i)},t.prototype.plan=function(e){return l(this.url("plan"),e)},t.prototype.privileges=function(e,t){var n,r,o,s,a,c;return null==t&&(t=e,e=3),t=b(t),a=t.success||function(){},o=t.error||function(){},r=h(e),n=2,c=function(){return--n>0},s=!1,t.error=function(e,t,i){return s?void 0:(o(e,t,i),s=!0)},t.success=i(r,function(e,t,i){var n,r,o,s,l,u,d;if(this.flags&this.direct)for(l=0,u=e.length;u>l;l++)d=e[l],n=d.privilege,r=d.repo,o=d.user,r=(s=this.privileges)[r]||(s[r]={}),r[o.username]=this.max(r[o.username],n);return c()?void 0:a(this.privileges,t,i)}),l(E("privileges",this.username),t),t.success=i(r,function(e,t,i){var n,r,o,s,l,u,d,h,p,f,m;if(this.flags&(this.groups|this.expand))for(u=0,h=e.length;h>u;u++)if(f=e[u],r=f.privilege,o=f.repo,n=f.group,o=(l=this.privileges)[o]||(l[o]={}),this.flags&this.groups&&(o[n.owner.username+"/"+n.slug]=r),this.flags&this.expand)for(m=n.members,d=0,p=m.length;p>d;d++)s=m[d].username,o[s]=this.max(o[s],r);return c()?void 0:a(this.privileges,t,i)}),l(E("group-privileges",this.username),t)},t.prototype.repositories=function(e){return l(this.url(),g("repositories",C(e,"[%]")))},t.prototype.add_email_address=function(e,t){return d(this.url("emails",e),t)},t.prototype.set_primary_email_address=function(e,t){return p(this.url("emails",e),{primary:!0},t)},t.prototype.remove_email_address=function(e,t){return a(this.url("emails",e),t)},t.prototype.email_address=function(e,t){return l(this.url("emails",e),t)},t.prototype.email_addresses=function(e){return l(this.url("emails"),e)},t.prototype.remove_ad=function(e,t){return a(this.url("ad",e),t)},t.prototype.feature_viewed=function(e,t){return a(this.url("feature",e),t)},t.prototype.add_ssh_key=function(e,t){return d(this.url("ssh-keys"),e,m("pk:id",t))},t.prototype.update_ssh_key=function(e,t,i){return p(this.url("ssh-keys",e),t,m("pk:id",i))},t.prototype.remove_ssh_key=function(e,t){return a(this.url("ssh-keys",e),t)},t.prototype.ssh_key=function(e,t){return l(this.url("ssh-keys",e),m("pk:id",t))},t.prototype.ssh_keys=function(e){return l(this.url("ssh-keys"),m("[pk:id]",e))},t.prototype.create_consumer=function(e,t){return d(this.url("consumers"),e,t)},t.prototype.update_consumer=function(e,t,i){return p(this.url("consumers",e),t,i)},t.prototype.delete_consumer=function(e,t){return a(this.url("consumers",e),t)},t.prototype.consumer=function(e,t){return l(this.url("consumers",e),t)},t.prototype.consumers=function(e){return l(this.url("consumers"),e)},t.prototype.add_member=function(e,t,i){return d(this.url("privileges",e),{privilege:t},i)},t.prototype.update_member=function(e,t,i){return p(this.url("privileges",e),{privilege:t},i)},t.prototype.remove_member=function(e,t){return a(this.url("privileges",e),t)},t.prototype.members=function(e){return l(this.url("privileges"),e)},t}(),n.groups=function(e,t){return l(E("groups")+f(e),t)},n.group=function(){function e(t,i){return this instanceof e?(this.username=t,this.slug=i,void 0):new e(t,i)}return e.prototype.url=function(){var e;return e=1<=arguments.length?M.call(arguments,0):[],E.apply(null,["groups",this.username,this.slug].concat(M.call(e)))},e.prototype.details=function(e){return l(this.url(),e)},e}(),n.utils={alphabetical:t},window.bitbucket=n}.call(this),define("bitbucket",["jquery"],function(e){return function(){var t;return t||e.bitbucket}}(this)),define("data/no-avatar-image",["jquery"],function(e){var t=e(document.body).attr("data-no-avatar-image");return t}),define("components/groups/index",["bitbucket","backbone","utils/api-helper","data/no-avatar-image"],function(e,t,i,n){var r={},o=r.GroupMember=t.Model.extend({idAttribute:"username",group_:null,group:function(){return this.group_},setGroup:function(e){return this.group_=e,this},url:function(){var e,n=this.group();return n?e=n.isMine()?i.toString("groups",n.owner().get("username"),n.get("slug"),"members",this.get("username")):i.toString("group-privileges",n.get("targetUser").username,n.owner().get("username"),n.get("slug"),{"private":!0}):(e=t.Model.prototype.url.call(this),this.isNew()&&(e+=this.get("username"))),e},displayName:function(e){var t,i=this.attributes;return t=i.first_name&&i.last_name?e?"{first_name} {last_name} ({username})":"{first_name} {last_name}":"{username}",t.format(i)},avatarUrl:function(){return this.get("avatar")||n},toJSON:function(){var e=t.Model.prototype.toJSON.call(this);return e.displayName=this.displayName(),e.avatarUrl=this.avatarUrl(),e}}),s=r.GroupMembers=t.Collection.extend({model:o,group_:null,group:function(){return this.group_},setGroup:function(e){this.group_=e,this.invoke("setGroup",e)},comparator:function(e){return e.displayName().toLowerCase()},url:function(){var e=i.concat("groups",this.group().get("owner").username);return e.toString(this.group().get("slug"),"members")}}),a=r.Repository=t.Model.extend({displayName:function(){return this.get("owner").username+"/"+this.get("slug")}});r.Repositories=t.Collection.extend({model:a});var l=r.Group=t.Model.extend({idAttribute:"slug",groupMembers_:null,owner_:null,repositories_:null,initialize:function(e){this.parseOwner_(e),this.parseGroupMembers_(e),this.get("owner").is_team&&(this.privilege=new c({group:this,privilege:null}))},parse:function(e){return this.parseGroupMembers_(e),e},parseGroupMembers_:function(e){e.members&&(null===this.groupMembers()&&this.setGroupMembers(new s),this.groupMembers().reset(e.members),delete e.members)},parseOwner_:function(e){this.setOwner(new o(e.owner))},groupMembers:function(){return this.groupMembers_},setGroupMembers:function(e){return this.groupMembers_=e,this.groupMembers_.setGroup(this),this},owner:function(){return this.owner_},setOwner:function(e){return this.owner_=e,this},repositories:function(){return this.repositories_},setRepositories:function(e){return this.repositories_=e,this},displayName:function(){return"{}:{}".format(this.owner().get("username"),this.get("slug"))},isMine:function(){return function(){return this.owner().get("username")===this.get("targetUser").username}}(),toJSON:function(){var e=t.Model.prototype.toJSON.call(this);return this.groupMembers()&&(e.members=this.groupMembers().toJSON()),e.auto_add?e[e.permission]=!0:e.no=!0,e},isLastAccountAdminGroup:function(e){var t=this.collection.accountAdminGroups(e);return 1===t.length&&_.indexOf(t,this)>=0}});r.Groups=t.Collection.extend({idAttribute:"slug",model:l,initialize:function(e,t){this.targetUser=t.targetUser},url:function(){return i.concat("groups",this.targetUser).toString()},comparator:function(e){return e.displayName().toLowerCase()},accountAdminGroups:function(e){var t=this.filter(function(e){return"admin"===e.privilege.get("privilege")&&e.groupMembers().length});return e?_.filter(t,function(t){return 1===t.groupMembers().filter(function(t){return t.get("username")===e}).length}):t}}),r.Message=t.Model.extend({defaults:{title:null}});var c=r.GroupAccountPrivilege=t.Model.extend({toJSON:function(){var e={privilege:this.get("privilege")};return e[e.privilege]=!0,e},parse:function(e){return{privilege:e?_.values(e)[0]:null}},url:function(){var e=this.get("group"),t=e.get("owner").username,n=e.get("slug");return i.toString("users",t,"privileges",t,n)},sync:function(e,i,n){"read"!==e&&(e=i.get("privilege")?"update":"delete");var r=n.error;return n.error=function(e,t){return 404===e.status?n.success(null,t,e):(r(e),void 0)},t.sync.call(this,e,i,n)}});return r}),define("components/share/share-detail",["backbone","underscore"],function(e,t){var i=e.View.extend({tagName:"tr",template:"share-detail-template",events:{"click .delete":"destroyModel"},initialize:function(){this.events&&(this.events=t.defaults(this.events,i.prototype.events)),this.delegateEvents(this.events),t.bindAll(this,"render","remove"),this.model.on("change",this.render),this.model.on("destroy",this.remove)},destroyModel:function(e){e.preventDefault(),this.model.destroy()},remove:function(){this.$el.remove()}});return i}),define("components/share/team-share-detail",["underscore","components/share/share-detail","utils/mustache"],function(e,t,i){return t.extend({events:{"click .admin":"toggleAdmin","change .group":"setGroup"},initialize:function(){t.prototype.initialize.call(this),e.bindAll(this,"toggleAdmin","setGroup")},render:function(){var t=this.model.toJSON();return t.hasCustomGroups=this.options.hasCustomGroups,this.options.hasCustomGroups&&(t.groups=e.map(this.options.groups,function(e){return{name:e.name,slug:e.slug,isSelected:e.slug===this.model.get("group")}}.bind(this)),t.noGroupChoices=t.groups.length<=1),t.isAdmin="administrators"===this.model.get("group"),this.$el.html(i.toHtml(this.template,t)),this},toggleAdmin:function(){var e=this.$(".admin").is(":checked")?"administrators":"developers";this.setGroup(null,e)},setGroup:function(e,t){this.model.set({group:t?t:this.$(".group").val()})}})}),define("components/share/share",["backbone","bitbucket","jquery","data/current-repo","data/current-user","utils/api-helper"],function(e,t,i,n,r,o){return e.Model.extend({initialize:function(e){this.teamName=e.teamName||n.owner.username},save:function(){var e;if(this.get("email")){if(this.get("permission"))e=t.send_invitation(this.get("email"),this.get("permission"),n.toString());else if(this.get("group")){var s=t.user(this.teamName),a=s.username+"/"+this.get("group");e=s.invite(this.get("email"),a)}}else this.get("username")&&(this.get("permission")?e=i.ajax({url:o.concat("privileges",n.owner.username,n.slug,this.get("username")),type:"PUT",data:this.get("permission"),dataType:"json"}):this.get("group")&&(e=i.ajax({url:o.concat("groups",this.teamName,this.get("group"),"members",this.get("username")),type:"PUT",data:JSON.stringify(this.get("bbUserObject")),dataType:"json"})));e.error(function(e){if(500===e.status)this.set({error:gettext("There was a problem processing your request.")});else if(402===e.status){var t=i.parseJSON(e.responseText).data;if(t.user.username===r.username)this.set({error:gettext("You are already at your plan limit and will need to upgrade your plan before adding more users.")});else{var n=gettext("This account (%(username)s) is at its plan limit and will need to be upgraded before adding more users.");this.set({error:interpolate(n,{username:t.user.username},!0)})}}else 409!==e.status&&this.set({error:e.responseText})}.bind(this)).complete(function(){this.trigger("save",this)}.bind(this))}})}),define("components/share/share-collection",["backbone","components/share/share"],function(e,t){return e.Collection.extend({model:t,add:function(t){var i=this.any(function(e){return t.get("username")?t.get("username")===e.get("username"):t.get("email")?t.get("email")===e.get("email"):void 0});return i?!1:(e.Collection.prototype.add.call(this,t),void 0)}})}),define("utils/valid",[],function(){return{email:function(e){return/^[^@\s]+@[^.@\s]+(\.[^.@\s]+)+$/.test(e)},url:function(e){return/^[^.@\s]+(\.[^.@\s]+)+$/.test(e)}}}),function(e){e.widget("ui.autocomplete",{options:{appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,extractTerms:null},_create:function(){var t,i=this,n=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(!i.options.disabled&&!i.element.attr("readonly")){t=!1;var r=e.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:i._move("previousPage",n);break;case r.PAGE_DOWN:i._move("nextPage",n);break;case r.UP:i.menu.element.is(":visible")&&(i._move("previous",n),n.preventDefault());break;case r.DOWN:i.menu.element.is(":visible")&&(i._move("next",n),n.preventDefault());break;case r.ENTER:case r.NUMPAD_ENTER:i.menu.active&&(t=!0,n.preventDefault());case r.TAB:if(!i.menu.active)return;i.menu.select(n);break;case r.ESCAPE:i.element.val(i.term),i.close(n);break;default:clearTimeout(i.searching),i.searching=setTimeout(function(){i.term!=i.element.val()&&(i.selectedItem=null,i.search(null,n))},i.options.delay)}}}).bind("keypress.autocomplete",function(e){t&&(t=!1,e.preventDefault())}).bind("focus.autocomplete",function(){i.options.disabled||(i.selectedItem=null,i.previous=i.element.val())}).bind("blur.autocomplete",function(e){i.options.disabled||(clearTimeout(i.searching),i.closing=setTimeout(function(){i.close(e),i._change(e)},150))}),this._initSource(),this.response=function(){return i._response.apply(i,arguments)},this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",n)[0]).mousedown(function(t){var n=i.menu.element[0];e(t.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(t){t.target===i.element[0]||t.target===n||e.ui.contains(n,t.target)||i.close()})},1),setTimeout(function(){clearTimeout(i.closing)},13)}).menu({focus:function(e,t){var n=t.item.data("item.autocomplete");!1!==i._trigger("focus",e,{item:n})&&/^key/.test(e.originalEvent.type)&&i.element.val(n.value)},selected:function(e,t){var r=t.item.data("item.autocomplete"),o=i.previous;i.element[0]!==n.activeElement&&(i.element.focus(),i.previous=o,setTimeout(function(){i.previous=o,i.selectedItem=r},1)),!1!==i._trigger("select",e,{item:r})&&i.element.val(r.value),i.term=i.element.val(),i.close(e),i.selectedItem=r},blur:function(){i.menu.element.is(":visible")&&i.element.val()!==i.term&&i.element.val(i.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(e(i||"body",this.element[0].ownerDocument)[0])},_initSource:function(){var t,i,n=this;this.cache=this.cache||{},e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,r){n.xhr&&n.xhr.abort();var o=t.term;return o in n.cache?(r(n.cache[o]),void 0):(n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e,t,i){n.cache[o]=e,i===n.xhr&&r(e),n.xhr=null},error:function(e){e===n.xhr&&r([]),n.xhr=null}}),void 0)}):this.source=this.options.source},search:function(e,t){return e=null!=e?e:this.element.val(),this.term=this.element.val(),e.length<this.options.minLength?this.close(t):(clearTimeout(this.closing),this._trigger("search",t)!==!1?this._search(e):void 0)},_search:function(e){this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this.response)},_response:function(e){e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close(),this.element.removeClass("ui-autocomplete-loading")},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.deactivate(),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItem(t,i)})},_escape:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},_renderItem:function(t,i){var n=function(e){return e.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},r=this.options.extractTerms||function(e){return[e]},o=r(e(this.element).val());o=_.filter(o,function(e){return e}),o=_.sortBy(o,function(e){return-e.length});var s=new RegExp("(?![^&;]+;)(?!<[^<>]*)("+_.map(o,n).join("|")+")(?![^<>]*>)(?![^&;]+;)","gi"),a=e("<a>");return a.html(this._escape(i.label).replace(s,"<strong>$1</strong>")),i.avatar&&a.prepend(e("<img />").attr("src",i.avatar)),e("<li></li>").data("item.autocomplete",i).append(a).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)?(this.element.val(this.term),this.menu.deactivate(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(i){e(i.target).closest(".ui-menu-item a").length&&(i.preventDefault(),t.select(i))}),this.refresh()},refresh:function(){var t=this,i=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");i.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(i){t.activate(i,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){if(this.deactivate(),this.hasScroll()){var i=t.offset().top-this.element.offset().top,n=this.element.attr("scrollTop"),r=this.element.height();0>i?this.element.attr("scrollTop",n+i):i>=r&&this.element.attr("scrollTop",n+i-r+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,i){if(!this.active)return this.activate(i,this.element.children(t)),void 0;var n=this.active[e+"All"](".ui-menu-item").eq(0);n.length?this.activate(i,n):this.activate(i,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last())return this.activate(t,this.element.children(".ui-menu-item:first")),void 0;var i=this.active.offset().top,n=this.element.height(),r=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i-n+e(this).height();return 10>t&&t>-10});r.length||(r=this.element.children(".ui-menu-item:last")),this.activate(t,r)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first())return this.activate(t,this.element.children(".ui-menu-item:last")),void 0;var i=this.active.offset().top,n=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i+n-e(this).height();return 10>t&&t>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(t,result)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),define("jquery-plugins/jquery.ui.autocomplete",function(){}),define("components/share/share-form",["aui","backbone","bitbucket","jquery","underscore","components/share/share","components/share/share-collection","utils/gaq-push","utils/mustache","utils/valid","jquery-plugins/jquery.ui.autocomplete"],function(e,t,i,n,r,o,s,a,l,c){return t.View.extend({template:"share-form-template",events:{"submit form":"add","keyup .user-or-email":"toggleAddButton"},initialize:function(){r.bindAll(this,"render","renderShare","toggleAddButton","hideError","showError","add","send"),this.collection=new s,this.collection.on("add",this.renderShare),this.collection.on("reset",this.render),this.errors=[],this.on("send",this.send)},render:function(){var e={disabled:this.disabled};return this.$el.html(l.toHtml(this.template,e)),this.$error=this.$(".error"),this.$userOrEmail=this.$(".user-or-email"),this.$addButton=this.$("button"),this.$userOrEmail.autocomplete({minLength:3,source:"/xhr/users/",select:function(e,t){this.$userOrEmail.val(t.item.value),this.$("form").submit()}.bind(this),open:function(){var e=n(this);e.val()||e.autocomplete("close")}}),this.collection.each(function(e){this.renderShare(e)}.bind(this)),this},renderShare:function(e){var t=new this.DetailView({groups:this.options.groups,hasCustomGroups:this.hasCustomGroups,model:e});this.$("tbody").append(t.render().el)},toggleAddButton:function(){""!==this.$userOrEmail.val()?this.$addButton.removeAttr("disabled"):this.$addButton.attr("disabled","disabled")},hideError:function(){this.$error.addClass("hidden")},isValid:function(){return!0},getFormError:function(){return this.errors.length?this.errors.pop():gettext("An unknown error occurred")},showError:function(e,t){var i=t?"html":"text";this.$error.find(".message")[i](e).end().removeClass("hidden")},add:function(e){e.preventDefault(),this.$userOrEmail.autocomplete("close");var t=this.$userOrEmail.val(),n=r.clone(this.modelSkeleton),s=function(){this.hideError(),this.$userOrEmail.val(""),this.collection.add(new o(n))}.bind(this);return t?(c.email(t)?(n.email=t,s()):i.user(t).details(function(e){n=r.extend(n,{username:e.username,displayName:e.first_name||e.last_name?e.first_name+" "+e.last_name:e.username,avatar:e.avatar,bbUserObject:e}),this.isValid(e)?s():this.showError(this.getFormError())}.bind(this)).error(function(){var e=gettext('User "%(user_or_email)s" does not exist.');this.showError(interpolate(e,{user_or_email:t},!0))}.bind(this)),void 0):!1},send:function(){if(0===this.collection.length)return this.showError(gettext("Add a user or email address.")),!1;this.trigger("sending"),this.disabled=!0,this.render();var e=this.collection.length,t=e,i="repo"===this.shareType?"Repo Share":"Team Share";this.collection.each(function(e){var t=e.get("username")?"Existing User":"New User";a(["atl._trackEvent","Share",i,t]),e.save()}),this.collection.on("save",function(i){--e,i.get("error")||i.destroy(),0>=e&&(this.collection.length?(this.trigger("error"),this.disabled=!1,this.render(),this.showError(i.get("error")),this.off("success")):(this.disabled=!1,this.render(),this.trigger("success",{inviteCount:t})))}.bind(this))}})}),define("components/share/team-share-form",["aui","underscore","components/share/team-share-detail","components/share/share-form","utils/gaq-push","data/current-user"],function(e,t,i,n,r,o){return n.extend({initialize:function(e){this.DetailView=i,this.modelSkeleton={group:this.options.groups.length?this.options.groups[0].slug:"developers",teamName:e.teamName},this.shareType="team",this.hasCustomGroups=function(){if(2===this.options.groups.length){var e=!1,i=!1;if(t.each(this.options.groups,function(t){"Administrators"===t.name&&"admin"===t.permission?e=!0:"Developers"===t.name&&"write"===t.permission&&(i=!0)}),e&&i)return!1}return!0}.bind(this)(),n.prototype.initialize.call(this)},isValid:function(e){return e.username===this.modelSkeleton.teamName?(this.errors.push(gettext("You cannot invite a team to join itself.")),!1):e.username===o.username?(this.errors.push(gettext("You cannot invite yourself.")),!1):e.is_team?(this.errors.push(gettext("You cannot invite another team.")),!1):!0},send:function(){this.on("success",function(){r(["atl._trackEvent","Share","Share team"]),e.messages.success({body:gettext("You have successfully shared this team")})}),n.prototype.send.call(this)}})}),define("components/share/panel/team",["jquery","backbone","underscore","components/share/team-share-form","utils/api-helper","utils/mustache","utils/loading"],function(e,t,i,n,r,o){return t.View.extend({className:"share-panel-team maskable",display:gettext("Team"),action:gettext("Invite"),manageText:gettext("Manage this team"),template:"share-team-template",initialize:function(e){this.teamName=e.name,this.teamDisplay=e.display,this.teamAvatar=e.avatar,this.manageUrl=e.manageUrl},render:function(){return this.loadGroupsDeferred=this.loadGroupsDeferred||e.ajax({url:r.concat("groups",this.teamName),dataType:"json"}),this.$el.loading(this.loadGroupsDeferred,{mask:!0}).done(function(e){this.$el.html(o.toHtml(this.template,{display_name:this.teamDisplay,avatar:this.teamAvatar})),this.form=new n({el:this.$(".share-form"),groups:this.filterGroups(e),teamName:this.teamName}).render(),this.form.on("all",function(e,t){this.trigger(e,t)},this)}.bind(this)),this},filterGroups:function(e){return e},share:function(){this.form.send()},getManageLink:function(){return this.manageUrl}})}),define("components/modal-dialog",["aui","jquery"],function(e,t){var i=0;return function(n,r){var o=n.id||i++,s=new e.Dialog({width:n.width||450,height:n.height||"auto",id:"bb-"+o+"-confirmation-dialog"}),a=t("<div></div>").html(n.content),l=n.buttonText||gettext("Okay");return n.title&&s.addHeader(n.title),s.addPanel("main",a,"confirmation-dialog-body"),s.addButton(l,function(e){e.remove(),r.resolve()}),s}}),define("components/confirm-dialog",["jquery","components/modal-dialog"],function(e,t){return function(i){var n,r=e.Deferred();n="string"==typeof i?{content:i}:i,n.buttonText=n.buttonText||gettext("Confirm"),n.cancelText=n.cancelText||gettext("Cancel");var o=t(n,r);return o.addCancel(n.cancelText,function(e){e.remove(),r.reject()}),o.show(),r.promise()}}),define("components/share/panel/team-admin",["underscore","components/groups/index","components/share/panel/team","components/confirm-dialog"],function(e,t,i,n){return i.extend({className:"share-panel-team-admin",display:gettext("Team administrators"),action:gettext("Add administrators"),template:"share-team-admin-template",groupNameRoot:"Administrators",initialize:function(e){i.prototype.initialize.call(this,e),this.adminGroups=e.adminGroups,this.groupCollection=new t.Groups([],{targetUser:this.teamName}),this.on("success",this.onSuccess)},onSuccess:function(){n({title:gettext("Invitation sent"),content:gettext("The invitation has been sent. Please log out before accepting the invitation."),buttonText:gettext("Log out"),cancelText:gettext("No thanks")}).done(function(){window.location="/account/signout/"})},share:function(){if(this.adminGroups.length)this.form.send();else{var e=this.findUniqueGroupName();this.groupCollection.create({name:e,owner:{username:this.name,is_team:!0}},{success:function(i){new t.GroupAccountPrivilege({group:i,privilege:"admin"}).save(),this.form.collection.each(function(t){t.set({group:e.toLowerCase()})}),i.save({permission:"admin",auto_add:!0}),this.form.send()}.bind(this)})}},filterGroups:function(t){return this.allGroups=t,e.filter(t,function(t){var i=t.owner.username+"/"+t.slug;return e.indexOf(this.adminGroups,i)>=0}.bind(this))},findUniqueGroupName:function(t){function i(e,t){return e.toLowerCase()==t.slug}var n=this.groupNameRoot+(t?t:"");return e.find(this.allGroups,e.partial(i,n))?this.findUniqueGroupName(t?t+1:1):n}})}),define("team-login-warning",["jquery","aui","data/current-user","components/share/share-dialog","components/share/panel/team-admin","utils/mustache"],function(e,t,i,n,r,o){function s(e){e&&e.preventDefault(),h.show()}var a=e("#team-login-warning-data");if(i.isTeam&&a.length){var l=a.data("team-admin-groups"),c=a.attr("data-team-manage-link"),u=1===a.data("team-admin-count"),d=new r({adminGroups:l,name:i.username,display:i.displayName,avatar:i.avatarUrl,manageUrl:c}),h=new n({id:"team-admins",shareButtonText:"Save"}).renderPanels([d]);e("#account-warning").on("click",'[href="#add-admin"]',s),e("#team-admins").find(".add-admin").on("click",s);var p="team-login-warning-last-shown",f=6048e5,m=(new Date).getTime(),g=localStorage&&localStorage.getItem(p);if(!g||m-g>f){var v=new t.Dialog({width:600,height:"auto",id:"team-login-warning-dialog"}),b=e(o.toHtml("team-login-warning-template",{noAdmins:u}));
v.addHeader(b.attr("data-title")),v.addPanel("main",b),v.addButton("Set up administrator account",function(e){e.remove(),s()}),v.addCancel("Cancel",function(){v.remove()}),u?v.addLink("More information",null,"left",b.attr("data-admins-link")):v.addLink("See all administrators",null,"left",b.attr("data-admins-link")),v.show(),localStorage&&localStorage.setItem(p,m)}}}),define("tooltips",["aui","jquery","utils/ready"],function(e,t,i){i(function(){t(".aui-tooltip").tooltip()})}),function(e,t,i){function n(e){return e}function r(e){return decodeURIComponent(e.replace(o," "))}var o=/\+/g,s=e.cookie=function(o,a,l){if(a!==i){if(l=e.extend({},s.defaults,l),null===a&&(l.expires=-1),"number"==typeof l.expires){var c=l.expires,u=l.expires=new Date;u.setDate(u.getDate()+c)}return a=s.json?JSON.stringify(a):String(a),t.cookie=[encodeURIComponent(o),"=",s.raw?a:encodeURIComponent(a),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var d,h=s.raw?n:r,p=t.cookie.split("; "),f=0;d=p[f]&&p[f].split("=");f++)if(h(d.shift())===o){var m=h(d.join("="));return s.json?JSON.parse(m):m}return null};s.defaults={},e.removeCookie=function(t,i){return null!==e.cookie(t)?(e.cookie(t,null,i),!0):!1}}(jQuery,document),define("jquery-plugins/jquery.cookie",function(){}),define("components/banner",["bitbucket","jquery","data/current-user","utils/gaq-push","utils/ready","jquery-plugins/jquery.cookie"],function(e,t,i,n,r){r(".bb-banner",function(r){if(r.hasClass("ad")){var o=function(e){var i=t(e.target).parent(".bb-banner").attr("data-analytics");n(["atl._trackEvent","Advertisement",i+" - view"])},s=function(){var t=r.attr("data-analytics"),o=r.attr("data-ad");e.user(i.username).remove_ad(o,{}),r.addClass("hidden"),n(["atl._trackEvent","Advertisement",t+"- hide"])};r.find(".view").on("click",o),r.find(".close").on("click",s)}}),r(".bb-banner",function(t){if(t.hasClass("feature")){var r=function(){n(["atl._trackEvent","Advertisement","new-feature-banner - view"])},o=function(){n(["atl._trackEvent","Advertisement","new-feature-banner - tweet"])},s=function(){var r=t.attr("data-featureid");e.user(i.username).feature_viewed(r,{}),t.addClass("hidden"),n(["atl._trackEvent","Feature","new-feature-banner- hide"])};t.find(".view").on("click",r),t.find(".tweet").on("click",o),t.find(".close").on("click",s)}}),r("#signup-banner",function(e){var i=function(){n(["atl._trackEvent","Signup","Signup Banner","Clicked"])},r=function(){t.cookie("bb.hide-signup-banner",!0),e.remove(),n(["atl._trackEvent","Signup","Signup Banner","Dismissed"])};e.find(".signup-button").on("click",i),e.find(".close").on("click",r)})}),define("on-ready",[],function(){return function(e){return{onReady:e}}}),define("registration/create-team-link",["jquery","on-ready","utils/gaq-push"],function(e,t,i){return t(function(){e("#create-team-link").on("click",function(){i(["atl._trackEvent","Share","Create Team Menu Link"])})})}),define("feedback",["jquery"],function(e){return function(t){var i=e(t);i.length&&(e.ajax({url:"https://bitbucket.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e/en_US-w19h2v-1988229788/6253/229/1.4.7/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?collectorId=4ced2b8c",type:"get",cache:!0,dataType:"script"}),window.ATL_JQ_PAGE_PROPS={triggerFunction:function(i){e(t).click(function(e){e.preventDefault(),i()})}})}}),define("data/base-url",["jquery"],function(e){var t=e(document.body).attr("data-base-url");return t}),define("utils/delay",[],function(){return function(e,t){return"function"==typeof e&&(t=e,e=0),window.setTimeout(t,e)}}),define("utils/invite-helper",["bitbucket","jquery"],function(e,t){return{repo:{send:e.send_invitation},general:{send:e.send_general_invitation},getErrorMessages:function(e,i){var n,r="There was a problem processing your request.";return n=e?"{!esc} has already been invited.".format(e):"That person has already been invited",t.extend({400:"Please enter a valid email address.",409:n,500:r,other:r},i||{})}}}),define("components/invite-dialog",["aui","jquery","utils/delay","utils/invite-helper"],function(e,t,i,n){return function(r,o,s,a){a=a||{};var l,c=r.find('input[type="email"]'),u=new e.Dialog({width:600,height:"auto",id:o,closeOnOutsideClick:!0}),d=r.find(".error");return u.addHeader(gettext("Send an invitation")),u.addPanel(gettext("Invite"),r,"panel-body"),r.show(),u.addButton(gettext("Send"),function(){r.submit()},"aui-button aui-style"),u.addCancel(gettext("Cancel"),function(e){e.hide()}),l=u.getCurrentPanel().page.button[0].item,c.on("keyup input propertychange",function(){var e=t.trim(c.val());e?l.prop("disabled",!1).attr("aria-disabled",!1):l.prop("disabled",!0).attr("aria-disabled",!0)}),r.submit(function(o){o.preventDefault();var h=t.trim(c.val());if(h&&!l.attr("disabled")){var p=n.getErrorMessages(h,a.messages);l.prop("disabled",!0).attr("aria-disabled",!0);var f=i(200,function(){l.addClass("disabled loading")});d.addClass("hidden");var m={complete:function(){clearTimeout(f),l.prop("disabled",!1).removeClass("disabled loading").attr("aria-disabled",!1)},success:function(t,i,n){if(200===n.status){u.hide();var r=gettext("Invitation sent to %(email)s");e.messages.success({body:interpolate(r,{email:h},!0)})}},error:function(e,t){var i;i="timeout"!==t?p[e.status]||p.other:gettext("There was a problem connecting to the server."),d.removeClass("hidden").find(".message").text(i)}};s(h,r,m)}}),e.bind("show.dialog",function(e,t){t.dialog.id==o&&(r.find(".error").addClass("hidden"),c.val(""),l.prop("disabled",!0).attr("aria-disabled",!0))}),{show:function(){u.show()},hide:function(){u.hide()}}}}),define("repo/history",["jquery","underscore","data/current-user","utils/api-helper","jquery-plugins/jquery.cookie"],function(e,t,i,n){var r="recently-viewed-repos_"+i.id,o="repo-history:"+i.id,s=5,a=3e5;return{addRepository:function(n){if(n&&i.isAuthenticated){var a,l=n.id,c=e.cookie(r),u=c?c.split(","):[],d=t.indexOf(u,""+l);if(0===d)return;~d&&u.splice(d,1),a=[l].concat(u.slice(0,s-1)).join(","),e.cookie(r,a,{path:"/",expires:1e6}),window.localStorage&&window.localStorage.removeItem(o)}},fetch:function(){var t=new e.Deferred,i=window.localStorage&&window.localStorage.getItem(o),r=(new Date).getTime();if(i)try{if(i=JSON.parse(i),r-i.timestamp<a)return t.resolve(i),t}catch(l){}return e.ajax({cache:!1,type:"get",url:n.toString("user","repositories","overview",{max:s}),dataType:"json"}).success(function(e){e.timestamp=r,e.hasViewed=!!e.viewed.length,e.hasUpdated=!!e.updated.length,e.hasRepositories=e.hasViewed||e.hasUpdated,window.localStorage&&window.localStorage.setItem(o,JSON.stringify(e)),t.resolve(e)}),t}}}),define("utils/event-tracking-helper",["utils/gaq-push"],function(e){return function(t){return function(i,n){var r=["atl._trackEvent",t,i];n&&r.push(n),e(r)}}}),function(e){e.ui=e.ui||{};var t=/left|center|right/,i=/top|center|bottom/,n="center",r=e.fn.position,o=e.fn.offset;e.fn.position=function(o){if(!o||!o.of)return r.apply(this,arguments);o=e.extend({},o);var s,a,l,c=e(o.of),u=c[0],d=(o.collision||"flip").split(" "),h=o.offset?o.offset.split(" "):[0,0];return 9===u.nodeType?(s=c.width(),a=c.height(),l={top:0,left:0}):u.setTimeout?(s=c.width(),a=c.height(),l={top:c.scrollTop(),left:c.scrollLeft()}):u.preventDefault?(o.at="left top",s=a=0,l={top:o.of.pageY,left:o.of.pageX}):(s=c.outerWidth(),a=c.outerHeight(),l=c.offset()),e.each(["my","at"],function(){var e=(o[this]||"").split(" ");1===e.length&&(e=t.test(e[0])?e.concat([n]):i.test(e[0])?[n].concat(e):[n,n]),e[0]=t.test(e[0])?e[0]:n,e[1]=i.test(e[1])?e[1]:n,o[this]=e}),1===d.length&&(d[1]=d[0]),h[0]=parseInt(h[0],10)||0,1===h.length&&(h[1]=h[0]),h[1]=parseInt(h[1],10)||0,"right"===o.at[0]?l.left+=s:o.at[0]===n&&(l.left+=s/2),"bottom"===o.at[1]?l.top+=a:o.at[1]===n&&(l.top+=a/2),l.left+=h[0],l.top+=h[1],this.each(function(){var t,i=e(this),r=i.outerWidth(),c=i.outerHeight(),u=parseInt(e.curCSS(this,"marginLeft",!0))||0,p=parseInt(e.curCSS(this,"marginTop",!0))||0,f=r+u+parseInt(e.curCSS(this,"marginRight",!0))||0,m=c+p+parseInt(e.curCSS(this,"marginBottom",!0))||0,g=e.extend({},l);"right"===o.my[0]?g.left-=r:o.my[0]===n&&(g.left-=r/2),"bottom"===o.my[1]?g.top-=c:o.my[1]===n&&(g.top-=c/2),g.left=Math.round(g.left),g.top=Math.round(g.top),t={left:g.left-u,top:g.top-p},e.each(["left","top"],function(i,n){e.ui.position[d[i]]&&e.ui.position[d[i]][n](g,{targetWidth:s,targetHeight:a,elemWidth:r,elemHeight:c,collisionPosition:t,collisionWidth:f,collisionHeight:m,offset:h,my:o.my,at:o.at})}),e.fn.bgiframe&&i.bgiframe(),i.offset(e.extend(g,{using:o.using}))})},e.ui.position={fit:{left:function(t,i){var n=e(window),r=i.collisionPosition.left+i.collisionWidth-n.width()-n.scrollLeft();t.left=r>0?t.left-r:Math.max(t.left-i.collisionPosition.left,t.left)},top:function(t,i){var n=e(window),r=i.collisionPosition.top+i.collisionHeight-n.height()-n.scrollTop();t.top=r>0?t.top-r:Math.max(t.top-i.collisionPosition.top,t.top)}},flip:{left:function(t,i){if(i.at[0]!==n){var r=e(window),o=i.collisionPosition.left+i.collisionWidth-r.width()-r.scrollLeft(),s="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,a="left"===i.at[0]?i.targetWidth:-i.targetWidth,l=-2*i.offset[0];t.left+=i.collisionPosition.left<0?s+a+l:o>0?s+a+l:0}},top:function(t,i){if(i.at[1]!==n){var r=e(window),o=i.collisionPosition.top+i.collisionHeight-r.height()-r.scrollTop(),s="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,a="top"===i.at[1]?i.targetHeight:-i.targetHeight,l=-2*i.offset[1];t.top+=i.collisionPosition.top<0?s+a+l:o>0?s+a+l:0}}}},e.offset.setOffset||(e.offset.setOffset=function(t,i){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var n=e(t),r=n.offset(),o=parseInt(e.curCSS(t,"top",!0),10)||0,s=parseInt(e.curCSS(t,"left",!0),10)||0,a={top:i.top-r.top+o,left:i.left-r.left+s};"using"in i?i.using.call(t,a):n.css(a)},e.fn.offset=function(t){var i=this[0];return i&&i.ownerDocument?t?this.each(function(){e.offset.setOffset(this,t)}):o.call(this):null})}(jQuery),define("jquery-plugins/jquery.ui.position",function(){}),define("components/header",["jquery","underscore","aui","feedback","data/base-url","data/current-repo","data/current-user","components/invite-dialog","components/one-million-dialog","repo/history","utils/api-helper","utils/exists","utils/event-tracking-helper","utils/gaq-push","utils/invite-helper","utils/mustache","jquery-plugins/jquery.ui.autocomplete","jquery-plugins/jquery.ui.position"],function(e,t,i,n,r,o,s,a,l,c,u,d,h,p,f,m){function g(t){var i=e("#teams-dropdown"),n=e("#inbox-unread-count"),o=e("#teams-dropdown-trigger");o.length||(o=e("#user-dropdown-trigger")),o.one("mouseover",function(){t.teams.length&&i.html(m.toHtml("team-dropdown-template",{teams:t.teams})).removeClass("hidden")});var s=e("#plan-upgrade").length;if(t.global_too_many_users.length&&!s){var a=t.global_too_many_users[0],l=gettext('It\'s time for <strong>%(username)s</strong> to upgrade to the next user level &mdash; committers currently have read-only access. <a href="%(upgrade_url)s">Upgrade or manage users</a>.');b.addClass("has-message"),b.find(".message").html(interpolate(l,{username:a,upgrade_url:"{}/account/user/{!esc}/plan-upgrade/".format(r,a)},!0))}n.text("("+t.unread_notifications+")")}var v=h("Page Header");d("#repo-dropdown-recent",function(t){c.fetch().done(function(i){e("#repositories-dropdown-trigger").one("mouseover",function(){i.hasRepositories&&t.replaceWith(m.toHtml("repo-dropdown-template",i))})})}),e("#repo-create-cta").tooltip().on("click",function(){v("Create Repo CTA Clicked")}),d("#search-query",function(t){var i=t.autocomplete({minLength:3,source:"/xhr/repos",extractTerms:function(e){var t=e.indexOf("/");return t>=0?[e.substr(0,t),e.substr(t+1)]:[e]},select:function(e,t){var i=t.item.value;window.location.href=i,v("QuickSearch Result Clicked",i)},focus:function(e){e.preventDefault()}});t.bind("autocompleteopen",function(t){var n=i.autocomplete("widget");v("QuickSearch Query",e(t.target).val()),n.find("img").each(function(t,i){e(i).addClass("repo-avatar size16")})})}),d("#general-invite-dropdown",function(){var t,i,n=e(m.toHtml("general-invite-template")),r=function(e,i,n){f.general.send(e,{complete:n.complete,success:function(e,i,r){p(["atl._trackEvent","Share","General invite user",t]),l().show(),n.success(e,i,r)},error:n.error})};e(document).on("click",".general-invite-link",function(o){o.preventDefault(),t=e(o.target).parent(".invite-users-box").length>0?"dashboard":"nav-link",i||(i=a(n,"invitation-dialog",r)),i.show()})});var b=e("#account-warning");return n("#give-feedback"),e("#sign-up-link").on("click",function(){p(["atl._trackEvent","Signup","Header"])}),s.isAuthenticated?(e("#header").on("click",".app-switcher-trigger",function(t){e(t.target).hasClass("active")&&v("App Switcher - Displayed")}),e("#app-switcher").on("click",".nav-link a",function(){v("App Switcher - App Link Clicked")}),e("#ondemand-trial").on("click",function(){v("App Switcher - Free Trial Clicked")}),e("#ondemand-learn-more").on("click",function(){v("App Switcher - Learn More Clicked")}),e("#logo").on("click",function(){v("Bitbucket Logo Clicked")}),e("#teams-dropdown-trigger").on("click",function(t){e(t.target).hasClass("active")&&v("Teams Dropdown - Displayed")}),e("#create-team-blank-slate").on("click",function(){v("Teams Dropdown - Create Clicked","No teams")}),e("#create-team-link").on("click",function(){v("Teams Dropdown - Create Clicked","Has teams")}),e("#teams-dropdown").on("click"," a.team-link",function(){v("Teams Dropdown - Team Clicked")}),e("#repositories-dropdown-trigger").on("click",function(t){e(t.target).hasClass("active")&&v("Repo Dropdown - Displayed")}),e("#create-repo-link").on("click",function(){v("Repo Dropdown - Create Clicked")}),e("#import-repo-link").on("click",function(){v("Repo Dropdown - Import Clicked")}),e("#repo-dropdown").on("click","a.repo-link",function(t){v("Repo Dropdown - Repo Clicked",e(t.target).hasClass("recently-viewed")?"Recently Viewed":"Recently Updated")}),e("#header-pastes-link").on("click",function(){v("Pastes Clicked")}),e("#paste-create-cta").on("click",function(){v("Create Paste CTA Clicked")}),e("#help-dropdown-trigger").on("click",function(t){e(t.target).hasClass("active")&&v("Help Dropdown - Displayed")}),e("#header-help-dropdown").on("click","a",function(t){v("Help Dropdown - Link Clicked",e(t.target).text().trim())}),e("#user-dropdown-trigger").on("click",function(t){e(t.target).hasClass("active")&&v("Account Dropdown - Displayed")}),e("#user-dropdown").on("click","a",function(t){var i=e(t.target).closest("a").text().replace(/\(.*\)/,"").trim();v("Account Dropdown - Link Clicked",i)}),e("#dashboard-dropdown-trigger").on("click",function(t){e(t.target).hasClass("active")&&v("Dashboard Dropdown - Displayed")}),e("#dashboard-overview-link").on("click",function(){v("Dashboard Dropdown - Repositories Clicked")}),e("#dashboard-prs-link").on("click",function(){v("Dashboard Dropdown - Pull Requests Clicked")}),e("#dashboard-issues-link").on("click",function(){v("Dashboard Dropdown - Issues Clicked")}),e.ajax({cache:!1,type:"GET",url:"/account/xhr/header_information/",dataType:"json",success:g,error:function(){},complete:function(){b.hasClass("has-message")&&b.slideDown(200,function(){var e=i.sidebar(".aui-sidebar");e.$el.length&&e.reflow()})}})):(new e.Deferred).reject(new Error("User not authenticated"))}),define("components/follow",["aui","jquery","utils/gaq-push","utils/mustache"],function(e,t,i,n){var r=function(e,i){var r=e.find(".text"),o=e.attr("href"),s=e.data("follow-text")||gettext("Follow"),a=e.data("unfollow-text")||gettext("Following"),l=e.data("template");if(r.length||(r=e),l){var c=t(n.toHtml(l,{isFollowing:i,url:o}));return e.replaceWith(c),c}return i?(e.addClass("following"),r.text(a)):(e.removeClass("following"),r.text(s)),e};t(document).on("toggle-follow","a.follow, button.follow",function(e,i){var n=t(e.target).closest("a.follow,button.follow");n=r(n,i.isNowFollowing),n.trigger("follow:"+i.type,i.isNowFollowing)}),t(document).on("click","a.follow,button.follow",function(e){e.preventDefault();var n=t(e.target).closest("a.follow,button.follow"),o=n.attr("href")||n.data("url"),s=n.data("restful"),a=n.hasClass("following"),l="POST";n.attr("aria-disabled",!0),n=r(n,!a),s&&(l=a?"DELETE":"POST"),t.ajax({url:o,type:l,dataType:"json",success:function(e){var t=void 0===e.following?e.is_watching:e.following,r=e.type;if(void 0===t)return window.location.pathname=o;var s={repo:["atl._trackEvent","Share","Follow Repo"],user:["atl._trackEvent","Share","Follow User"],pullrequest:["atl._trackEvent","Notifications","Watch Pull Request"],issue:["atl._trackEvent","Notifications","Watch Issue"],commit:["atl._trackEvent","Notifications","Watch Commit"]};n.trigger("follow:"+r,t),t&&i(["atl._trackPageview","/"+r+"/follow"],s[r])},error:function(){r(n)},complete:function(){n.removeAttr("aria-disabled")}})})}),define("components/follow-list",["jquery","on-ready","components/follow"],function(e,t){return t(function(){var t=e(".pullrequest-list, .issues-list, .repo-list");t.on("click","a.follow",function(t){var i,n=e(t.target),r=n.closest(".iterable-item").find(".title, .text").text(),o=/#(\d+):/.exec(r),s=o?o[1]:null,a=!n.hasClass("following"),l=n.data("type"),c=s?l+" #"+s:"this "+l;a?(i=gettext("You are now watching %(item)s."),AJS.messages.info({body:interpolate(i,{item:c},!0)})):(i=gettext("You are no longer watching %(item)s."),AJS.messages.info({body:interpolate(i,{item:c},!0)}))})})}),define("components/footer",["aui","jquery","utils/exists"],function(e,t,i){i("#footer",function(){e.InlineDialog(t("#meta-info"),"metaInfo",function(e,i,n){return e.css({padding:"20px",width:"150px"}).html(t("#meta-info-content").html()),n(),!1},{onTop:!0}),t(".footer-body a").tooltip({aria:!0,gravity:"s",delayIn:200})})}),function(e){var t,i,n="0.4.2",r="hasOwnProperty",o=/[\.\/]/,s="*",a=function(){},l=function(e,t){return e-t},c={n:{}},u=function(e,n){e=String(e);var r,o=i,s=Array.prototype.slice.call(arguments,2),a=u.listeners(e),c=0,d=[],h={},p=[],f=t;t=e,i=0;for(var m=0,g=a.length;g>m;m++)"zIndex"in a[m]&&(d.push(a[m].zIndex),a[m].zIndex<0&&(h[a[m].zIndex]=a[m]));for(d.sort(l);d[c]<0;)if(r=h[d[c++]],p.push(r.apply(n,s)),i)return i=o,p;for(m=0;g>m;m++)if(r=a[m],"zIndex"in r)if(r.zIndex==d[c]){if(p.push(r.apply(n,s)),i)break;do if(c++,r=h[d[c]],r&&p.push(r.apply(n,s)),i)break;while(r)}else h[r.zIndex]=r;else if(p.push(r.apply(n,s)),i)break;return i=o,t=f,p.length?p:null};u._events=c,u.listeners=function(e){var t,i,n,r,a,l,u,d,h=e.split(o),p=c,f=[p],m=[];for(r=0,a=h.length;a>r;r++){for(d=[],l=0,u=f.length;u>l;l++)for(p=f[l].n,i=[p[h[r]],p[s]],n=2;n--;)t=i[n],t&&(d.push(t),m=m.concat(t.f||[]));f=d}return m},u.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var i=e.split(o),n=c,r=0,s=i.length;s>r;r++)n=n.n,n=n.hasOwnProperty(i[r])&&n[i[r]]||(n[i[r]]={n:{}});for(n.f=n.f||[],r=0,s=n.f.length;s>r;r++)if(n.f[r]==t)return a;return n.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},u.f=function(e){var t=[].slice.call(arguments,1);return function(){u.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},u.stop=function(){i=1},u.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},u.nts=function(){return t.split(o)},u.off=u.unbind=function(e,t){if(!e)return u._events=c={n:{}},void 0;var i,n,a,l,d,h,p,f=e.split(o),m=[c];for(l=0,d=f.length;d>l;l++)for(h=0;h<m.length;h+=a.length-2){if(a=[h,1],i=m[h].n,f[l]!=s)i[f[l]]&&a.push(i[f[l]]);else for(n in i)i[r](n)&&a.push(i[n]);m.splice.apply(m,a)}for(l=0,d=m.length;d>l;l++)for(i=m[l];i.n;){if(t){if(i.f){for(h=0,p=i.f.length;p>h;h++)if(i.f[h]==t){i.f.splice(h,1);break}!i.f.length&&delete i.f}for(n in i.n)if(i.n[r](n)&&i.n[n].f){var g=i.n[n].f;for(h=0,p=g.length;p>h;h++)if(g[h]==t){g.splice(h,1);break}!g.length&&delete i.n[n].f}}else{delete i.f;for(n in i.n)i.n[r](n)&&i.n[n].f&&delete i.n[n].f}i=i.n}},u.once=function(e,t){var i=function(){return u.unbind(e,i),t.apply(this,arguments)};return u.on(e,i)},u.version=n,u.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=u:"undefined"!=typeof define?define("eve",[],function(){return u}):e.eve=u}(this);var fdSlider=function(){function e(e){function t(e){e=!!e,e!=Jt&&(Jt=e,R(q()))}function i(e){if(!ot||e){try{X(tt,-1),m(tt,"focus",p),m(tt,"blur",_),c?m(tt,"keypress",k):(m(tt,"keydown",k),m(tt,"keypress",x)),m(Y,"mouseover",C),m(Y,"mouseout",S),m(Y,"mousedown",$),m(Y,"touchstart",$),n&&(window.addEventListener&&!window.devicePixelRatio?window.removeEventListener("DOMMouseScroll",w,!1):(m(document,"mousewheel",w),m(window,"mousewheel",w)))}catch(t){}y(Z,"fd-slider-focused"),y(Z,"fd-slider-active"),b(Z,"fd-slider-disabled"),Y.setAttribute("aria-disabled",!0),rt.disabled=ot=!0,clearTimeout(It),e||h("disable")}}function l(e){(ot||e)&&(X(tt,0),f(tt,"focus",p),f(tt,"blur",_),c?f(tt,"keypress",k):(f(tt,"keydown",k),f(tt,"keypress",x)),f(Y,"touchstart",$),f(Y,"mousedown",$),f(Y,"mouseover",C),f(Y,"mouseout",S),y(Z,"fd-slider-disabled"),Y.setAttribute("aria-disabled",!1),rt.disabled=ot=Gt=!1,e||h("enable"))}function u(){clearTimeout(It),et=nt=tt=Y=Z=It=null,h("destroy"),_t=null}function d(){A();try{var e=Y.offsetWidth,t=Y.offsetHeight,i=tt.offsetWidth,n=tt.offsetHeight,r=(nt.offsetHeight,nt.offsetWidth,yt?t-n:e-i);Vt=r/mt,Wt=Math.max(gt?W(F(ct)):Math.abs((ct-at)/ht)*Vt,0),Ft=Math.min(gt?W(F(ut)):Math.abs((ut-at)/ht)*Vt,Math.floor(yt?t-n:e-i)),Mt=e,jt=t,R(St?q():"select"==st?rt.selectedIndex:parseFloat(rt.value),!1)}catch(o){}h("redraw")}function h(e){if(xt){if(e.match(/^(blur|focus|change)$/i)){var t;if("undefined"!=typeof document.createEventObject)try{t=document.createEventObject(),rt.fireEvent("on"+e.toLowerCase(),t)}catch(i){}else"undefined"!=typeof document.createEvent&&(t=document.createEvent("HTMLEvents"),t.initEvent(e,!0,!0),rt.dispatchEvent(t))}}else if(_t.hasOwnProperty(e))for(var n,r={userSet:Jt,disabled:ot,elem:rt,value:"select"==st?rt.options[rt.selectedIndex].value:rt.value},o=0;n=_t[e][o];o++)n.call(rt,r)}function p(){return b(Z,"fd-slider-focused"),s.onfocus&&(Jt=!0,R(q())),n&&(f(window,"DOMMouseScroll",w),f(document,"mousewheel",w),c||f(window,"mousewheel",w)),h("focus"),!0}function _(){y(Z,"fd-slider-focused"),n&&(m(document,"mousewheel",w),m(window,"DOMMouseScroll",w),c||m(window,"mousewheel",w)),At=!0,h("blur")}function w(e){if(At){e=e||window.event;var t,i=0;e.wheelDelta?(i=e.wheelDelta/120,c&&window.opera.version()<9.2&&(i=-i)):e.detail&&(i=-e.detail/3),yt&&(i=-i),i&&(t=q(),t+=0>i?-ht:ht,Jt=!0,R(L(t))),v(e)}}function x(e){return e=e||window.event,e.keyCode>=33&&e.keyCode<=40||!At||45==e.keyCode||46==e.keyCode?g(e):!0}function k(e){if(!At)return!0;e=e||window.event;var t,i=null!==e.keyCode?e.keyCode:e.charCode;return 33>i||i>40&&45!=i&&46!=i?!0:(t=q(),37==i||40==i||46==i||34==i?t-=e.ctrlKey||34==i?+pt:+ht:39==i||38==i||45==i||33==i?t+=e.ctrlKey||33==i?+pt:+ht:35==i?t=ut:36==i&&(t=ct),Jt=!0,R(L(t)),h("update"),v(e),void 0)}function C(){b(Z,"fd-slider-hover")}function S(){y(Z,"fd-slider-hover")}function $(e){e=e||window.event,v(e);var t;if(e.target?t=e.target:e.srcElement&&(t=e.srcElement),t&&3==t.nodeType&&(t=t.parentNode),e.touches){if(e.targetTouches&&1!=e.targetTouches.length)return!1;e=e.touches[0],Gt=!0}if(clearTimeout(It),It=null,At=!1,Jt=!0,-1!=t.className.search("fd-slider-handle"))Bt=yt?e.clientY:e.clientX,Ht=parseInt(yt?tt.offsetTop:tt.offsetLeft)||0,D(e),Gt?(f(document,"touchmove",D),f(document,"touchend",E),m(Y,"mousedown",$)):(f(document,"mousemove",D),f(document,"mouseup",E)),b(Z,"fd-slider-active"),b(document.body,"fd-slider-drag-"+(yt?"vertical":"horizontal")),h("dragstart");else{A();var i=0;e.pageX||e.pageY?i=yt?e.pageY:e.pageX:(e.clientX||e.clientY)&&(i=yt?e.clientY+document.body.scrollTop+document.documentElement.scrollTop:e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),i-=yt?Nt+Math.round(tt.offsetHeight/2):zt+Math.round(tt.offsetWidth/2),i=z(i),"tween"==bt?(b(Z,"fd-slider-active"),M(i)):"timed"==bt?(b(Z,"fd-slider-active"),f(document,Gt?"touchend":"mouseup",T),Ut=i,j()):O(i)}return!1}function T(e){return e=e||window.event,v(e),m(document,Gt?"touchend":"mouseup",T),y(Z,"fd-slider-active"),clearTimeout(It),It=null,At=!0,!1}function E(e){return e=e||window.event,v(e),Gt?(m(document,"touchmove",D),m(document,"touchend",E)):(m(document,"mousemove",D),m(document,"mouseup",E)),At=!0,y(document.body,"fd-slider-drag-"+(yt?"vertical":"horizontal")),y(Z,"fd-slider-active"),h("dragend"),!1}function D(e){if(e=e||window.event,v(e),e.touches){if(e.targetTouches&&1!=e.targetTouches.length)return!1;e=e.touches[0]}return O(z(Ht+(yt?e.clientY-Bt:e.clientX-Bt))),!1}function I(e){var t=q();Jt=!0,t+=e*ht,R(L(t))}function A(){var e=0,t=0,i=Y;try{for(;i.offsetParent;)e+=i.offsetLeft,t+=i.offsetTop,i=i.offsetParent}catch(n){}zt=e,Nt=t}function j(){var e=parseInt(yt?tt.offsetTop:tt.offsetLeft,10);e=Math.round(e>Ut?Math.max(Ut,Math.floor(e-Vt)):Math.min(Ut,Math.ceil(e+Vt))),O(z(e)),e!=Ut?It=setTimeout(j,mt>20?50:100):(At=!0,y(Z,"fd-slider-active"),h("finalise"))}function M(e){At=!1,Pt=parseInt(e,10),qt=parseInt(yt?tt.offsetTop:tt.offsetLeft,10),Lt=Pt-qt,Ot=20,Rt=0,It||(It=setTimeout(Kt,20))}function P(e){return isNaN(e)||""===e||"undefined"==typeof e?(Jt=!1,kt):e<Math.min(ct,ut)?(Jt=!1,Math.min(ct,ut)):e>Math.max(ct,ut)?(Jt=!1,Math.max(ct,ut)):(Jt=!0,e)}function q(){return L("input"==st?parseFloat(rt.value):rt.selectedIndex)}function L(e){return isNaN(e)||""===e||"undefined"==typeof e?kt:Math.min(Math.max(e,Math.min(ct,ut)),Math.max(ct,ut))}function O(e){var t=L(gt?N(H(e)):yt?lt-Math.round(e/Vt)*ht:at+Math.round(e/Vt)*ht);tt.style[yt?"top":"left"]=(e||0)+"px",V(),U("select"==st||1==ht?Math.round(t):t)}function R(e,t){var i,n=!1;"undefined"!=typeof e&&!isNaN(e)&&""!==e||"input"!=st||St?i=P(e):(i=kt,n=!0,Jt=!1),tt.style[yt?"top":"left"]=(gt?W(F(i)):yt?Math.round((lt-i)/ht*Vt):Math.round((i-at)/ht*Vt))+"px",V(),typeof t!==!1&&U(n?"":i)}function z(e){if(gt)return Math.max(Math.min(Ft,e),Wt);var t=e%Vt;return t&&t>=Vt/2?e+=Vt-t:e-=t,e<Math.min(Math.abs(Wt),Math.abs(Ft))?e=Math.min(Math.abs(Wt),Math.abs(Ft)):e>Math.max(Math.abs(Wt),Math.abs(Ft))&&(e=Math.max(Math.abs(Wt),Math.abs(Ft))),Math.min(Math.max(e,0),Ft)}function N(e){var t,i=0,n=at;for(var r in gt)gt.hasOwnProperty(r)&&(e>=i&&+r>=e&&(t=n+(e-i)*(+gt[r]-n)/(+r-i)),i=+r,n=+gt[r]);return t}function F(e){var t=0,i=at,n=0;for(var r in gt)gt.hasOwnProperty(r)&&(e>=i&&e<=+gt[r]&&(n=t+(e-i)*(+r-t)/(+gt[r]-i)),t=+r,i=+gt[r]);return n}function W(e){return(Y[yt?"offsetHeight":"offsetWidth"]-tt[yt?"offsetHeight":"offsetWidth"])/100*e}function H(e){return e/((Y[yt?"offsetHeight":"offsetWidth"]-Y[tt?"offsetHeight":"offsetWidth"])/100)}function U(e){if(h("update"),Jt?y(Z,"fd-slider-no-value"):b(Z,"fd-slider-no-value"),"select"==st)try{if(e=parseInt(e,10),rt.selectedIndex===e)return G(),void 0;rt.options[e].selected=!0}catch(t){}else{if(""===e||Dt||(e=(at+Math.round((e-at)/ht)*ht).toFixed(ft)),rt.value===e)return G(),void 0;rt.value=e}G(),h("change")}function B(e,t){ct>ut?(e=Math.min(at,Math.max(e,t)),t=Math.max(lt,Math.min(e,t)),ct=Math.max(e,t),ut=Math.min(e,t)):(e=Math.max(at,Math.min(e,t)),t=Math.min(lt,Math.max(e,t)),ct=Math.min(e,t),ut=Math.max(e,t)),kt<Math.min(ct,ut)?kt=Math.min(ct,ut):kt>Math.max(ct,ut)&&(kt=Math.max(ct,ut)),tt.setAttribute("aria-valuemin",ct),tt.setAttribute("aria-valuemax",ut),P("input"==st?parseFloat(rt.value):rt.selectedIndex),d()}function V(){a||(yt?it.style.height=Math.max(1,nt.offsetHeight-tt.offsetTop)+"px":it.style.width=Math.max(1,tt.offsetLeft)+"px")}function J(){for(var e,t=!1,i=document.getElementsByTagName("label"),n=0;e=i[n];n++)if(e.htmlFor&&e.htmlFor==rt.id||e.getAttribute("for")==rt.id){t=e;break}return t&&!t.id&&(t.id=rt.id+"_label"),t}function G(){var e="select"==st?rt.options[rt.selectedIndex].value:rt.value,t=Tt?Tt(e):"select"==st?rt.options[rt.selectedIndex].text?rt.options[rt.selectedIndex].text:e:e;tt.setAttribute("aria-valuenow",e),tt.setAttribute("aria-valuetext",t)}function K(){Jt=!0,Dt=Et,R("input"==st?parseFloat(rt.value):rt.selectedIndex),G(),Dt=!1}function Q(){"input"==st?rt.value=rt.defaultValue:rt.selectedIndex=Ct,P("select"==st?rt.options[rt.selectedIndex].value:rt.value),d(),G()}function t(e){Jt=!!e}function X(e,t){e.setAttribute("tabIndex",t),e.tabIndex=t}var Y,Z,et,tt,it,nt,rt=e.inp,ot=!1,st=rt.tagName.toLowerCase(),at=+e.min,lt=+e.max,ct=+e.min,ut=+e.max,dt=Math.abs(lt-at),ht="select"==st?1:+e.step,pt=e.maxStep?+e.maxStep:2*ht,ft=e.precision||0,mt=Math.ceil(dt/ht),gt=e.scale||!1,vt=!!e.hideInput,bt=e.animation||"",yt=!!e.vertical,_t=e.callbacks||{},wt=e.classNames||"",xt=!!e.html5Shim,kt=at>lt?at:at+(lt-at)/2,Ct="select"==st?rt.selectedIndex:rt.defaultValue||kt,St=xt||!!e.forceValue,$t=xt&&yt&&"inpHeight"in e?e.inpHeight:!1,Tt=!xt&&e.ariaFormat?e.ariaFormat:!1,Et=!xt&&"select"!=st&&"userSnap"in e?!!e.userSnap:!1,Dt=!1,It=null,At=!0,jt=("select"==st?rt.selectedIndex:rt.value,0),Mt=0,Pt=0,qt=0,Lt=0,Ot=0,Rt=0,zt=0,Nt=0,Ft=0,Wt=0,Ht=0,Ut=0,Bt=0,Vt=0,Jt=!1,Gt=!1;"input"==st&&St&&!rt.defaultValue&&(rt.defaultValue=q()),at>lt&&(ht=-Math.abs(ht),pt=-Math.abs(pt)),gt&&(gt[100]=lt);var Kt=function(){Rt++;var e=Lt,t=20,i=Rt,n=qt,r=Math.ceil(i==t?n+e:e*(-Math.pow(2,-10*i/t)+1)+n);O(i==t?Pt:r),i!=t?(h("move"),It=setTimeout(Kt,20)):(clearTimeout(It),It=null,At=!0,y(Z,"fd-slider-focused"),y(Z,"fd-slider-active"),h("finalise"))};return function(){xt||vt?b(rt,"fd-form-element-hidden"):f(rt,"change",K),xt&&(rt.stepUp=function(e){I(e||1)},rt.stepDown=function(e){I(e||-1)}),Y=document.createElement("span"),Y.className="fd-slider"+(yt?"-vertical ":" ")+wt,Y.id="fd-slider-"+rt.id,yt&&$t&&(Y.style.height=$t+"px"),Z=document.createElement("span"),Z.className="fd-slider-wrapper"+(xt?"":" fd-slider-no-value"),et=document.createElement("span"),et.className="fd-slider-inner",nt=document.createElement("span"),nt.className="fd-slider-bar",r?tt=document.createElement("span"):(tt=document.createElement("a"),tt.setAttribute("href","#"),f(tt,"click",g)),X(tt,0),tt.className="fd-slider-handle",tt.appendChild(document.createTextNode(String.fromCharCode(160))),Z.appendChild(et),a||(it=document.createElement("span"),it.className="fd-slider-range",Z.appendChild(it)),Z.appendChild(nt),Z.appendChild(tt),Y.appendChild(Z),rt.parentNode.insertBefore(Y,rt),c&&(tt.unselectable="on",nt.unselectable="on",et.unselectable="on",Y.unselectable="on",Z.unselectable="on",a||(it.unselectable="on")),Y.setAttribute("role","application"),tt.setAttribute("role","slider"),tt.setAttribute("aria-valuemin","select"==st?rt.options[0].value:at),tt.setAttribute("aria-valuemax","select"==st?rt.options[rt.options.length-1].value:lt);var e=J();e&&(tt.setAttribute("aria-labelledby",e.id),tt.id="fd-slider-handle-"+rt.id,e.setAttribute("for",tt.id)),document.getElementById(o)&&tt.setAttribute("aria-describedby",o),1==rt.getAttribute("disabled")?i(!0):l(!0),s.onvalue&&(Jt=!0,P("input"==st?parseFloat(rt.value):rt.selectedIndex)),rt.form&&f(rt.form,"reset",Q),G(),h("create"),d()}(),{onResize:function(){(Y.offsetHeight!=jt||Y.offsetWidth!=Mt)&&d()},destroy:function(){u()},reset:function(){R("input"==st?parseFloat(rt.value):rt.selectedIndex)},stepUp:function(e){I(Math.abs(e)||1)},stepDown:function(e){I(-Math.abs(e)||-1)},increment:function(e){I(e)},disable:function(){i()},enable:function(){l()},setRange:function(e,t){B(e,t)},getValueSet:function(){return!!Jt},setValueSet:function(e){t(e)},checkValue:function(){s.onvalue&&(Jt=!0,P("input"==st?parseFloat(rt.value):rt.selectedIndex)),G(),d()}}}var t={},i=0,n=!0,r=!0,o="fd-slider-describedby",s={onfocus:!0,onvalue:!0},a=!1,l="jump",c="[object Opera]"===Object.prototype.toString.call(window.opera),u=/^([\-]{0,1}[0-9]+(\.[0-9]+){0,1})$/,d=/^([0-9]+(\.[0-9]+){0,1})$/,h=function(e){if("string"!=typeof e||""===e)return{};
try{if("object"==typeof JSON&&"function"==typeof JSON.parse)return JSON.parse(e);if(/mousewheelenabled|fullaria|describedby|norangebar|html5animation|varsetrules/.test(e.toLowerCase())){var t=Function(["var document,top,self,window,parent,Number,Date,Object,Function,","Array,String,Math,RegExp,Image,ActiveXObject;","return (",e.replace(/<\!--.+-->/gim,"").replace(/\bfunction\b/g,"function-"),");"].join(""));return t()}}catch(i){}return{err:"Could not parse the JSON object"}},p=function(e){if("object"==typeof e)for(var t in e)switch(value=e[t],t.toLowerCase()){case"mousewheelenabled":n=!!value;break;case"fullaria":r=!!value;break;case"describedby":o=String(value);break;case"norangebar":a=!!value;break;case"html5animation":l=-1!=String(value).search(/^(jump|tween|timed)$/i)?String(value).toLowerCase():"jump";break;case"varsetrules":"onfocus"in value&&(s.onfocus=!!value.onfocus),"onvalue"in value&&(s.onvalue=!!value.onvalue)}},f=function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i,!0)},m=function(e,t,i){try{e.detachEvent?e.detachEvent("on"+t,i):e.removeEventListener(t,i,!0)}catch(n){}},g=function(e){return e=e||window.event,e.stopPropagation&&(e.stopPropagation(),e.preventDefault()),!1},v=function(e){return e=e||window.event,e.preventDefault?(e.preventDefault(),void 0):(e.returnValue=!1,void 0)},b=function(e,t){new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)||(e.className+=(e.className?" ":"")+t)},y=function(e,t){e.className=t?e.className.replace(new RegExp("(^|\\s)"+t+"(\\s|$)")," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""):""},_=function(){var e={};for(var i in t)e[i]=t[i].getValueSet();return e},w=function(e,i){t[e].setValueSet(!!i)},x=function(e){return!!(e in t&&t.hasOwnProperty(e))},k=function(i){if(!i||!i.inp||!i.inp.tagName||-1==i.inp.tagName.search(/^input|select/i))return!1;if(i.html5Shim=!1,"select"==i.inp.tagName.toLowerCase()){if(i.inp.options.length<2)return!1;i.min=0,i.max=i.inp.options.length-1,i.step=1,i.precision=0,i.scale=!1,i.forceValue=!0}else{if(-1==String(i.inp.type).search(/^(text|range)$/i))return!1;i.min=i.min&&-1!=String(i.min).search(u)?+i.min:0,i.max=i.max&&-1!=String(i.max).search(u)?+i.max:100,i.step=i.step&&-1!=String(i.step).search(d)?i.step:1,i.precision=i.precision&&-1!=String(i.precision).search(/^[0-9]+$/)?i.precision:-1!=String(i.step).search(/\.([0-9]+)$/)?String(i.step).match(/\.([0-9]+)$/)[1].length:0,i.scale=i.scale||!1,i.forceValue="forceValue"in i?!!i.forceValue:!1,i.userSnap="userSnap"in i?!!i.userSnap:!1}return i.ariaFormat="ariaFormat"in i&&"function"==typeof i.ariaFormat?i.ariaFormat:!1,i.maxStep=i.maxStep&&-1!=String(i.maxStep).search(d)?+i.maxStep:2*+i.step,i.classNames=i.classNames||"",i.callbacks=i.callbacks||!1,$(i.inp.id),t[i.inp.id]=new e(i),!0},C=function(e,t){return e.getAttribute(t)||""},S=function(){for(var n,r,o=document.getElementsByTagName("input"),s=0;r=o[s];s++)if("input"==r.tagName.toLowerCase()&&"text"==r.type.toLowerCase()&&(C(r,"min")&&-1!=C(r,"min").search(u)||C(r,"max")&&-1!=C(r,"max").search(u)||C(r,"step")&&-1!=C(r,"step").search(/^(any|([0-9]+(\.[0-9]+){0,1}))$/i))){if(r.id&&document.getElementById("fd-slider-"+r.id))continue;r.id&&!document.getElementById("fd-slider-"+r.id)&&$(r.id),r.id||(r.id="fd-slider-form-elem-"+i++),n={inp:r,callbacks:[],animation:l,vertical:C(r,"data-fd-slider-vertical")?!0:r.offsetHeight>r.offsetWidth,classNames:C(r,"data-fd-slider-vertical"),html5Shim:!0},n.vertical&&!C(r,"data-fd-slider-vertical")&&(n.inpHeight=r.offsetHeight),n.min=C(r,"min")||0,n.max=C(r,"max")||100,n.step=-1!=C(r,"step").search(/^any$/i)?n.max-n.min:-1!=C(r,"step").search(d)?r.getAttribute("step"):1,n.precision=-1!=String(n.step).search(/\.([0-9]+)$/)?String(n.step).match(/\.([0-9]+)$/)[1].length:0,n.maxStep=2*n.step,$(n.inp.id),t[n.inp.id]=new e(n)}return!0},$=function(e){return e in t&&t.hasOwnProperty(e)?(t[e].destroy(),delete t[e],!0):!1},T=function(){for(var e in t)t.hasOwnProperty(e)&&t[e].destroy();t=[]},E=function(){T(),t=null},D=function(){for(var e in t)t.hasOwnProperty(e)&&t[e].onResize()},I=function(){A(),S()},A=function(){m(window,"load",S)};return f(window,"load",S),f(window,"load",function(){setTimeout(function(){var e;for(e in t)t[e].checkValue()},0)}),f(window,"resize",D),f(window,"unload",E),function(){var e=document.getElementsByTagName("script"),t=String(e[e.length-1].innerHTML).replace(/[\n\r\s\t]+/g," ").replace(/^\s+/,"").replace(/\s+$/,""),i=h(t);"object"!=typeof i||"err"in i||p(i)}(),{rescanDocument:S,createSlider:function(e){return k(e)},onDomReady:function(){I()},destroyAll:function(){T()},destroySlider:function(e){return $(e)},redrawAll:function(){D()},addEvent:f,removeEvent:m,stopEvent:g,increment:function(e,i){return x(e)?(t[e].increment(i),void 0):!1},stepUp:function(e,i){return x(e)?(t[e].stepUp(Math.abs(i)||1),void 0):!1},stepDown:function(e,i){return x(e)?(t[e].stepDown(-Math.abs(i)||-1),void 0):!1},setRange:function(e,i,n){return x(e)?(t[e].setRange(i,n),void 0):!1},updateSlider:function(e){return x(e)?(t[e].onResize(),t[e].reset(),void 0):!1},disable:function(e){return x(e)?(t[e].disable(),void 0):!1},enable:function(e){return x(e)?(t[e].enable(),void 0):!1},getValueSet:function(){return _()},setValueSet:function(e,t){return x(id)?(w(e,t),void 0):!1},setGlobalVariables:function(e){p(e)},removeOnload:function(){A()}}}();define("fd-slider",function(e){return function(){var t;return t||e.fdSlider}}(this)),function(e,t){var i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(n){function r(){var t=e(d),i=e(h);a&&(h.length?a.reject(c,t,i):a.resolve(c)),e.isFunction(n)&&n.call(s,c,t,i)}function o(t,n){t.src!==i&&-1===e.inArray(t,u)&&(u.push(t),n?h.push(t):d.push(t),e.data(t,"imagesLoaded",{isBroken:n,src:t.src}),l&&a.notifyWith(e(t),[n,c,e(d),e(h)]),c.length===u.length&&(setTimeout(r),c.unbind(".imagesLoaded")))}var s=this,a=e.isFunction(e.Deferred)?e.Deferred():0,l=e.isFunction(a.notify),c=s.find("img").add(s.filter("img")),u=[],d=[],h=[];return c.length?c.bind("load.imagesLoaded error.imagesLoaded",function(e){o(e.target,"error"===e.type)}).each(function(n,r){var s=r.src,a=e.data(r,"imagesLoaded");return a&&a.src===s?(o(r,a.isBroken),void 0):r.complete&&r.naturalWidth!==t?(o(r,0===r.naturalWidth||0===r.naturalHeight),void 0):((r.readyState||r.complete)&&(r.src=i,r.src=s),void 0)}):r(),a?a.promise(s):s}}(jQuery),define("jquery-plugins/jquery.imagesloaded",function(){}),define("aui-plugins/image-differ",["jquery","underscore","eve","fd-slider","jquery-plugins/jquery.imagesloaded"],function(e,t,i,n){function r(e,t){e.onchange=t}function o(e){e.onchange=null}function s(t){if(t.data("natural-size"))return e.Deferred().resolve(t.data("natural-size"));if(t[0].naturalWidth){var i={width:t[0].naturalWidth,height:t[0].naturalHeight};return t.data("natural-size",i),e.Deferred().resolve(i)}var n=new Image,r=e.Deferred(),o=!1,s=function(){if(!o){var e={width:n.width,height:n.height};t.data("natural-size",e),r.resolve(e),o=!0}};return n.onload=s,n.src=t[0].src,n.complete&&s(),r}function a(e,t){this._$container=e,this._$toggle=t}function l(e,t){var i=e.data("margin_border_padding");return null==i&&(i=e.outerWidth(!0)-e.width(),e.data("margin_border_padding",i)),t-i}return a.prototype.init=function(){var t,i,n=this;this._$toggle.on("click",function(e){e.preventDefault()});var r=this._$imgs=this._$container.find("img");this._$sinceImg=r.eq(0),this._$untilImg=r.eq(1),this._$untilRevision=this._$untilImg.parent(),this._$sinceRevision=this._$sinceImg.parent(),this._$revisions=this._$untilRevision.add(this._$sinceRevision),this._$untilRevisionLabel=n._$untilRevision.find("h5"),this._$sinceRevisionLabel=n._$sinceRevision.find("h5"),r.imagesLoaded().always(function(){var r=s(n._$sinceImg).done(function(e){t=e}),o=s(n._$untilImg).done(function(e){i=e});e.when(r,o).done(function(){var e=t.width===i.width&&t.height===i.height,r=e&&t.width>0;n._initToolbar(r)})})},a.prototype._initToolbar=function(t){var i=this,n=this._$toggle.find(".image-diff-two-up"),r=this._$toggle.find(".image-diff-blend"),o=this._$toggle.find(".image-diff-split");o.attr("aria-disabled",!t),t&&o.attr("title",o.data("title")),r.attr("aria-disabled",!t),t&&r.attr("title",r.data("title"));var s=this._$toggle.find(".aui-button"),a="two-up",l=function(t){return function(n){var r=e(this);r.parent(),"true"!==r.attr("aria-disabled")&&"true"!==r.attr("aria-pressed")&&(s.attr("aria-pressed","false"),r.attr("aria-pressed","true"),i._onDiffModeChanged(t,a),a=t),n.preventDefault()}};n.click(l("two-up")),r.click(l("blend")),o.click(l("split")),n.add(r).add(o).tooltip({gravity:"s"}),this._toolbarInitialized=!0},a.prototype.destroy=function(){this._cleanOldMode(this._oldMode),this._toolbarInitialized&&(this._destroyToolbar(),this._toolbarInitialized=!1)},a.prototype._destroyToolbar=function(){this._$toggle.remove()},a.prototype._cleanOldMode=function(e){switch(e){case"two-up":this._cleanTwoUpDiff();break;case"blend":this._cleanBlendDiff();break;case"split":this._cleanSplitDiff()}},a.prototype._onDiffModeChanged=function(e,t){switch(this._$container.removeClass("two-up blend split").addClass(e),this._cleanOldMode(t),e){case"two-up":this._setupTwoUpDiff();break;case"blend":this._setupBlendDiff();break;case"split":this._setupSplitDiff()}i("stash.feature.fileContent.diffView.imageDiffModeChanged",this,e,t)},a.prototype._cleanTwoUpDiff=e.noop,a.prototype._setupTwoUpDiff=e.noop,a.prototype._cleanBlendDiff=function(){var e=this._$container.children(".opacity-slider-container"),t=e.find("input");e.remove(),this._$untilImg.css("opacity",""),o(t[0])},a.prototype._setupBlendDiff=function(){var t=this,i=e('<input type="range" min="0" max="1" step="0.01" value="1" />');this._$container.children(".binary:first").before(e('<div class="opacity-slider-container" />').append(i)),n.onDomReady(),r(i[0],function(){t._$untilImg.css("opacity",parseFloat(e(this).val()))})},a.prototype._cleanSplitDiff=function(){this._$imgs.css("width","").css("height",""),this._$revisions.css("width",""),this._$untilRevision.css("margin-left",""),this._$untilRevisionLabel.add(this._$sinceRevisionLabel).css("margin-left","").css("margin-right",""),this._$untilImg.unwrap(),this._$untilRevisionImageContainer.remove(),delete this._$untilRevisionImageContainer,this._$revisions.unwrap(),this._$splitContainer.remove(),delete this._$splitContainer,this._onResize&&(i.off("window.resize.debounced",this._onResize),delete this._onResize)},a.prototype._setSplitDiffElementProperties=function(e,t,i){var n=l(this._$container,this._$container.parent().width()),r=l(t,n),o=l(this._$sinceRevision,r),s=l(this._$sinceImg,o),a=Math.min(i.width,s);this._$imgs.width(a),this._$imgs.height(Math.floor(a/i.width*i.height)),e.height(this._$imgs.outerHeight(!0));var c=a+(o-s);this._$revisions.width(c),this._$untilRevision.css("margin-left",-c)},a.prototype._setupSplitDiff=function(){var e=this;return s(this._$imgs).done(function(t){e._$untilImg.wrap('<div class="image-container" />'),e._$revisions.wrapAll('<div class="split-container" />'),e._$untilRevisionImageContainer=e._$untilImg.parent(),e._$splitContainer=e._$container.find(".split-container");var n;e._onResize=function(){e._setSplitDiffElementProperties(e._$untilRevisionImageContainer,e._$splitContainer,t),n=e._$sinceImg.outerWidth(!0)},e._onResize(),i.on("window.resize.debounced",e._onResize),t.width<50?(e._$untilRevisionLabel.css("margin-left","-50px"),e._$sinceRevisionLabel.css("margin-right","-50px")):t.width<100&&(e._$untilRevisionLabel.css("margin-left",-t.width),e._$sinceRevisionLabel.css("margin-right",-t.width));var r;e._$splitContainer.on("mouseenter",function(){r=e._$untilRevision.offset(),e._$revisions.on("mousemove",o)}),e._$splitContainer.on("mouseleave",function(){e._$revisions.off("mousemove",o)});var o=function(t){e._$untilRevisionImageContainer.css("width",Math.min(t.pageX-r.left,n))}})},a}),define("components/image-diff",["aui","jquery","utils/ready","aui-plugins/image-differ"],function(e,t,i,n){function r(e){var i=e.find(".image-diff");i.each(function(e,i){var r,o=t(i),s=o.find(".diff"),a=o.find(".image-diff-toolbar"),l=o.find(".binary img");2===l.length&&(r=new n(s,a),r.init())})}i("#changeset-diff",r),i("#source-diff",r)}),define("components/typeahead/cursores",[],function(){function e(e,t,i){this.leftRegex=new RegExp((e||/(?:^|\s)(\S+)/).source+"$"),this.rightRegex=new RegExp("^"+(t||/(\S*)/).source),this.maxLength=i>0?i:128}return e.VERSION="0.2",e.startsWith=function(t){return new e(new RegExp(["(?:^|\\s)(",t,"[^",t,"\\s]*)"].join("")))},e.prototype.token=function(e,t){var i;"string"==typeof e?i=e:(i=e.value,t=e.selectionStart);var n=i.slice(0,t),r=i.slice(t),o=n.slice(-this.maxLength),s=r.slice(0,this.maxLength),a=o.match(this.leftRegex),l=a?a[1]:"",c=(a=s.match(this.rightRegex))?a[1]:"";return{value:l?l+c:"",prefix:l,suffix:l?c:"",toString:function(){return this.value}}},e.prototype.replace=function(e,t,i){var n;"string"==typeof e?n=e:(n=e.value,i=t,t=e.selectionStart);var r=this.token(n,t);if(n&&!r.value)return"string"==typeof e?n:!1;var o=n.slice(0,t),s=n.slice(t),a=[o.slice(0,o.length-r.prefix.length),i,s.slice(r.suffix.length)].join("");if("string"==typeof e)return a;var l=i.length-r.prefix.length;return e.value=a,e.setSelectionRange(t+l,t+l),!0},e}),define("components/typeahead/typeahead-view",["backbone","utils/mustache"],function(e,t){return e.View.extend({tagName:"a",className:"interactive",extraClassNames:"",initialize:function(e){this.query=e.query||"",e.templateName&&(this.template=_.partial(t.toHtml,e.templateName))},render:function(){return this.$el.children().length?this:(this.$el.html(this.template(this.model.toHighlightedJSON(this.query))),this.$el.addClass(_.result(this,"extraClassNames")),this)},setQuery:function(e){var t=this.model.toHighlightedJSON(e);return _.each(_.result(this.model,"highlightAttrs"),function(e){var i=e.replace("_","-");this.$(".{}".format(i)).html(t[e])},this),this.query=e,this.render()}})}),define("components/typeahead/typeahead-suggestions",["jquery","backbone","underscore","components/typeahead/typeahead-view"],function(e,t,i,n){return t.View.extend({tagName:"div",className:"bb-typeahead-suggestions aui-dropdown2 aui-style-default",extraClassNames:function(){return this.extraClasses},viewClass:function(){return this.suggestionView},callToActionHtml:function(){var t=e("<li>").addClass("bb-typeahead-item");return t.text(this.callToActionText),t},noResultHtml:function(t){var i=e("<li>").addClass("bb-typeahead-item");return t.searching?(i.addClass("bb-typeahead-searching"),i.text(interpolate(this.searchingText,{query:t.query},!0))):i.text(interpolate(this.noResultsText,{query:t.query},!0)),i},initialize:function(t){this.$ul=e("<ul></ul>"),this.$el.append(this.$ul),this.$el.attr("id",i.uniqueId("bb-typeahead-suggestions-")),this.$el.css("z-index",5e3),this.views={},this.models=[],this.index=0,t=t||{},this.suggestionView=t.suggestionView||n,this.callToActionText=t.callToActionText||gettext("Begin typing to search"),this.noResultsText=t.noResultsText||gettext("Found no matches for %(query)s"),this.searchingText=t.searchingText||gettext("Searching for %(query)s"),this.extraClasses=t.extraClasses||"",this.suggestionTemplate=t.suggestionTemplate||"mention-result"},render:function(t){if(!t)return this;var n=this;return n.models=t.results,n.$ul.removeClass("bb-typeahead-suggestions-none").children("li").detach().find("a").removeClass("active"),n.$el.addClass(i.result(n,"extraClassNames")),n.models.length?i.each(n.models,function(i,r){var o,s=i.get(i.idAttribute);(o=n.views[s])?o.setQuery(t.query):o=n.views[s]=new(n.viewClass())({model:i,query:t.query,templateName:n.suggestionTemplate}),o.render(),o.$el.attr("data-model-id",i.get(i.idAttribute)),0===r&&o.$el.addClass("active"),n.$ul.append(e('<li class="bb-typeahead-item">').append(o.el))}):t.query?n.$ul.addClass("bb-typeahead-suggestions-none").append(this.noResultHtml({query:t.query,searching:t.searching})):n.$ul.addClass("bb-typeahead-suggestions-none").append(this.callToActionHtml({})),n},count:function(){return this.models.length},activeModel:function(){var e=this.$ul.find("a.active").attr("data-model-id");return e?i.find(this.models,function(t){return t.get(t.idAttribute)===e}):null},replacementText:function(){var e=this.activeModel();return e?e.replacementText():null}})}),define("components/typeahead/typeahead-completion",["backbone","underscore","components/typeahead/cursores","components/typeahead/typeahead-suggestions"],function(e,t,i,n){return e.View.extend({BACKSPACE:8,DELETE:46,ESC:27,ENTER:13,LEFT:37,RIGHT:39,TAB:9,events:{"keydown .bb-typeahead-input":"onKeyDown","keypress .bb-typeahead-input":"onKeyPress","focus .bb-typeahead-input":"onFocus"},initialize:function(e){if(this.hide=t.has(e,"hide")?!!e.hide:!0,this.focus=t.has(e,"focus")?!!e.focus:!0,this.source=e.source,this.source.on("respond",this.respond,this),e.results&&e.results.cid)this.results=e.results;else{var i=e.results||n;this.results=new i({suggestionView:e.resultView,callToActionText:e.callToActionText,extraClasses:e.resultsClasses,suggestionTemplate:e.resultTemplate,noResultsText:e.noResultsText,searchingText:e.searchingText})}this.results.$el.on("aui-dropdown2-show aui-dropdown2-hide",t.bind(this.onToggleDropdownVisibility,this)).appendTo("body"),this.results.$el.delegate(".bb-typeahead-item","click",t.bind(this.complete,this)),this.showingSuggestions=!1,this.currentEl=null,this.escPressed=!1,this.searchingTimeout=null,this.onFocusTimeout=null},respond:function(e){var i=this,n=e.query||"",r=!!n&&!i.source.hasQueryCache(n)&&i.source.shouldGetMoreResults(e.results);i.hide&&n&&!e.results.length?(!i.showingSuggestions||r)&&i.hideSuggestions(i.currentEl):(i.showSuggestions(i.currentEl),i.results.render(t.extend(e,{searching:r}))),clearTimeout(i.searchingTimeout),r&&!e.results.length?i.searchingTimeout=setTimeout(function(){$(i.currentEl).addClass("bb-typeahead-searching")},300):$(i.currentEl).removeClass("bb-typeahead-searching")},onKeyDown:function(e){if(this.currentEl=e.target,e.which===this.BACKSPACE||e.which===this.DELETE)return this.queueQuery(e.target),void 0;if(this.showingSuggestions)switch(e.which){case this.LEFT:case this.RIGHT:this.queueQuery(e.target);break;case this.ESC:e.preventDefault(),e.stopPropagation(),this.escPressed=!0,this.hideSuggestions(e.target);break;case this.TAB:1===this.results.count()&&(e.preventDefault(),e.stopPropagation(),this.complete(e))}},shouldStopSuggesting:function(){return!1},shouldSuppressSuggestions:function(){return this.escPressed},stopSuppressingSuggestions:function(){this.escPressed=!1},isWithinCodeBlock:function(){return!1},onKeyPress:function(e){if(0!==e.which&&e.which!==this.ENTER){var t=e.target;this.currentEl=t,this.shouldStopSuggesting(e)?this.hideSuggestions(t):this.queueQuery(t)}},onFocus:function(e){var t=this,i=e.target;t.currentEl=i,null===this.onFocusTimeout&&(this.onFocusTimeout=setTimeout(function(){t.focus&&!i.value&&"false"!==$(i).attr("data-bb-typeahead-focus")&&($(i).attr("data-bb-typeahead-focus","false"),t.queueQuery(i)),t.onFocusTimeout=null},200))},hideSuggestions:function(e){this.results.$el.is(":visible")&&$(e).trigger("aui-button-invoke"),this.setShowingState(e,!1)},cursor:function(){return new i(/(.*)/,/(.*)/)},queryTerm:function(e){return this.cursor().token(e).value},queueQuery:function(e){var t=this;setTimeout(function(){!e.value&&t.shouldSuppressSuggestions()&&t.stopSuppressingSuggestions();var i=t.queryTerm(e);null!==i?t.source.query(i):t.hideSuggestions(e)},0)},onToggleDropdownVisibility:function(e){this.setShowingState(this.currentEl,"aui-dropdown2-show"===e.type)},setShowingState:function(e,t){this.showingSuggestions=t,t||$(e).removeClass("aui-dropdown2-trigger")},showSuggestions:function(e){this.isWithinCodeBlock(e)||this.shouldSuppressSuggestions()||(this.setShowingState(e,!0),this.results.$el.is(":visible")||$(e).attr({"aria-owns":this.results.$el.attr("id"),"aria-haspopup":"true"}).addClass("aui-dropdown2-trigger").trigger("aui-button-invoke"))},complete:function(e){var t="click"===e.type?this.currentEl:e.target,i=this.results.replacementText();null!==i&&(this.replaceText(t,i),"click"===e.type&&$.browser.mozilla&&$(t).focus()),this.hideSuggestions(t)},replaceText:function(e,t){var i=$(e);$.browser.msie&&parseInt($.browser.version,10)<10&&i.focus(),this.cursor().replace(e,t),i.trigger("typeahead-completed")}})}),define("components/typeahead/mention-completion",["backbone","underscore","components/typeahead/cursores","components/typeahead/typeahead-completion","jquery-plugins/jquery.caretposition"],function(e,t,i,n){return n.extend({events:{"keydown .bb-mention-input":"onKeyDown","keypress .bb-mention-input":"onKeyPress"},initialize:function(e){n.prototype.initialize.call(this,t.extend({hide:!1,focus:!1},e)),this.atSignCursor=i.startsWith("@"),this.results.$el.on("aui-dropdown2-show",t.bind(this.setAbsolutePosition,this)).addClass("aui-dropdown2-tailed")},cursor:function(){return this.atSignCursor},isWithinCodeBlock:function(){return!1},shouldStopSuggesting:function(e){if(" "!==String.fromCharCode(e.which))return!1;var t=this.results.models.length,i=this.cursor().token(e.target).prefix.slice(1),n=this.source.hasQueryCache(i),r=0===t,o=1===t&&this.results.replacementText()===i;return n&&(r||o)},onKeyPress:function(e){n.prototype.onKeyPress.call(this,e);var t=String.fromCharCode(e.which);this.isWithinCodeBlock(e.target)||!this.shouldSuppressSuggestions()||this.showingSuggestions||"@"!==t||n.prototype.stopSuppressingSuggestions.call(this)},setAbsolutePosition:function(){var e=this.currentEl,t=$(e),i=e.selectionStart,n=this.cursor().token(e);e.setSelectionRange(i-n.prefix.length,i-n.prefix.length);var r=t.getCaretPosition();e.setSelectionRange(i-(n.prefix.length-1),i-(n.prefix.length-1));var o=t.getCaretPosition();e.setSelectionRange(i,i);var s=t.offset(),a=(o.left-r.left)/2,l=20,c=8,u=2;this.results.$el.css({top:s.top+o.top+u,left:s.left+r.left+a-(l+c),"min-width":350,"max-width":350})},queryTerm:function(e){var t=this.cursor().token(e);return t.value?t.value.slice(1):null},replaceText:function(e,t){var i=e.selectionStart===e.value.length?" ":"";n.prototype.replaceText.call(this,e,"@"+t+i)}})}),define("components/mentions/mention-autocomplete",["underscore","components/typeahead/cursores","components/typeahead/mention-completion"],function(e,t,i){return i.extend({initialize:function(e){this.usernameCursor=new t(/(?:^|\s)(@[^@.,?!'"\s]*)/,/([^.,?!'"\s]+)/),this.relaxedCursor=new t(/(?:^|\s)(@$|@[^@\s][^@\n]*)/,/([^.,?!'"\s]+)/),i.prototype.initialize.call(this,e)},cursor:function(){return this.showingSuggestions?this.relaxedCursor:this.usernameCursor},isWithinCodeBlock:function(e){var t=e.value.substring(0,e.selectionEnd),i=e.value.substring(0,e.selectionEnd).split("\n"),n=i[i.length-1],r=0===t.split("```").length%2,o=0===n.indexOf("    ");return r||o}})}),define("components/typeahead/typeahead-model",["backbone","underscore"],function(e,t){return e.Model.extend({replacementText:function(){return this.get(this.idAttribute)},highlightAttrs:function(){return[this.idAttribute]},toHighlightedJSON:function(e){var i=this.toJSON();return t.each(t.result(this,"highlightAttrs"),function(t){i[t]&&(i[t]=this.highlightSubstring(i[t],e))},this),i},highlight:function(e,i){return i=i.toLowerCase(),0===i.length||0!==e.toLowerCase().indexOf(i)?t.escape(i):["<em>",t.escape(e.slice(0,i.length)),"</em>",t.escape(e.slice(i.length))].join("")},highlightSubstring:function(e,i){i=i.toLowerCase();var n=this.splitWords(e);if(!n.length||!i)return t.escape(e);for(var r=[];n.length;){if(0===n.join("").toLowerCase().indexOf(i)){r.push(this.highlight(n.join(""),i));break}r.push(t.escape(n.shift(),i))}return r.join("")},splitWordsRegExp:/\s+/,splitWords:function(e){for(var t=[],i=e.split(this.splitWordsRegExp);i.length;){var n=i.shift();if(n){var r=e.indexOf(n);r>0&&t.push(e.slice(0,r)),t.push(n),e=e.slice(r+n.length)}}return e&&t.push(e),t},startsWith:function(e,t){var i=this.splitWords(e.toLowerCase());if(!i.length)return!1;for(/\s+/.test(i[0])&&i.shift(),t=t.toLowerCase();i.length;){if(0===i.join("").indexOf(t))return!0;i=i.slice(2)}return!1},matches:function(e){return e?this.startsWith(this.replacementText(),e):!0}},{matcher:function(e,t){var i=this;return e.matches(t,i)}})}),define("components/mentions/typeahead-user-model",["underscore","components/typeahead/typeahead-model"],function(e,t){return t.extend({idAttribute:"username",initialize:function(e){this.set(this.parse(e))},parse:function(e){var t=[];return e&&(e.first_name&&t.push(e.first_name),e.last_name&&t.push(e.last_name),t.length&&(e.display_name=t.join(" "))),e},highlightAttrs:["display_name","username"],sortKeys:function(e){var t=this.get("display_name")||this.get("username");return[!(e.toLowerCase()===this.get("username").toLowerCase()),this.get("is_team"),!this.get("is_teammate"),!(this.usernameMatch(e)||this.displayNameMatch(e)),t.toLowerCase(),this.get("username").toLowerCase()]},usernameMatch:function(e){return this.startsWith(this.get("username"),e)},displayNameMatch:function(e){var t=this.get("display_name");return t&&this.startsWith(t,e)},keywordMatch:function(t){return e.some(this.get("keywords"),function(e){return this.startsWith(e,t)},this)},matches:function(e,t){var i=t.getQueryData(e),n=i.include_teams||!this.get("is_team");if(!e)return n;var r=this.usernameMatch(e),o=this.displayNameMatch(e),s=this.keywordMatch(e);return n&&(r||o||s)}})}),define("components/mentions/mention-user-model",["components/mentions/typeahead-user-model","data/current-user"],function(e,t){return e.extend({matches:function(i,n){return this.get("username")===t.username?!1:e.prototype.matches.call(this,i,n)}})}),AJS.ProgressiveDataSet=Backbone.Collection.extend({initialize:function(e,t){t||(t={}),t.matcher&&(this.matcher=t.matcher),t.model&&(this.model=t.model),this._idAttribute=(new this.model).idAttribute,this._maxResults=t.maxResults||5,this._queryData=t.queryData||{},this._queryParamKey=t.queryParamKey||"q",this._queryEndpoint=t.queryEndpoint||"",this.value=null,this.queryCache={},this.activeQueryCount=0,_.bindAll(this,"query","respond")},url:function(){return this._queryEndpoint},query:function(e){var t,i;this.value=e,i=this.getFilteredResults(e),this.respond(e,i),e&&this._queryEndpoint&&!this.hasQueryCache(e)&&this.shouldGetMoreResults(i)&&(t=this.fetch(e),this.activeQueryCount++,this.trigger("activity",{activity:!0}),t.always(_.bind(function(){this.activeQueryCount--,this.trigger("activity",{activity:!!this.activeQueryCount})},this)),t.done(_.bind(function(t,i,n){this.addQueryCache(e,t,n)},this)),t.done(_.bind(function(){e=this.value,i=this.getFilteredResults(e),this.respond(e,i)},this)))},getQueryData:function(e){var t=_.isFunction(this._queryData)?this._queryData(e):this._queryData,i=_.extend({},t);return i[this._queryParamKey]=e,i},fetch:function(e){var t=this.getQueryData(e),i={add:!0,update:!0,remove:!1,data:t},n=Backbone.Collection.prototype.fetch.call(this,i);return n},respond:function(e,t){return this.trigger("respond",{query:e,results:t}),t},matcher:function(){},getFilteredResults:function(e){var t=[];return t=this.filter(function(t){return 1==this.matcher(t,e)},this),this._maxResults&&(t=_.first(t,this._maxResults)),t},addQueryCache:function(e,t,i){var n=this.queryCache,r=this.parse(t,i);n[e]=_.pluck(r,this._idAttribute)},hasQueryCache:function(e){return this.queryCache.hasOwnProperty(e)},findQueryCache:function(e){return this.queryCache[e]},shouldGetMoreResults:function(e){return e.length<this._maxResults},setMaxResults:function(e){this._maxResults=e,this.value&&this.respond(this.value,this.getFilteredResults(this.value))}}),define("aui-plugins/progressive-data-set",function(){}),AJS.TruncatingProgressiveDataSet=AJS.ProgressiveDataSet.extend({initialize:function(e,t){this._maxResponseSize=t.maxResponseSize,AJS.ProgressiveDataSet.prototype.initialize.call(this,e,t)},shouldGetMoreResults:function(){var e=this.findQueryResponse(this.value);return!e||e.length===this._maxResponseSize},findQueryResponse:function(e){for(;e;){var t=this.findQueryCache(e);if(t)return t;e=e.substr(0,e.length-1)}return null}}),define("aui-plugins/truncating-progressive-data-set",function(){}),define("utils/progressive-data-set",["underscore","aui","aui-plugins/truncating-progressive-data-set"],function(e,t){return t.TruncatingProgressiveDataSet.extend({initialize:function(e,i){i.maxResponseSize=i.maxResponseSize||20,t.TruncatingProgressiveDataSet.prototype.initialize.call(this,e,i)},getFilteredResults:function(t){var i=this.filter(function(e){return this.matcher(e,t)},this);return i=e.sortBy(i,function(e){return e.sortKeys(t)}),i=e.first(i,this._maxResults)}})}),define("components/mentions/user-data-set",["utils/progressive-data-set"],function(e){return e.extend({hasQueryCache:function(t){return t.length<3||e.prototype.hasQueryCache.call(this,t)},getFilteredResults:function(t){var i=e.prototype.getFilteredResults.call(this,t),n=_.filter(i,function(e){return e.get("is_teammate")}),r=_.filter(i,function(e){return!e.get("is_teammate")&&t.toLowerCase()===e.get("username").toLowerCase()}),o=_.filter(i,function(e){return!e.get("is_teammate")&&t.toLowerCase()!==e.get("username").toLowerCase()});return n.concat(r).concat(o)}})}),define("components/mentions/user-typeahead",["underscore","components/typeahead/typeahead-completion"],function(e,t){return t.extend({events:{"keydown .bb-user-typeahead":"onKeyDown","keypress .bb-user-typeahead":"onKeyPress","focus .bb-user-typeahead":"onFocus"}})}),define("components/mentions/user-and-team-typeahead",["components/mentions/user-typeahead"],function(e){return e.extend({events:{"keydown .bb-user-team-typeahead":"onKeyDown","keypress .bb-user-team-typeahead":"onKeyPress","focus .bb-user-team-typeahead":"onFocus"}})}),define("components/mentions/user-suggestions",["underscore","utils/mustache","components/typeahead/typeahead-suggestions"],function(e,t,i){return i.extend({extraClassNames:function(){return i.prototype.extraClassNames.call(this)+" bb-user-suggestions"},callToActionHtml:e.bind(t.toHtml,null,"mention-call-to-action"),noResultHtml:function(e){return e.query.length>=3?i.prototype.noResultHtml.call(this,e):this.callToActionHtml(e)}})}),define("components/mentions/typeahead-user",["underscore","components/typeahead/typeahead-view"],function(e,t){return t.extend({extraClassNames:function(){return this.model.get("is_team")?"bb-typeahead-team":"bb-typeahead-user"}})}),define("components/mentions/index",["on-ready","underscore","components/mentions/mention-autocomplete","components/mentions/mention-user-model","components/mentions/typeahead-user-model","components/mentions/user-data-set","components/mentions/user-and-team-typeahead","components/mentions/user-typeahead","components/mentions/user-suggestions","components/mentions/typeahead-user","utils/exists","data/current-user"],function(e,t,i,n,r,o,s,a,l,c,u,d){function h(){var e=[];d.id&&(e=t.map($("#recently-mentioned-"+d.id).data("value"),function(e){return new r(e)}));var u=$("body")[0],h={model:r,matcher:r.matcher,queryEndpoint:"/xhr/user-mention",queryParamKey:"term",maxResponseSize:20},p=new o(e,h),f=new o(e,t.extend({},h,{model:n,matcher:n.matcher})),m=new o(e,t.extend(h,{queryData:{include_teams:!0}})),g={el:u,results:l,resultView:c};new i(t.extend({source:f},g)).render(),new a(t.extend({source:p},g)).render(),new s(t.extend({source:m},g)).render()}return e(function(){h()})}),define("config/bitbucket",["bitbucket"],function(e){e.proxy_url="/!api/1.0/"}),define("utils/csrf",["jquery"],function(e){function t(t){var i=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var o=e.trim(n[r]);if(o.substring(0,t.length+1)==t+"="){i=decodeURIComponent(o.substring(t.length+1));break}}return i}e.ajaxSetup({beforeSend:function(e,i){/^(?!https?:)/.test(i.url)&&e.setRequestHeader("X-CSRFToken",t("csrftoken"))
}})}),define("utils/opt-store",["jquery","underscore","utils/api-helper","data/current-user","data/debug"],function(e,t,i,n,r){var o=window.optimizely,s={};return!r&&"undefined"!=typeof o&&n.isAuthenticated&&t.each(o.data.state.activeExperiments,function(t){var r=o.data.state.variationMap[t];e.ajax({type:"PUT",url:i.concat("user","preferences",n.username,"optimizely-"+t),data:{value:r},dataType:"json"}),s[t]=r}),s}),define("utils/replace-url",["jquery","jquery-plugins/jquery.pjax"],function(e){var t=/<meta .*>/;if(e.support.pjax){var i=e("body").attr("data-replace-url");i&&window.history.replaceState({},"",i),e(document).on("pjax:success",function(n,r){if(r){var o=r.match(t);if(o){var s=e(o[0]);i=s.attr("content"),i&&window.history.replaceState({},"",i)}}})}}),function(e,t){"function"==typeof define&&define.amd?define("utils/retina",["jquery"],t):t(e.jQuery)}(this,function(e){window.devicePixelRatio<=1.5||e('img[src*="language-avatars"]').each(function(t,i){var n=e(i),r=n.attr("src"),o=/(\d+)\.png$/,s=r.match(o),a=parseInt(s[1],10);n.attr("src",r.replace(o,2*a+".png"))})}),define("utils/trigger-events",["jquery","store"],function(e,t){var i=t.get("events");i&&i.length&&e.ajax({url:"/xhr/trigger-events/",type:"POST",dataType:"json",data:JSON.stringify(i)}),t.set("events",[])}),define("global",["aui","jquery","shims/es5","shims/string-extensions","shims/string-format","shims/string-format-transformers","shims/string-score","command-bar/index","ace","initialization","i18n","localization","tracking","messages","keyboard-shortcuts","team-login-warning","tooltips","components/banner","registration/create-team-link","components/header","components/follow","components/follow-list","components/footer","components/image-diff","components/mentions/index","config/bitbucket","utils/csrf","utils/opt-store","utils/replace-url","utils/retina","utils/trigger-events"],function(e,t){window.$=t}),requirejs.config({paths:{aui:"./utils/aui","aui-stable":"../lib/aui/js/aui","aui-experimental":"../lib/aui/js/aui-experimental","aui-plugins":"../lib/aui-plugins",backbone:"../lib/backbone",bitbucket:"../lib/bitbucket",codemirror:"../lib/codemirror/lib/codemirror","codemirror-addons":"../lib/codemirror/addon","codemirror-modes":"../lib/codemirror/mode",cursores:"../lib/cursores","diff-match-patch":"../lib/diff_match_patch",eve:"../lib/eve","fd-slider":"../lib/fd-slider/fd-slider",jquery:"../lib/jquery","jquery-ui":"../lib/jquery-ui","jquery-plugins":"../lib/jquery-plugins","jquery-plugins/jquery.fancybox":"../lib/fancybox/jquery.fancybox","jquery-plugins/jquery.chosen":"../lib/chosen/chosen.jquery","jquery-plugins/jquery.markitup":"../lib/markitup/jquery.markitup-1.1.13","jquery-plugins/jquery.placeholder":"../lib/jquery-plugins/jquery.placeholder.min","jquery-plugins/jquery.caretposition":"../lib/jquery-plugins/jquery.caretposition","jquery-plugins/jquery.select2":"../lib/select2/jquery.select2",jsudiff:"../lib/jsudiff",liquidmetal:"../lib/liquidmetal",mustache:"../lib/mustache-0.5.1-dev","on-ready":"./utils/on-ready","require-lib":"./require","shims/es5":"../lib/es5","shims/string-extensions":"../lib/string-extensions","shims/string-format":"../lib/string-format","shims/string-format-transformers":"../lib/string-format-transformers","shims/string-score":"../lib/string-score",store:"../lib/store",spin:"../lib/spin",text:"../lib/require-plugins/text",underscore:"../lib/underscore",zxcvbn:"../lib/zxcvbn"},shim:{"aui-stable":{deps:["jquery","jquery-ui"],exports:"AJS"},"aui-experimental":["aui-stable","jquery-plugins/jquery.tipsy","jquery-plugins/jquery.select2"],"aui-plugins/close-aui-dialog":["aui"],"aui-plugins/progressive-data-set":["aui","backbone"],"aui-plugins/truncating-progressive-data-set":["aui-plugins/progressive-data-set"],backbone:{deps:["jquery","underscore"],exports:"Backbone"},bitbucket:{deps:["jquery"],exports:"bitbucket"},codemirror:{exports:"CodeMirror"},"codemirror-addons/mode/overlay":["codemirror"],"codemirror-modes/apl/apl":["codemirror"],"codemirror-modes/asterisk/asterisk":["codemirror"],"codemirror-modes/clike/clike":["codemirror"],"codemirror-modes/clojure/clojure":["codemirror"],"codemirror-modes/coffeescript/coffeescript":["codemirror"],"codemirror-modes/commonlisp/commonlisp":["codemirror"],"codemirror-modes/css/css":["codemirror"],"codemirror-modes/d/d":["codemirror"],"codemirror-modes/diff/diff":["codemirror"],"codemirror-modes/ecl/ecl":["codemirror"],"codemirror-modes/erlang/erlang":["codemirror"],"codemirror-modes/gas/gas":["codemirror"],"codemirror-modes/gfm/gfm":["codemirror"],"codemirror-modes/go/go":["codemirror"],"codemirror-modes/groovy/groovy":["codemirror"],"codemirror-modes/haskell/haskell":["codemirror"],"codemirror-modes/haxe/haxe":["codemirror"],"codemirror-modes/htmlembedded/htmlembedded":["codemirror"],"codemirror-modes/htmlmixed/htmlmixed":["codemirror"],"codemirror-modes/http/http":["codemirror"],"codemirror-modes/javascript/javascript":["codemirror"],"codemirror-modes/jinja2/jinja2":["codemirror"],"codemirror-modes/less/less":["codemirror"],"codemirror-modes/livescript/livescript":["codemirror"],"codemirror-modes/lua/lua":["codemirror"],"codemirror-modes/markdown/markdown":["codemirror"],"codemirror-modes/mirc/mirc":["codemirror"],"codemirror-modes/ntriples/ntriples":["codemirror"],"codemirror-modes/ocaml/ocaml":["codemirror"],"codemirror-modes/pascal/pascal":["codemirror"],"codemirror-modes/perl/perl":["codemirror"],"codemirror-modes/php/php":["codemirror"],"codemirror-modes/pig/pig":["codemirror"],"codemirror-modes/properties/properties":["codemirror"],"codemirror-modes/python/python":["codemirror"],"codemirror-modes/q/q":["codemirror"],"codemirror-modes/r/r":["codemirror"],"codemirror-modes/rpm/changes/changes":["codemirror"],"codemirror-modes/rpm/spec/spec":["codemirror"],"codemirror-modes/rst/rst":["codemirror"],"codemirror-modes/ruby/ruby":["codemirror"],"codemirror-modes/rust/rust":["codemirror"],"codemirror-modes/sass/sass":["codemirror"],"codemirror-modes/scheme/scheme":["codemirror"],"codemirror-modes/shell/shell":["codemirror"],"codemirror-modes/sieve/sieve":["codemirror"],"codemirror-modes/smalltalk/smalltalk":["codemirror"],"codemirror-modes/smarty/smarty":["codemirror"],"codemirror-modes/sparql/sparql":["codemirror"],"codemirror-modes/sql/sql":["codemirror"],"codemirror-modes/stex/stex":["codemirror"],"codemirror-modes/tcl/tcl":["codemirror"],"codemirror-modes/tiddlywiki/tiddlywiki":["codemirror"],"codemirror-modes/tiki/tiki":["codemirror"],"codemirror-modes/turtle/turtle":["codemirror"],"codemirror-modes/vb/vb":["codemirror"],"codemirror-modes/vbscript/vbscript":["codemirror"],"codemirror-modes/velocity/velocity":["codemirror"],"codemirror-modes/verilog/verilog":["codemirror"],"codemirror-modes/xml/xml":["codemirror"],"codemirror-modes/xquery/xquery":["codemirror"],"codemirror-modes/yaml/yaml":["codemirror"],"codemirror-modes/z80/z80":["codemirror"],"diff-match-patch":{exports:"diff_match_patch"},"fd-slider":{exports:"fdSlider"},"jquery-ui":["jquery"],"jquery-plugins/jquery.caretposition":["jquery"],"jquery-plugins/jquery.chosen":["jquery"],"jquery-plugins/jquery.client":["jquery"],"jquery-plugins/jquery.color":["jquery"],"jquery-plugins/jquery.cookie":["jquery"],"jquery-plugins/jquery.fancybox":["jquery"],"jquery-plugins/jquery.getscrollbarwidth":["jquery"],"jquery-plugins/jquery.hoverIntent":["jquery"],"jquery-plugins/jquery.imagesloaded":["jquery"],"jquery-plugins/jquery.jeditable":["jquery"],"jquery-plugins/jquery.localize":["jquery"],"jquery-plugins/jquery.markitup":["jquery"],"jquery-plugins/jquery.pjax":["jquery"],"jquery-plugins/jquery.placeholder":["jquery"],"jquery-plugins/jquery.scrollTo":["jquery"],"jquery-plugins/jquery.select2":["jquery"],"jquery-plugins/jquery.textinputs":["jquery"],"jquery-plugins/jquery.tipsy":["jquery"],"jquery-plugins/jquery.ui.autocomplete":["jquery-ui"],"jquery-plugins/jquery.ui.dialog":["jquery-ui"],"jquery-plugins/jquery.ui.position":["jquery-ui"],mustache:{exports:"Mustache"},"shims/string-extensions":["underscore"],"shims/string-format-transformers":["shims/string-format","underscore"],"shims/string-score":["liquidmetal"],store:{exports:"store"},underscore:{exports:"_"},zxcvbn:{exports:"zxcvbn"}}}),define("main",["jquery","underscore","global"],function(e,t){var i=function(e){return function(){t.each(arguments,function(i){i&&t.isFunction(i.onReady)&&i.onReady(e)})}},n=function(t){t.each(function(){var t=e(this),n=t.attr("data-modules").trim();n&&require(n.split(/\s*,\s*/),i(t))})},r=e("#require-js").attr("data-page-module");r&&require([r],function(i){i&&t.isFunction(i.onReady)&&i.onReady(),n(e("[data-modules]")),e(document).on("pjax:end",function(t){n(e(t.target).find("[data-modules]"))})})});
//@ sourceMappingURL=main.js.map